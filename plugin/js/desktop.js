(()=>{var __webpack_modules__={738:()=>{eval("(function (PLUGIN_ID) {\n  'use strict';\n  // mermaid.jsをロードする\n  const script = document.createElement('script');\n  script.src = 'https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js';\n  document.head.appendChild(script);\n\n  script.onload = () => {\n    mermaid.initialize({ startOnLoad: false });\n  };\n\n  kintone.events.on('app.record.index.show', async (event) => {\n    const viewId = 7454774;\n    if (event.viewId !== viewId) {\n      return;\n    }\n\n    const ganttDiagram = generateGanttDiagram(event);\n    const type = mermaid.detectType(ganttDiagram);\n    console.log(type);\n    const content = document.querySelector('#ganttchart-plugin');\n    const diagram = document.createElement('div');\n    diagram.id = 'diagram';\n    diagram.className = 'mermaid';\n    const { svg } = await mermaid.render('diagram', ganttDiagram);\n    diagram.innerHTML = svg;\n    content.appendChild(diagram);\n  });\n\n  const SECTION_FIELD_CODE = '開発対象のアプリ';\n  const TASK_FIELD_CODE = 'タスク名';\n  const TASK_STATUS_FIELD_CODE = 'gantt_status';\n  const TASK_ID_FIELD_CODE = 'タスク名';\n  const START_DATE_FIELD_CODE = '開始日';\n  const END_DATE_FIELD_CODE = '終了日';\n\n  function generateGanttDiagram(event) {\n    const records = event.records;\n    const sectionTasks = {};\n\n    // セクション別にタスクを集約\n    records.forEach(record => {\n      const section = record[SECTION_FIELD_CODE].value;\n      const task = record[TASK_FIELD_CODE].value;\n      const status = record[TASK_STATUS_FIELD_CODE].value;\n      const taskId = record[TASK_ID_FIELD_CODE].value;\n      const startDate = record[START_DATE_FIELD_CODE].value;\n      const endDate = record[END_DATE_FIELD_CODE].value;\n\n      if (!sectionTasks[section]) {\n        sectionTasks[section] = [];\n      }\n\n      sectionTasks[section].push({\n        task,\n        status,\n        taskId,\n        startDate,\n        endDate\n      });\n    });\n\n    // mermaid記法に変換\n    let mermaidDiagram = 'gantt\\n  dateFormat YYYY-MM-DD\\n  title Gantt Chart\\n';\n\n    Object.keys(sectionTasks).forEach(section => {\n      mermaidDiagram += `section ${section}\\n`;\n\n      sectionTasks[section].forEach(task => {\n        const { task: taskName, status, taskId, startDate, endDate } = task;\n        const taskStatus = status ? `${status},` : '';\n        mermaidDiagram += `${taskName} :${taskStatus} ${taskId}, ${startDate}, ${endDate}\\n`;\n      });\n    });\n\n    return mermaidDiagram;\n  }\n\n})(kintone.$PLUGIN_ID);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNzM4LmpzIiwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLHlCQUF5QixvQkFBb0I7QUFDN0M7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksTUFBTTtBQUNsQjtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLOztBQUVMO0FBQ0E7O0FBRUE7QUFDQSxtQ0FBbUMsUUFBUTs7QUFFM0M7QUFDQSxnQkFBZ0IscURBQXFEO0FBQ3JFLHVDQUF1QyxPQUFPO0FBQzlDLDZCQUE2QixVQUFVLEdBQUcsWUFBWSxFQUFFLE9BQU8sSUFBSSxVQUFVLElBQUksUUFBUTtBQUN6RixPQUFPO0FBQ1AsS0FBSzs7QUFFTDtBQUNBOztBQUVBLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9nYW50dC1vbi1raW50b25lLy4vc3JjL2pzL2Rlc2t0b3AuanM/YzYxYyJdLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gKFBMVUdJTl9JRCkge1xuICAndXNlIHN0cmljdCc7XG4gIC8vIG1lcm1haWQuanPjgpLjg63jg7zjg4njgZnjgotcbiAgY29uc3Qgc2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XG4gIHNjcmlwdC5zcmMgPSAnaHR0cHM6Ly9jZG4uanNkZWxpdnIubmV0L25wbS9tZXJtYWlkL2Rpc3QvbWVybWFpZC5taW4uanMnO1xuICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHNjcmlwdCk7XG5cbiAgc2NyaXB0Lm9ubG9hZCA9ICgpID0+IHtcbiAgICBtZXJtYWlkLmluaXRpYWxpemUoeyBzdGFydE9uTG9hZDogZmFsc2UgfSk7XG4gIH07XG5cbiAga2ludG9uZS5ldmVudHMub24oJ2FwcC5yZWNvcmQuaW5kZXguc2hvdycsIGFzeW5jIChldmVudCkgPT4ge1xuICAgIGNvbnN0IHZpZXdJZCA9IDc0NTQ3NzQ7XG4gICAgaWYgKGV2ZW50LnZpZXdJZCAhPT0gdmlld0lkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgZ2FudHREaWFncmFtID0gZ2VuZXJhdGVHYW50dERpYWdyYW0oZXZlbnQpO1xuICAgIGNvbnN0IHR5cGUgPSBtZXJtYWlkLmRldGVjdFR5cGUoZ2FudHREaWFncmFtKTtcbiAgICBjb25zb2xlLmxvZyh0eXBlKTtcbiAgICBjb25zdCBjb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2dhbnR0Y2hhcnQtcGx1Z2luJyk7XG4gICAgY29uc3QgZGlhZ3JhbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGRpYWdyYW0uaWQgPSAnZGlhZ3JhbSc7XG4gICAgZGlhZ3JhbS5jbGFzc05hbWUgPSAnbWVybWFpZCc7XG4gICAgY29uc3QgeyBzdmcgfSA9IGF3YWl0IG1lcm1haWQucmVuZGVyKCdkaWFncmFtJywgZ2FudHREaWFncmFtKTtcbiAgICBkaWFncmFtLmlubmVySFRNTCA9IHN2ZztcbiAgICBjb250ZW50LmFwcGVuZENoaWxkKGRpYWdyYW0pO1xuICB9KTtcblxuICBjb25zdCBTRUNUSU9OX0ZJRUxEX0NPREUgPSAn6ZaL55m65a++6LGh44Gu44Ki44OX44OqJztcbiAgY29uc3QgVEFTS19GSUVMRF9DT0RFID0gJ+OCv+OCueOCr+WQjSc7XG4gIGNvbnN0IFRBU0tfU1RBVFVTX0ZJRUxEX0NPREUgPSAnZ2FudHRfc3RhdHVzJztcbiAgY29uc3QgVEFTS19JRF9GSUVMRF9DT0RFID0gJ+OCv+OCueOCr+WQjSc7XG4gIGNvbnN0IFNUQVJUX0RBVEVfRklFTERfQ09ERSA9ICfplovlp4vml6UnO1xuICBjb25zdCBFTkRfREFURV9GSUVMRF9DT0RFID0gJ+e1guS6huaXpSc7XG5cbiAgZnVuY3Rpb24gZ2VuZXJhdGVHYW50dERpYWdyYW0oZXZlbnQpIHtcbiAgICBjb25zdCByZWNvcmRzID0gZXZlbnQucmVjb3JkcztcbiAgICBjb25zdCBzZWN0aW9uVGFza3MgPSB7fTtcblxuICAgIC8vIOOCu+OCr+OCt+ODp+ODs+WIpeOBq+OCv+OCueOCr+OCkumbhue0hFxuICAgIHJlY29yZHMuZm9yRWFjaChyZWNvcmQgPT4ge1xuICAgICAgY29uc3Qgc2VjdGlvbiA9IHJlY29yZFtTRUNUSU9OX0ZJRUxEX0NPREVdLnZhbHVlO1xuICAgICAgY29uc3QgdGFzayA9IHJlY29yZFtUQVNLX0ZJRUxEX0NPREVdLnZhbHVlO1xuICAgICAgY29uc3Qgc3RhdHVzID0gcmVjb3JkW1RBU0tfU1RBVFVTX0ZJRUxEX0NPREVdLnZhbHVlO1xuICAgICAgY29uc3QgdGFza0lkID0gcmVjb3JkW1RBU0tfSURfRklFTERfQ09ERV0udmFsdWU7XG4gICAgICBjb25zdCBzdGFydERhdGUgPSByZWNvcmRbU1RBUlRfREFURV9GSUVMRF9DT0RFXS52YWx1ZTtcbiAgICAgIGNvbnN0IGVuZERhdGUgPSByZWNvcmRbRU5EX0RBVEVfRklFTERfQ09ERV0udmFsdWU7XG5cbiAgICAgIGlmICghc2VjdGlvblRhc2tzW3NlY3Rpb25dKSB7XG4gICAgICAgIHNlY3Rpb25UYXNrc1tzZWN0aW9uXSA9IFtdO1xuICAgICAgfVxuXG4gICAgICBzZWN0aW9uVGFza3Nbc2VjdGlvbl0ucHVzaCh7XG4gICAgICAgIHRhc2ssXG4gICAgICAgIHN0YXR1cyxcbiAgICAgICAgdGFza0lkLFxuICAgICAgICBzdGFydERhdGUsXG4gICAgICAgIGVuZERhdGVcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgLy8gbWVybWFpZOiomOazleOBq+WkieaPm1xuICAgIGxldCBtZXJtYWlkRGlhZ3JhbSA9ICdnYW50dFxcbiAgZGF0ZUZvcm1hdCBZWVlZLU1NLUREXFxuICB0aXRsZSBHYW50dCBDaGFydFxcbic7XG5cbiAgICBPYmplY3Qua2V5cyhzZWN0aW9uVGFza3MpLmZvckVhY2goc2VjdGlvbiA9PiB7XG4gICAgICBtZXJtYWlkRGlhZ3JhbSArPSBgc2VjdGlvbiAke3NlY3Rpb259XFxuYDtcblxuICAgICAgc2VjdGlvblRhc2tzW3NlY3Rpb25dLmZvckVhY2godGFzayA9PiB7XG4gICAgICAgIGNvbnN0IHsgdGFzazogdGFza05hbWUsIHN0YXR1cywgdGFza0lkLCBzdGFydERhdGUsIGVuZERhdGUgfSA9IHRhc2s7XG4gICAgICAgIGNvbnN0IHRhc2tTdGF0dXMgPSBzdGF0dXMgPyBgJHtzdGF0dXN9LGAgOiAnJztcbiAgICAgICAgbWVybWFpZERpYWdyYW0gKz0gYCR7dGFza05hbWV9IDoke3Rhc2tTdGF0dXN9ICR7dGFza0lkfSwgJHtzdGFydERhdGV9LCAke2VuZERhdGV9XFxuYDtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIG1lcm1haWREaWFncmFtO1xuICB9XG5cbn0pKGtpbnRvbmUuJFBMVUdJTl9JRCk7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///738\n")}},__webpack_exports__={};__webpack_modules__[738]()})();
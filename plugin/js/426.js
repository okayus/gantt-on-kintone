"use strict";(self.webpackChunkgantt_on_kintone=self.webpackChunkgantt_on_kintone||[]).push([[426],{7426:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   diagram: () => (/* binding */ diagram)\n/* harmony export */ });\n/* harmony import */ var _styles_b83b31c9_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(3626);\n/* harmony import */ var d3__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(8918);\n/* harmony import */ var dagre_d3_es_src_dagre_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(944);\n/* harmony import */ var dagre_d3_es_src_graphlib_index_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(697);\n/* harmony import */ var _mermaid_6dc72991_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(5950);\n/* harmony import */ var dayjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(4353);\n/* harmony import */ var _braintree_sanitize_url__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(6750);\n/* harmony import */ var dompurify__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(2838);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nlet edgeCount = 0;\nconst drawEdge = function(elem, path, relation, conf, diagObj) {\n  const getRelationType = function(type) {\n    switch (type) {\n      case diagObj.db.relationType.AGGREGATION:\n        return "aggregation";\n      case diagObj.db.relationType.EXTENSION:\n        return "extension";\n      case diagObj.db.relationType.COMPOSITION:\n        return "composition";\n      case diagObj.db.relationType.DEPENDENCY:\n        return "dependency";\n      case diagObj.db.relationType.LOLLIPOP:\n        return "lollipop";\n    }\n  };\n  path.points = path.points.filter((p) => !Number.isNaN(p.y));\n  const lineData = path.points;\n  const lineFunction = (0,d3__WEBPACK_IMPORTED_MODULE_0__/* .line */ .n8j)().x(function(d) {\n    return d.x;\n  }).y(function(d) {\n    return d.y;\n  }).curve(d3__WEBPACK_IMPORTED_MODULE_0__/* .curveBasis */ .qrM);\n  const svgPath = elem.append("path").attr("d", lineFunction(lineData)).attr("id", "edge" + edgeCount).attr("class", "relation");\n  let url = "";\n  if (conf.arrowMarkerAbsolute) {\n    url = window.location.protocol + "//" + window.location.host + window.location.pathname + window.location.search;\n    url = url.replace(/\\(/g, "\\\\(");\n    url = url.replace(/\\)/g, "\\\\)");\n  }\n  if (relation.relation.lineType == 1) {\n    svgPath.attr("class", "relation dashed-line");\n  }\n  if (relation.relation.lineType == 10) {\n    svgPath.attr("class", "relation dotted-line");\n  }\n  if (relation.relation.type1 !== "none") {\n    svgPath.attr(\n      "marker-start",\n      "url(" + url + "#" + getRelationType(relation.relation.type1) + "Start)"\n    );\n  }\n  if (relation.relation.type2 !== "none") {\n    svgPath.attr(\n      "marker-end",\n      "url(" + url + "#" + getRelationType(relation.relation.type2) + "End)"\n    );\n  }\n  let x, y;\n  const l = path.points.length;\n  let labelPosition = _mermaid_6dc72991_js__WEBPACK_IMPORTED_MODULE_6__.u.calcLabelPosition(path.points);\n  x = labelPosition.x;\n  y = labelPosition.y;\n  let p1_card_x, p1_card_y;\n  let p2_card_x, p2_card_y;\n  if (l % 2 !== 0 && l > 1) {\n    let cardinality_1_point = _mermaid_6dc72991_js__WEBPACK_IMPORTED_MODULE_6__.u.calcCardinalityPosition(\n      relation.relation.type1 !== "none",\n      path.points,\n      path.points[0]\n    );\n    let cardinality_2_point = _mermaid_6dc72991_js__WEBPACK_IMPORTED_MODULE_6__.u.calcCardinalityPosition(\n      relation.relation.type2 !== "none",\n      path.points,\n      path.points[l - 1]\n    );\n    _mermaid_6dc72991_js__WEBPACK_IMPORTED_MODULE_6__.l.debug("cardinality_1_point " + JSON.stringify(cardinality_1_point));\n    _mermaid_6dc72991_js__WEBPACK_IMPORTED_MODULE_6__.l.debug("cardinality_2_point " + JSON.stringify(cardinality_2_point));\n    p1_card_x = cardinality_1_point.x;\n    p1_card_y = cardinality_1_point.y;\n    p2_card_x = cardinality_2_point.x;\n    p2_card_y = cardinality_2_point.y;\n  }\n  if (relation.title !== void 0) {\n    const g = elem.append("g").attr("class", "classLabel");\n    const label = g.append("text").attr("class", "label").attr("x", x).attr("y", y).attr("fill", "red").attr("text-anchor", "middle").text(relation.title);\n    window.label = label;\n    const bounds = label.node().getBBox();\n    g.insert("rect", ":first-child").attr("class", "box").attr("x", bounds.x - conf.padding / 2).attr("y", bounds.y - conf.padding / 2).attr("width", bounds.width + conf.padding).attr("height", bounds.height + conf.padding);\n  }\n  _mermaid_6dc72991_js__WEBPACK_IMPORTED_MODULE_6__.l.info("Rendering relation " + JSON.stringify(relation));\n  if (relation.relationTitle1 !== void 0 && relation.relationTitle1 !== "none") {\n    const g = elem.append("g").attr("class", "cardinality");\n    g.append("text").attr("class", "type1").attr("x", p1_card_x).attr("y", p1_card_y).attr("fill", "black").attr("font-size", "6").text(relation.relationTitle1);\n  }\n  if (relation.relationTitle2 !== void 0 && relation.relationTitle2 !== "none") {\n    const g = elem.append("g").attr("class", "cardinality");\n    g.append("text").attr("class", "type2").attr("x", p2_card_x).attr("y", p2_card_y).attr("fill", "black").attr("font-size", "6").text(relation.relationTitle2);\n  }\n  edgeCount++;\n};\nconst drawClass = function(elem, classDef, conf, diagObj) {\n  _mermaid_6dc72991_js__WEBPACK_IMPORTED_MODULE_6__.l.debug("Rendering class ", classDef, conf);\n  const id = classDef.id;\n  const classInfo = {\n    id,\n    label: classDef.id,\n    width: 0,\n    height: 0\n  };\n  const g = elem.append("g").attr("id", diagObj.db.lookUpDomId(id)).attr("class", "classGroup");\n  let title;\n  if (classDef.link) {\n    title = g.append("svg:a").attr("xlink:href", classDef.link).attr("target", classDef.linkTarget).append("text").attr("y", conf.textHeight + conf.padding).attr("x", 0);\n  } else {\n    title = g.append("text").attr("y", conf.textHeight + conf.padding).attr("x", 0);\n  }\n  let isFirst = true;\n  classDef.annotations.forEach(function(member) {\n    const titleText2 = title.append("tspan").text("«" + member + "»");\n    if (!isFirst) {\n      titleText2.attr("dy", conf.textHeight);\n    }\n    isFirst = false;\n  });\n  let classTitleString = getClassTitleString(classDef);\n  const classTitle = title.append("tspan").text(classTitleString).attr("class", "title");\n  if (!isFirst) {\n    classTitle.attr("dy", conf.textHeight);\n  }\n  const titleHeight = title.node().getBBox().height;\n  let membersLine;\n  let membersBox;\n  let methodsLine;\n  if (classDef.members.length > 0) {\n    membersLine = g.append("line").attr("x1", 0).attr("y1", conf.padding + titleHeight + conf.dividerMargin / 2).attr("y2", conf.padding + titleHeight + conf.dividerMargin / 2);\n    const members = g.append("text").attr("x", conf.padding).attr("y", titleHeight + conf.dividerMargin + conf.textHeight).attr("fill", "white").attr("class", "classText");\n    isFirst = true;\n    classDef.members.forEach(function(member) {\n      addTspan(members, member, isFirst, conf);\n      isFirst = false;\n    });\n    membersBox = members.node().getBBox();\n  }\n  if (classDef.methods.length > 0) {\n    methodsLine = g.append("line").attr("x1", 0).attr("y1", conf.padding + titleHeight + conf.dividerMargin + membersBox.height).attr("y2", conf.padding + titleHeight + conf.dividerMargin + membersBox.height);\n    const methods = g.append("text").attr("x", conf.padding).attr("y", titleHeight + 2 * conf.dividerMargin + membersBox.height + conf.textHeight).attr("fill", "white").attr("class", "classText");\n    isFirst = true;\n    classDef.methods.forEach(function(method) {\n      addTspan(methods, method, isFirst, conf);\n      isFirst = false;\n    });\n  }\n  const classBox = g.node().getBBox();\n  var cssClassStr = " ";\n  if (classDef.cssClasses.length > 0) {\n    cssClassStr = cssClassStr + classDef.cssClasses.join(" ");\n  }\n  const rect = g.insert("rect", ":first-child").attr("x", 0).attr("y", 0).attr("width", classBox.width + 2 * conf.padding).attr("height", classBox.height + conf.padding + 0.5 * conf.dividerMargin).attr("class", cssClassStr);\n  const rectWidth = rect.node().getBBox().width;\n  title.node().childNodes.forEach(function(x) {\n    x.setAttribute("x", (rectWidth - x.getBBox().width) / 2);\n  });\n  if (classDef.tooltip) {\n    title.insert("title").text(classDef.tooltip);\n  }\n  if (membersLine) {\n    membersLine.attr("x2", rectWidth);\n  }\n  if (methodsLine) {\n    methodsLine.attr("x2", rectWidth);\n  }\n  classInfo.width = rectWidth;\n  classInfo.height = classBox.height + conf.padding + 0.5 * conf.dividerMargin;\n  return classInfo;\n};\nconst getClassTitleString = function(classDef) {\n  let classTitleString = classDef.id;\n  if (classDef.type) {\n    classTitleString += "<" + (0,_mermaid_6dc72991_js__WEBPACK_IMPORTED_MODULE_6__.x)(classDef.type) + ">";\n  }\n  return classTitleString;\n};\nconst drawNote = function(elem, note, conf, diagObj) {\n  _mermaid_6dc72991_js__WEBPACK_IMPORTED_MODULE_6__.l.debug("Rendering note ", note, conf);\n  const id = note.id;\n  const noteInfo = {\n    id,\n    text: note.text,\n    width: 0,\n    height: 0\n  };\n  const g = elem.append("g").attr("id", id).attr("class", "classGroup");\n  let text = g.append("text").attr("y", conf.textHeight + conf.padding).attr("x", 0);\n  const lines = JSON.parse(`"${note.text}"`).split("\\n");\n  lines.forEach(function(line2) {\n    _mermaid_6dc72991_js__WEBPACK_IMPORTED_MODULE_6__.l.debug(`Adding line: ${line2}`);\n    text.append("tspan").text(line2).attr("class", "title").attr("dy", conf.textHeight);\n  });\n  const noteBox = g.node().getBBox();\n  const rect = g.insert("rect", ":first-child").attr("x", 0).attr("y", 0).attr("width", noteBox.width + 2 * conf.padding).attr(\n    "height",\n    noteBox.height + lines.length * conf.textHeight + conf.padding + 0.5 * conf.dividerMargin\n  );\n  const rectWidth = rect.node().getBBox().width;\n  text.node().childNodes.forEach(function(x) {\n    x.setAttribute("x", (rectWidth - x.getBBox().width) / 2);\n  });\n  noteInfo.width = rectWidth;\n  noteInfo.height = noteBox.height + lines.length * conf.textHeight + conf.padding + 0.5 * conf.dividerMargin;\n  return noteInfo;\n};\nconst addTspan = function(textEl, member, isFirst, conf) {\n  const { displayText, cssStyle } = member.getDisplayDetails();\n  const tSpan = textEl.append("tspan").attr("x", conf.padding).text(displayText);\n  if (cssStyle !== "") {\n    tSpan.attr("style", member.cssStyle);\n  }\n  if (!isFirst) {\n    tSpan.attr("dy", conf.textHeight);\n  }\n};\nconst svgDraw = {\n  getClassTitleString,\n  drawClass,\n  drawEdge,\n  drawNote\n};\nlet idCache = {};\nconst padding = 20;\nconst getGraphId = function(label) {\n  const foundEntry = Object.entries(idCache).find((entry) => entry[1].label === label);\n  if (foundEntry) {\n    return foundEntry[0];\n  }\n};\nconst insertMarkers = function(elem) {\n  elem.append("defs").append("marker").attr("id", "extensionStart").attr("class", "extension").attr("refX", 0).attr("refY", 7).attr("markerWidth", 190).attr("markerHeight", 240).attr("orient", "auto").append("path").attr("d", "M 1,7 L18,13 V 1 Z");\n  elem.append("defs").append("marker").attr("id", "extensionEnd").attr("refX", 19).attr("refY", 7).attr("markerWidth", 20).attr("markerHeight", 28).attr("orient", "auto").append("path").attr("d", "M 1,1 V 13 L18,7 Z");\n  elem.append("defs").append("marker").attr("id", "compositionStart").attr("class", "extension").attr("refX", 0).attr("refY", 7).attr("markerWidth", 190).attr("markerHeight", 240).attr("orient", "auto").append("path").attr("d", "M 18,7 L9,13 L1,7 L9,1 Z");\n  elem.append("defs").append("marker").attr("id", "compositionEnd").attr("refX", 19).attr("refY", 7).attr("markerWidth", 20).attr("markerHeight", 28).attr("orient", "auto").append("path").attr("d", "M 18,7 L9,13 L1,7 L9,1 Z");\n  elem.append("defs").append("marker").attr("id", "aggregationStart").attr("class", "extension").attr("refX", 0).attr("refY", 7).attr("markerWidth", 190).attr("markerHeight", 240).attr("orient", "auto").append("path").attr("d", "M 18,7 L9,13 L1,7 L9,1 Z");\n  elem.append("defs").append("marker").attr("id", "aggregationEnd").attr("refX", 19).attr("refY", 7).attr("markerWidth", 20).attr("markerHeight", 28).attr("orient", "auto").append("path").attr("d", "M 18,7 L9,13 L1,7 L9,1 Z");\n  elem.append("defs").append("marker").attr("id", "dependencyStart").attr("class", "extension").attr("refX", 0).attr("refY", 7).attr("markerWidth", 190).attr("markerHeight", 240).attr("orient", "auto").append("path").attr("d", "M 5,7 L9,13 L1,7 L9,1 Z");\n  elem.append("defs").append("marker").attr("id", "dependencyEnd").attr("refX", 19).attr("refY", 7).attr("markerWidth", 20).attr("markerHeight", 28).attr("orient", "auto").append("path").attr("d", "M 18,7 L9,13 L14,7 L9,1 Z");\n};\nconst draw = function(text, id, _version, diagObj) {\n  const conf = (0,_mermaid_6dc72991_js__WEBPACK_IMPORTED_MODULE_6__.c)().class;\n  idCache = {};\n  _mermaid_6dc72991_js__WEBPACK_IMPORTED_MODULE_6__.l.info("Rendering diagram " + text);\n  const securityLevel = (0,_mermaid_6dc72991_js__WEBPACK_IMPORTED_MODULE_6__.c)().securityLevel;\n  let sandboxElement;\n  if (securityLevel === "sandbox") {\n    sandboxElement = (0,d3__WEBPACK_IMPORTED_MODULE_0__/* .select */ .Ltv)("#i" + id);\n  }\n  const root = securityLevel === "sandbox" ? (0,d3__WEBPACK_IMPORTED_MODULE_0__/* .select */ .Ltv)(sandboxElement.nodes()[0].contentDocument.body) : (0,d3__WEBPACK_IMPORTED_MODULE_0__/* .select */ .Ltv)("body");\n  const diagram2 = root.select(`[id=\'${id}\']`);\n  insertMarkers(diagram2);\n  const g = new dagre_d3_es_src_graphlib_index_js__WEBPACK_IMPORTED_MODULE_2__/* .Graph */ .T({\n    multigraph: true\n  });\n  g.setGraph({\n    isMultiGraph: true\n  });\n  g.setDefaultEdgeLabel(function() {\n    return {};\n  });\n  const classes = diagObj.db.getClasses();\n  const keys = Object.keys(classes);\n  for (const key of keys) {\n    const classDef = classes[key];\n    const node = svgDraw.drawClass(diagram2, classDef, conf, diagObj);\n    idCache[node.id] = node;\n    g.setNode(node.id, node);\n    _mermaid_6dc72991_js__WEBPACK_IMPORTED_MODULE_6__.l.info("Org height: " + node.height);\n  }\n  const relations = diagObj.db.getRelations();\n  relations.forEach(function(relation) {\n    _mermaid_6dc72991_js__WEBPACK_IMPORTED_MODULE_6__.l.info(\n      // cspell:ignore tjoho\n      "tjoho" + getGraphId(relation.id1) + getGraphId(relation.id2) + JSON.stringify(relation)\n    );\n    g.setEdge(\n      getGraphId(relation.id1),\n      getGraphId(relation.id2),\n      {\n        relation\n      },\n      relation.title || "DEFAULT"\n    );\n  });\n  const notes = diagObj.db.getNotes();\n  notes.forEach(function(note) {\n    _mermaid_6dc72991_js__WEBPACK_IMPORTED_MODULE_6__.l.debug(`Adding note: ${JSON.stringify(note)}`);\n    const node = svgDraw.drawNote(diagram2, note, conf, diagObj);\n    idCache[node.id] = node;\n    g.setNode(node.id, node);\n    if (note.class && note.class in classes) {\n      g.setEdge(\n        note.id,\n        getGraphId(note.class),\n        {\n          relation: {\n            id1: note.id,\n            id2: note.class,\n            relation: {\n              type1: "none",\n              type2: "none",\n              lineType: 10\n            }\n          }\n        },\n        "DEFAULT"\n      );\n    }\n  });\n  (0,dagre_d3_es_src_dagre_index_js__WEBPACK_IMPORTED_MODULE_1__/* .layout */ .Zp)(g);\n  g.nodes().forEach(function(v) {\n    if (v !== void 0 && g.node(v) !== void 0) {\n      _mermaid_6dc72991_js__WEBPACK_IMPORTED_MODULE_6__.l.debug("Node " + v + ": " + JSON.stringify(g.node(v)));\n      root.select("#" + (diagObj.db.lookUpDomId(v) || v)).attr(\n        "transform",\n        "translate(" + (g.node(v).x - g.node(v).width / 2) + "," + (g.node(v).y - g.node(v).height / 2) + " )"\n      );\n    }\n  });\n  g.edges().forEach(function(e) {\n    if (e !== void 0 && g.edge(e) !== void 0) {\n      _mermaid_6dc72991_js__WEBPACK_IMPORTED_MODULE_6__.l.debug("Edge " + e.v + " -> " + e.w + ": " + JSON.stringify(g.edge(e)));\n      svgDraw.drawEdge(diagram2, g.edge(e), g.edge(e).relation, conf, diagObj);\n    }\n  });\n  const svgBounds = diagram2.node().getBBox();\n  const width = svgBounds.width + padding * 2;\n  const height = svgBounds.height + padding * 2;\n  (0,_mermaid_6dc72991_js__WEBPACK_IMPORTED_MODULE_6__.i)(diagram2, height, width, conf.useMaxWidth);\n  const vBox = `${svgBounds.x - padding} ${svgBounds.y - padding} ${width} ${height}`;\n  _mermaid_6dc72991_js__WEBPACK_IMPORTED_MODULE_6__.l.debug(`viewBox ${vBox}`);\n  diagram2.attr("viewBox", vBox);\n};\nconst renderer = {\n  draw\n};\nconst diagram = {\n  parser: _styles_b83b31c9_js__WEBPACK_IMPORTED_MODULE_7__.p,\n  db: _styles_b83b31c9_js__WEBPACK_IMPORTED_MODULE_7__.d,\n  renderer,\n  styles: _styles_b83b31c9_js__WEBPACK_IMPORTED_MODULE_7__.s,\n  init: (cnf) => {\n    if (!cnf.class) {\n      cnf.class = {};\n    }\n    cnf.class.arrowMarkerAbsolute = cnf.arrowMarkerAbsolute;\n    _styles_b83b31c9_js__WEBPACK_IMPORTED_MODULE_7__.d.clear();\n  }\n};\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QTtBQUNBLElBQUksbURBQUc7QUFDUDtBQUNBO0FBQ0E7QUFDQSxJQUFJLG1EQUFHO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxJQUFJLG1EQUFHLHVCQUF1QixxQkFBcUI7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsRUFBRSxnRkFBTTtBQUNSO0FBQ0E7QUFDQSxNQUFNLG1EQUFHO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsTUFBTSxtREFBRztBQUNUO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsRUFBRSx1REFBZ0I7QUFDbEIsa0JBQWtCLHVCQUF1QixFQUFFLHVCQUF1QixFQUFFLE9BQU8sRUFBRSxPQUFPO0FBQ3BGLEVBQUUsbURBQUcsa0JBQWtCLEtBQUs7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSLElBQUk7QUFDSjtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSxrREFBRTtBQUNOO0FBQ0E7QUFHRSIsInNvdXJjZXMiOlsid2VicGFjazovL2dhbnR0LW9uLWtpbnRvbmUvLi9ub2RlX21vZHVsZXMvbWVybWFpZC9kaXN0L2NsYXNzRGlhZ3JhbS1mYjU0ZDJhMC5qcz8wZDE5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHAgYXMgcGFyc2VyLCBkIGFzIGRiLCBzIGFzIHN0eWxlcyB9IGZyb20gXCIuL3N0eWxlcy1iODNiMzFjOS5qc1wiO1xuaW1wb3J0IHsgbGluZSwgY3VydmVCYXNpcywgc2VsZWN0IH0gZnJvbSBcImQzXCI7XG5pbXBvcnQgeyBsYXlvdXQgfSBmcm9tIFwiZGFncmUtZDMtZXMvc3JjL2RhZ3JlL2luZGV4LmpzXCI7XG5pbXBvcnQgKiBhcyBncmFwaGxpYiBmcm9tIFwiZGFncmUtZDMtZXMvc3JjL2dyYXBobGliL2luZGV4LmpzXCI7XG5pbXBvcnQgeyB1IGFzIHV0aWxzLCBsIGFzIGxvZywgeCBhcyBwYXJzZUdlbmVyaWNUeXBlcywgYyBhcyBnZXRDb25maWcsIGkgYXMgY29uZmlndXJlU3ZnU2l6ZSB9IGZyb20gXCIuL21lcm1haWQtNmRjNzI5OTEuanNcIjtcbmltcG9ydCBcInRzLWRlZGVudFwiO1xuaW1wb3J0IFwiZGF5anNcIjtcbmltcG9ydCBcIkBicmFpbnRyZWUvc2FuaXRpemUtdXJsXCI7XG5pbXBvcnQgXCJkb21wdXJpZnlcIjtcbmltcG9ydCBcImtocm9tYVwiO1xuaW1wb3J0IFwibG9kYXNoLWVzL21lbW9pemUuanNcIjtcbmltcG9ydCBcImxvZGFzaC1lcy9tZXJnZS5qc1wiO1xuaW1wb3J0IFwic3R5bGlzXCI7XG5pbXBvcnQgXCJsb2Rhc2gtZXMvaXNFbXB0eS5qc1wiO1xubGV0IGVkZ2VDb3VudCA9IDA7XG5jb25zdCBkcmF3RWRnZSA9IGZ1bmN0aW9uKGVsZW0sIHBhdGgsIHJlbGF0aW9uLCBjb25mLCBkaWFnT2JqKSB7XG4gIGNvbnN0IGdldFJlbGF0aW9uVHlwZSA9IGZ1bmN0aW9uKHR5cGUpIHtcbiAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgIGNhc2UgZGlhZ09iai5kYi5yZWxhdGlvblR5cGUuQUdHUkVHQVRJT046XG4gICAgICAgIHJldHVybiBcImFnZ3JlZ2F0aW9uXCI7XG4gICAgICBjYXNlIGRpYWdPYmouZGIucmVsYXRpb25UeXBlLkVYVEVOU0lPTjpcbiAgICAgICAgcmV0dXJuIFwiZXh0ZW5zaW9uXCI7XG4gICAgICBjYXNlIGRpYWdPYmouZGIucmVsYXRpb25UeXBlLkNPTVBPU0lUSU9OOlxuICAgICAgICByZXR1cm4gXCJjb21wb3NpdGlvblwiO1xuICAgICAgY2FzZSBkaWFnT2JqLmRiLnJlbGF0aW9uVHlwZS5ERVBFTkRFTkNZOlxuICAgICAgICByZXR1cm4gXCJkZXBlbmRlbmN5XCI7XG4gICAgICBjYXNlIGRpYWdPYmouZGIucmVsYXRpb25UeXBlLkxPTExJUE9QOlxuICAgICAgICByZXR1cm4gXCJsb2xsaXBvcFwiO1xuICAgIH1cbiAgfTtcbiAgcGF0aC5wb2ludHMgPSBwYXRoLnBvaW50cy5maWx0ZXIoKHApID0+ICFOdW1iZXIuaXNOYU4ocC55KSk7XG4gIGNvbnN0IGxpbmVEYXRhID0gcGF0aC5wb2ludHM7XG4gIGNvbnN0IGxpbmVGdW5jdGlvbiA9IGxpbmUoKS54KGZ1bmN0aW9uKGQpIHtcbiAgICByZXR1cm4gZC54O1xuICB9KS55KGZ1bmN0aW9uKGQpIHtcbiAgICByZXR1cm4gZC55O1xuICB9KS5jdXJ2ZShjdXJ2ZUJhc2lzKTtcbiAgY29uc3Qgc3ZnUGF0aCA9IGVsZW0uYXBwZW5kKFwicGF0aFwiKS5hdHRyKFwiZFwiLCBsaW5lRnVuY3Rpb24obGluZURhdGEpKS5hdHRyKFwiaWRcIiwgXCJlZGdlXCIgKyBlZGdlQ291bnQpLmF0dHIoXCJjbGFzc1wiLCBcInJlbGF0aW9uXCIpO1xuICBsZXQgdXJsID0gXCJcIjtcbiAgaWYgKGNvbmYuYXJyb3dNYXJrZXJBYnNvbHV0ZSkge1xuICAgIHVybCA9IHdpbmRvdy5sb2NhdGlvbi5wcm90b2NvbCArIFwiLy9cIiArIHdpbmRvdy5sb2NhdGlvbi5ob3N0ICsgd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lICsgd2luZG93LmxvY2F0aW9uLnNlYXJjaDtcbiAgICB1cmwgPSB1cmwucmVwbGFjZSgvXFwoL2csIFwiXFxcXChcIik7XG4gICAgdXJsID0gdXJsLnJlcGxhY2UoL1xcKS9nLCBcIlxcXFwpXCIpO1xuICB9XG4gIGlmIChyZWxhdGlvbi5yZWxhdGlvbi5saW5lVHlwZSA9PSAxKSB7XG4gICAgc3ZnUGF0aC5hdHRyKFwiY2xhc3NcIiwgXCJyZWxhdGlvbiBkYXNoZWQtbGluZVwiKTtcbiAgfVxuICBpZiAocmVsYXRpb24ucmVsYXRpb24ubGluZVR5cGUgPT0gMTApIHtcbiAgICBzdmdQYXRoLmF0dHIoXCJjbGFzc1wiLCBcInJlbGF0aW9uIGRvdHRlZC1saW5lXCIpO1xuICB9XG4gIGlmIChyZWxhdGlvbi5yZWxhdGlvbi50eXBlMSAhPT0gXCJub25lXCIpIHtcbiAgICBzdmdQYXRoLmF0dHIoXG4gICAgICBcIm1hcmtlci1zdGFydFwiLFxuICAgICAgXCJ1cmwoXCIgKyB1cmwgKyBcIiNcIiArIGdldFJlbGF0aW9uVHlwZShyZWxhdGlvbi5yZWxhdGlvbi50eXBlMSkgKyBcIlN0YXJ0KVwiXG4gICAgKTtcbiAgfVxuICBpZiAocmVsYXRpb24ucmVsYXRpb24udHlwZTIgIT09IFwibm9uZVwiKSB7XG4gICAgc3ZnUGF0aC5hdHRyKFxuICAgICAgXCJtYXJrZXItZW5kXCIsXG4gICAgICBcInVybChcIiArIHVybCArIFwiI1wiICsgZ2V0UmVsYXRpb25UeXBlKHJlbGF0aW9uLnJlbGF0aW9uLnR5cGUyKSArIFwiRW5kKVwiXG4gICAgKTtcbiAgfVxuICBsZXQgeCwgeTtcbiAgY29uc3QgbCA9IHBhdGgucG9pbnRzLmxlbmd0aDtcbiAgbGV0IGxhYmVsUG9zaXRpb24gPSB1dGlscy5jYWxjTGFiZWxQb3NpdGlvbihwYXRoLnBvaW50cyk7XG4gIHggPSBsYWJlbFBvc2l0aW9uLng7XG4gIHkgPSBsYWJlbFBvc2l0aW9uLnk7XG4gIGxldCBwMV9jYXJkX3gsIHAxX2NhcmRfeTtcbiAgbGV0IHAyX2NhcmRfeCwgcDJfY2FyZF95O1xuICBpZiAobCAlIDIgIT09IDAgJiYgbCA+IDEpIHtcbiAgICBsZXQgY2FyZGluYWxpdHlfMV9wb2ludCA9IHV0aWxzLmNhbGNDYXJkaW5hbGl0eVBvc2l0aW9uKFxuICAgICAgcmVsYXRpb24ucmVsYXRpb24udHlwZTEgIT09IFwibm9uZVwiLFxuICAgICAgcGF0aC5wb2ludHMsXG4gICAgICBwYXRoLnBvaW50c1swXVxuICAgICk7XG4gICAgbGV0IGNhcmRpbmFsaXR5XzJfcG9pbnQgPSB1dGlscy5jYWxjQ2FyZGluYWxpdHlQb3NpdGlvbihcbiAgICAgIHJlbGF0aW9uLnJlbGF0aW9uLnR5cGUyICE9PSBcIm5vbmVcIixcbiAgICAgIHBhdGgucG9pbnRzLFxuICAgICAgcGF0aC5wb2ludHNbbCAtIDFdXG4gICAgKTtcbiAgICBsb2cuZGVidWcoXCJjYXJkaW5hbGl0eV8xX3BvaW50IFwiICsgSlNPTi5zdHJpbmdpZnkoY2FyZGluYWxpdHlfMV9wb2ludCkpO1xuICAgIGxvZy5kZWJ1ZyhcImNhcmRpbmFsaXR5XzJfcG9pbnQgXCIgKyBKU09OLnN0cmluZ2lmeShjYXJkaW5hbGl0eV8yX3BvaW50KSk7XG4gICAgcDFfY2FyZF94ID0gY2FyZGluYWxpdHlfMV9wb2ludC54O1xuICAgIHAxX2NhcmRfeSA9IGNhcmRpbmFsaXR5XzFfcG9pbnQueTtcbiAgICBwMl9jYXJkX3ggPSBjYXJkaW5hbGl0eV8yX3BvaW50Lng7XG4gICAgcDJfY2FyZF95ID0gY2FyZGluYWxpdHlfMl9wb2ludC55O1xuICB9XG4gIGlmIChyZWxhdGlvbi50aXRsZSAhPT0gdm9pZCAwKSB7XG4gICAgY29uc3QgZyA9IGVsZW0uYXBwZW5kKFwiZ1wiKS5hdHRyKFwiY2xhc3NcIiwgXCJjbGFzc0xhYmVsXCIpO1xuICAgIGNvbnN0IGxhYmVsID0gZy5hcHBlbmQoXCJ0ZXh0XCIpLmF0dHIoXCJjbGFzc1wiLCBcImxhYmVsXCIpLmF0dHIoXCJ4XCIsIHgpLmF0dHIoXCJ5XCIsIHkpLmF0dHIoXCJmaWxsXCIsIFwicmVkXCIpLmF0dHIoXCJ0ZXh0LWFuY2hvclwiLCBcIm1pZGRsZVwiKS50ZXh0KHJlbGF0aW9uLnRpdGxlKTtcbiAgICB3aW5kb3cubGFiZWwgPSBsYWJlbDtcbiAgICBjb25zdCBib3VuZHMgPSBsYWJlbC5ub2RlKCkuZ2V0QkJveCgpO1xuICAgIGcuaW5zZXJ0KFwicmVjdFwiLCBcIjpmaXJzdC1jaGlsZFwiKS5hdHRyKFwiY2xhc3NcIiwgXCJib3hcIikuYXR0cihcInhcIiwgYm91bmRzLnggLSBjb25mLnBhZGRpbmcgLyAyKS5hdHRyKFwieVwiLCBib3VuZHMueSAtIGNvbmYucGFkZGluZyAvIDIpLmF0dHIoXCJ3aWR0aFwiLCBib3VuZHMud2lkdGggKyBjb25mLnBhZGRpbmcpLmF0dHIoXCJoZWlnaHRcIiwgYm91bmRzLmhlaWdodCArIGNvbmYucGFkZGluZyk7XG4gIH1cbiAgbG9nLmluZm8oXCJSZW5kZXJpbmcgcmVsYXRpb24gXCIgKyBKU09OLnN0cmluZ2lmeShyZWxhdGlvbikpO1xuICBpZiAocmVsYXRpb24ucmVsYXRpb25UaXRsZTEgIT09IHZvaWQgMCAmJiByZWxhdGlvbi5yZWxhdGlvblRpdGxlMSAhPT0gXCJub25lXCIpIHtcbiAgICBjb25zdCBnID0gZWxlbS5hcHBlbmQoXCJnXCIpLmF0dHIoXCJjbGFzc1wiLCBcImNhcmRpbmFsaXR5XCIpO1xuICAgIGcuYXBwZW5kKFwidGV4dFwiKS5hdHRyKFwiY2xhc3NcIiwgXCJ0eXBlMVwiKS5hdHRyKFwieFwiLCBwMV9jYXJkX3gpLmF0dHIoXCJ5XCIsIHAxX2NhcmRfeSkuYXR0cihcImZpbGxcIiwgXCJibGFja1wiKS5hdHRyKFwiZm9udC1zaXplXCIsIFwiNlwiKS50ZXh0KHJlbGF0aW9uLnJlbGF0aW9uVGl0bGUxKTtcbiAgfVxuICBpZiAocmVsYXRpb24ucmVsYXRpb25UaXRsZTIgIT09IHZvaWQgMCAmJiByZWxhdGlvbi5yZWxhdGlvblRpdGxlMiAhPT0gXCJub25lXCIpIHtcbiAgICBjb25zdCBnID0gZWxlbS5hcHBlbmQoXCJnXCIpLmF0dHIoXCJjbGFzc1wiLCBcImNhcmRpbmFsaXR5XCIpO1xuICAgIGcuYXBwZW5kKFwidGV4dFwiKS5hdHRyKFwiY2xhc3NcIiwgXCJ0eXBlMlwiKS5hdHRyKFwieFwiLCBwMl9jYXJkX3gpLmF0dHIoXCJ5XCIsIHAyX2NhcmRfeSkuYXR0cihcImZpbGxcIiwgXCJibGFja1wiKS5hdHRyKFwiZm9udC1zaXplXCIsIFwiNlwiKS50ZXh0KHJlbGF0aW9uLnJlbGF0aW9uVGl0bGUyKTtcbiAgfVxuICBlZGdlQ291bnQrKztcbn07XG5jb25zdCBkcmF3Q2xhc3MgPSBmdW5jdGlvbihlbGVtLCBjbGFzc0RlZiwgY29uZiwgZGlhZ09iaikge1xuICBsb2cuZGVidWcoXCJSZW5kZXJpbmcgY2xhc3MgXCIsIGNsYXNzRGVmLCBjb25mKTtcbiAgY29uc3QgaWQgPSBjbGFzc0RlZi5pZDtcbiAgY29uc3QgY2xhc3NJbmZvID0ge1xuICAgIGlkLFxuICAgIGxhYmVsOiBjbGFzc0RlZi5pZCxcbiAgICB3aWR0aDogMCxcbiAgICBoZWlnaHQ6IDBcbiAgfTtcbiAgY29uc3QgZyA9IGVsZW0uYXBwZW5kKFwiZ1wiKS5hdHRyKFwiaWRcIiwgZGlhZ09iai5kYi5sb29rVXBEb21JZChpZCkpLmF0dHIoXCJjbGFzc1wiLCBcImNsYXNzR3JvdXBcIik7XG4gIGxldCB0aXRsZTtcbiAgaWYgKGNsYXNzRGVmLmxpbmspIHtcbiAgICB0aXRsZSA9IGcuYXBwZW5kKFwic3ZnOmFcIikuYXR0cihcInhsaW5rOmhyZWZcIiwgY2xhc3NEZWYubGluaykuYXR0cihcInRhcmdldFwiLCBjbGFzc0RlZi5saW5rVGFyZ2V0KS5hcHBlbmQoXCJ0ZXh0XCIpLmF0dHIoXCJ5XCIsIGNvbmYudGV4dEhlaWdodCArIGNvbmYucGFkZGluZykuYXR0cihcInhcIiwgMCk7XG4gIH0gZWxzZSB7XG4gICAgdGl0bGUgPSBnLmFwcGVuZChcInRleHRcIikuYXR0cihcInlcIiwgY29uZi50ZXh0SGVpZ2h0ICsgY29uZi5wYWRkaW5nKS5hdHRyKFwieFwiLCAwKTtcbiAgfVxuICBsZXQgaXNGaXJzdCA9IHRydWU7XG4gIGNsYXNzRGVmLmFubm90YXRpb25zLmZvckVhY2goZnVuY3Rpb24obWVtYmVyKSB7XG4gICAgY29uc3QgdGl0bGVUZXh0MiA9IHRpdGxlLmFwcGVuZChcInRzcGFuXCIpLnRleHQoXCLCq1wiICsgbWVtYmVyICsgXCLCu1wiKTtcbiAgICBpZiAoIWlzRmlyc3QpIHtcbiAgICAgIHRpdGxlVGV4dDIuYXR0cihcImR5XCIsIGNvbmYudGV4dEhlaWdodCk7XG4gICAgfVxuICAgIGlzRmlyc3QgPSBmYWxzZTtcbiAgfSk7XG4gIGxldCBjbGFzc1RpdGxlU3RyaW5nID0gZ2V0Q2xhc3NUaXRsZVN0cmluZyhjbGFzc0RlZik7XG4gIGNvbnN0IGNsYXNzVGl0bGUgPSB0aXRsZS5hcHBlbmQoXCJ0c3BhblwiKS50ZXh0KGNsYXNzVGl0bGVTdHJpbmcpLmF0dHIoXCJjbGFzc1wiLCBcInRpdGxlXCIpO1xuICBpZiAoIWlzRmlyc3QpIHtcbiAgICBjbGFzc1RpdGxlLmF0dHIoXCJkeVwiLCBjb25mLnRleHRIZWlnaHQpO1xuICB9XG4gIGNvbnN0IHRpdGxlSGVpZ2h0ID0gdGl0bGUubm9kZSgpLmdldEJCb3goKS5oZWlnaHQ7XG4gIGxldCBtZW1iZXJzTGluZTtcbiAgbGV0IG1lbWJlcnNCb3g7XG4gIGxldCBtZXRob2RzTGluZTtcbiAgaWYgKGNsYXNzRGVmLm1lbWJlcnMubGVuZ3RoID4gMCkge1xuICAgIG1lbWJlcnNMaW5lID0gZy5hcHBlbmQoXCJsaW5lXCIpLmF0dHIoXCJ4MVwiLCAwKS5hdHRyKFwieTFcIiwgY29uZi5wYWRkaW5nICsgdGl0bGVIZWlnaHQgKyBjb25mLmRpdmlkZXJNYXJnaW4gLyAyKS5hdHRyKFwieTJcIiwgY29uZi5wYWRkaW5nICsgdGl0bGVIZWlnaHQgKyBjb25mLmRpdmlkZXJNYXJnaW4gLyAyKTtcbiAgICBjb25zdCBtZW1iZXJzID0gZy5hcHBlbmQoXCJ0ZXh0XCIpLmF0dHIoXCJ4XCIsIGNvbmYucGFkZGluZykuYXR0cihcInlcIiwgdGl0bGVIZWlnaHQgKyBjb25mLmRpdmlkZXJNYXJnaW4gKyBjb25mLnRleHRIZWlnaHQpLmF0dHIoXCJmaWxsXCIsIFwid2hpdGVcIikuYXR0cihcImNsYXNzXCIsIFwiY2xhc3NUZXh0XCIpO1xuICAgIGlzRmlyc3QgPSB0cnVlO1xuICAgIGNsYXNzRGVmLm1lbWJlcnMuZm9yRWFjaChmdW5jdGlvbihtZW1iZXIpIHtcbiAgICAgIGFkZFRzcGFuKG1lbWJlcnMsIG1lbWJlciwgaXNGaXJzdCwgY29uZik7XG4gICAgICBpc0ZpcnN0ID0gZmFsc2U7XG4gICAgfSk7XG4gICAgbWVtYmVyc0JveCA9IG1lbWJlcnMubm9kZSgpLmdldEJCb3goKTtcbiAgfVxuICBpZiAoY2xhc3NEZWYubWV0aG9kcy5sZW5ndGggPiAwKSB7XG4gICAgbWV0aG9kc0xpbmUgPSBnLmFwcGVuZChcImxpbmVcIikuYXR0cihcIngxXCIsIDApLmF0dHIoXCJ5MVwiLCBjb25mLnBhZGRpbmcgKyB0aXRsZUhlaWdodCArIGNvbmYuZGl2aWRlck1hcmdpbiArIG1lbWJlcnNCb3guaGVpZ2h0KS5hdHRyKFwieTJcIiwgY29uZi5wYWRkaW5nICsgdGl0bGVIZWlnaHQgKyBjb25mLmRpdmlkZXJNYXJnaW4gKyBtZW1iZXJzQm94LmhlaWdodCk7XG4gICAgY29uc3QgbWV0aG9kcyA9IGcuYXBwZW5kKFwidGV4dFwiKS5hdHRyKFwieFwiLCBjb25mLnBhZGRpbmcpLmF0dHIoXCJ5XCIsIHRpdGxlSGVpZ2h0ICsgMiAqIGNvbmYuZGl2aWRlck1hcmdpbiArIG1lbWJlcnNCb3guaGVpZ2h0ICsgY29uZi50ZXh0SGVpZ2h0KS5hdHRyKFwiZmlsbFwiLCBcIndoaXRlXCIpLmF0dHIoXCJjbGFzc1wiLCBcImNsYXNzVGV4dFwiKTtcbiAgICBpc0ZpcnN0ID0gdHJ1ZTtcbiAgICBjbGFzc0RlZi5tZXRob2RzLmZvckVhY2goZnVuY3Rpb24obWV0aG9kKSB7XG4gICAgICBhZGRUc3BhbihtZXRob2RzLCBtZXRob2QsIGlzRmlyc3QsIGNvbmYpO1xuICAgICAgaXNGaXJzdCA9IGZhbHNlO1xuICAgIH0pO1xuICB9XG4gIGNvbnN0IGNsYXNzQm94ID0gZy5ub2RlKCkuZ2V0QkJveCgpO1xuICB2YXIgY3NzQ2xhc3NTdHIgPSBcIiBcIjtcbiAgaWYgKGNsYXNzRGVmLmNzc0NsYXNzZXMubGVuZ3RoID4gMCkge1xuICAgIGNzc0NsYXNzU3RyID0gY3NzQ2xhc3NTdHIgKyBjbGFzc0RlZi5jc3NDbGFzc2VzLmpvaW4oXCIgXCIpO1xuICB9XG4gIGNvbnN0IHJlY3QgPSBnLmluc2VydChcInJlY3RcIiwgXCI6Zmlyc3QtY2hpbGRcIikuYXR0cihcInhcIiwgMCkuYXR0cihcInlcIiwgMCkuYXR0cihcIndpZHRoXCIsIGNsYXNzQm94LndpZHRoICsgMiAqIGNvbmYucGFkZGluZykuYXR0cihcImhlaWdodFwiLCBjbGFzc0JveC5oZWlnaHQgKyBjb25mLnBhZGRpbmcgKyAwLjUgKiBjb25mLmRpdmlkZXJNYXJnaW4pLmF0dHIoXCJjbGFzc1wiLCBjc3NDbGFzc1N0cik7XG4gIGNvbnN0IHJlY3RXaWR0aCA9IHJlY3Qubm9kZSgpLmdldEJCb3goKS53aWR0aDtcbiAgdGl0bGUubm9kZSgpLmNoaWxkTm9kZXMuZm9yRWFjaChmdW5jdGlvbih4KSB7XG4gICAgeC5zZXRBdHRyaWJ1dGUoXCJ4XCIsIChyZWN0V2lkdGggLSB4LmdldEJCb3goKS53aWR0aCkgLyAyKTtcbiAgfSk7XG4gIGlmIChjbGFzc0RlZi50b29sdGlwKSB7XG4gICAgdGl0bGUuaW5zZXJ0KFwidGl0bGVcIikudGV4dChjbGFzc0RlZi50b29sdGlwKTtcbiAgfVxuICBpZiAobWVtYmVyc0xpbmUpIHtcbiAgICBtZW1iZXJzTGluZS5hdHRyKFwieDJcIiwgcmVjdFdpZHRoKTtcbiAgfVxuICBpZiAobWV0aG9kc0xpbmUpIHtcbiAgICBtZXRob2RzTGluZS5hdHRyKFwieDJcIiwgcmVjdFdpZHRoKTtcbiAgfVxuICBjbGFzc0luZm8ud2lkdGggPSByZWN0V2lkdGg7XG4gIGNsYXNzSW5mby5oZWlnaHQgPSBjbGFzc0JveC5oZWlnaHQgKyBjb25mLnBhZGRpbmcgKyAwLjUgKiBjb25mLmRpdmlkZXJNYXJnaW47XG4gIHJldHVybiBjbGFzc0luZm87XG59O1xuY29uc3QgZ2V0Q2xhc3NUaXRsZVN0cmluZyA9IGZ1bmN0aW9uKGNsYXNzRGVmKSB7XG4gIGxldCBjbGFzc1RpdGxlU3RyaW5nID0gY2xhc3NEZWYuaWQ7XG4gIGlmIChjbGFzc0RlZi50eXBlKSB7XG4gICAgY2xhc3NUaXRsZVN0cmluZyArPSBcIjxcIiArIHBhcnNlR2VuZXJpY1R5cGVzKGNsYXNzRGVmLnR5cGUpICsgXCI+XCI7XG4gIH1cbiAgcmV0dXJuIGNsYXNzVGl0bGVTdHJpbmc7XG59O1xuY29uc3QgZHJhd05vdGUgPSBmdW5jdGlvbihlbGVtLCBub3RlLCBjb25mLCBkaWFnT2JqKSB7XG4gIGxvZy5kZWJ1ZyhcIlJlbmRlcmluZyBub3RlIFwiLCBub3RlLCBjb25mKTtcbiAgY29uc3QgaWQgPSBub3RlLmlkO1xuICBjb25zdCBub3RlSW5mbyA9IHtcbiAgICBpZCxcbiAgICB0ZXh0OiBub3RlLnRleHQsXG4gICAgd2lkdGg6IDAsXG4gICAgaGVpZ2h0OiAwXG4gIH07XG4gIGNvbnN0IGcgPSBlbGVtLmFwcGVuZChcImdcIikuYXR0cihcImlkXCIsIGlkKS5hdHRyKFwiY2xhc3NcIiwgXCJjbGFzc0dyb3VwXCIpO1xuICBsZXQgdGV4dCA9IGcuYXBwZW5kKFwidGV4dFwiKS5hdHRyKFwieVwiLCBjb25mLnRleHRIZWlnaHQgKyBjb25mLnBhZGRpbmcpLmF0dHIoXCJ4XCIsIDApO1xuICBjb25zdCBsaW5lcyA9IEpTT04ucGFyc2UoYFwiJHtub3RlLnRleHR9XCJgKS5zcGxpdChcIlxcblwiKTtcbiAgbGluZXMuZm9yRWFjaChmdW5jdGlvbihsaW5lMikge1xuICAgIGxvZy5kZWJ1ZyhgQWRkaW5nIGxpbmU6ICR7bGluZTJ9YCk7XG4gICAgdGV4dC5hcHBlbmQoXCJ0c3BhblwiKS50ZXh0KGxpbmUyKS5hdHRyKFwiY2xhc3NcIiwgXCJ0aXRsZVwiKS5hdHRyKFwiZHlcIiwgY29uZi50ZXh0SGVpZ2h0KTtcbiAgfSk7XG4gIGNvbnN0IG5vdGVCb3ggPSBnLm5vZGUoKS5nZXRCQm94KCk7XG4gIGNvbnN0IHJlY3QgPSBnLmluc2VydChcInJlY3RcIiwgXCI6Zmlyc3QtY2hpbGRcIikuYXR0cihcInhcIiwgMCkuYXR0cihcInlcIiwgMCkuYXR0cihcIndpZHRoXCIsIG5vdGVCb3gud2lkdGggKyAyICogY29uZi5wYWRkaW5nKS5hdHRyKFxuICAgIFwiaGVpZ2h0XCIsXG4gICAgbm90ZUJveC5oZWlnaHQgKyBsaW5lcy5sZW5ndGggKiBjb25mLnRleHRIZWlnaHQgKyBjb25mLnBhZGRpbmcgKyAwLjUgKiBjb25mLmRpdmlkZXJNYXJnaW5cbiAgKTtcbiAgY29uc3QgcmVjdFdpZHRoID0gcmVjdC5ub2RlKCkuZ2V0QkJveCgpLndpZHRoO1xuICB0ZXh0Lm5vZGUoKS5jaGlsZE5vZGVzLmZvckVhY2goZnVuY3Rpb24oeCkge1xuICAgIHguc2V0QXR0cmlidXRlKFwieFwiLCAocmVjdFdpZHRoIC0geC5nZXRCQm94KCkud2lkdGgpIC8gMik7XG4gIH0pO1xuICBub3RlSW5mby53aWR0aCA9IHJlY3RXaWR0aDtcbiAgbm90ZUluZm8uaGVpZ2h0ID0gbm90ZUJveC5oZWlnaHQgKyBsaW5lcy5sZW5ndGggKiBjb25mLnRleHRIZWlnaHQgKyBjb25mLnBhZGRpbmcgKyAwLjUgKiBjb25mLmRpdmlkZXJNYXJnaW47XG4gIHJldHVybiBub3RlSW5mbztcbn07XG5jb25zdCBhZGRUc3BhbiA9IGZ1bmN0aW9uKHRleHRFbCwgbWVtYmVyLCBpc0ZpcnN0LCBjb25mKSB7XG4gIGNvbnN0IHsgZGlzcGxheVRleHQsIGNzc1N0eWxlIH0gPSBtZW1iZXIuZ2V0RGlzcGxheURldGFpbHMoKTtcbiAgY29uc3QgdFNwYW4gPSB0ZXh0RWwuYXBwZW5kKFwidHNwYW5cIikuYXR0cihcInhcIiwgY29uZi5wYWRkaW5nKS50ZXh0KGRpc3BsYXlUZXh0KTtcbiAgaWYgKGNzc1N0eWxlICE9PSBcIlwiKSB7XG4gICAgdFNwYW4uYXR0cihcInN0eWxlXCIsIG1lbWJlci5jc3NTdHlsZSk7XG4gIH1cbiAgaWYgKCFpc0ZpcnN0KSB7XG4gICAgdFNwYW4uYXR0cihcImR5XCIsIGNvbmYudGV4dEhlaWdodCk7XG4gIH1cbn07XG5jb25zdCBzdmdEcmF3ID0ge1xuICBnZXRDbGFzc1RpdGxlU3RyaW5nLFxuICBkcmF3Q2xhc3MsXG4gIGRyYXdFZGdlLFxuICBkcmF3Tm90ZVxufTtcbmxldCBpZENhY2hlID0ge307XG5jb25zdCBwYWRkaW5nID0gMjA7XG5jb25zdCBnZXRHcmFwaElkID0gZnVuY3Rpb24obGFiZWwpIHtcbiAgY29uc3QgZm91bmRFbnRyeSA9IE9iamVjdC5lbnRyaWVzKGlkQ2FjaGUpLmZpbmQoKGVudHJ5KSA9PiBlbnRyeVsxXS5sYWJlbCA9PT0gbGFiZWwpO1xuICBpZiAoZm91bmRFbnRyeSkge1xuICAgIHJldHVybiBmb3VuZEVudHJ5WzBdO1xuICB9XG59O1xuY29uc3QgaW5zZXJ0TWFya2VycyA9IGZ1bmN0aW9uKGVsZW0pIHtcbiAgZWxlbS5hcHBlbmQoXCJkZWZzXCIpLmFwcGVuZChcIm1hcmtlclwiKS5hdHRyKFwiaWRcIiwgXCJleHRlbnNpb25TdGFydFwiKS5hdHRyKFwiY2xhc3NcIiwgXCJleHRlbnNpb25cIikuYXR0cihcInJlZlhcIiwgMCkuYXR0cihcInJlZllcIiwgNykuYXR0cihcIm1hcmtlcldpZHRoXCIsIDE5MCkuYXR0cihcIm1hcmtlckhlaWdodFwiLCAyNDApLmF0dHIoXCJvcmllbnRcIiwgXCJhdXRvXCIpLmFwcGVuZChcInBhdGhcIikuYXR0cihcImRcIiwgXCJNIDEsNyBMMTgsMTMgViAxIFpcIik7XG4gIGVsZW0uYXBwZW5kKFwiZGVmc1wiKS5hcHBlbmQoXCJtYXJrZXJcIikuYXR0cihcImlkXCIsIFwiZXh0ZW5zaW9uRW5kXCIpLmF0dHIoXCJyZWZYXCIsIDE5KS5hdHRyKFwicmVmWVwiLCA3KS5hdHRyKFwibWFya2VyV2lkdGhcIiwgMjApLmF0dHIoXCJtYXJrZXJIZWlnaHRcIiwgMjgpLmF0dHIoXCJvcmllbnRcIiwgXCJhdXRvXCIpLmFwcGVuZChcInBhdGhcIikuYXR0cihcImRcIiwgXCJNIDEsMSBWIDEzIEwxOCw3IFpcIik7XG4gIGVsZW0uYXBwZW5kKFwiZGVmc1wiKS5hcHBlbmQoXCJtYXJrZXJcIikuYXR0cihcImlkXCIsIFwiY29tcG9zaXRpb25TdGFydFwiKS5hdHRyKFwiY2xhc3NcIiwgXCJleHRlbnNpb25cIikuYXR0cihcInJlZlhcIiwgMCkuYXR0cihcInJlZllcIiwgNykuYXR0cihcIm1hcmtlcldpZHRoXCIsIDE5MCkuYXR0cihcIm1hcmtlckhlaWdodFwiLCAyNDApLmF0dHIoXCJvcmllbnRcIiwgXCJhdXRvXCIpLmFwcGVuZChcInBhdGhcIikuYXR0cihcImRcIiwgXCJNIDE4LDcgTDksMTMgTDEsNyBMOSwxIFpcIik7XG4gIGVsZW0uYXBwZW5kKFwiZGVmc1wiKS5hcHBlbmQoXCJtYXJrZXJcIikuYXR0cihcImlkXCIsIFwiY29tcG9zaXRpb25FbmRcIikuYXR0cihcInJlZlhcIiwgMTkpLmF0dHIoXCJyZWZZXCIsIDcpLmF0dHIoXCJtYXJrZXJXaWR0aFwiLCAyMCkuYXR0cihcIm1hcmtlckhlaWdodFwiLCAyOCkuYXR0cihcIm9yaWVudFwiLCBcImF1dG9cIikuYXBwZW5kKFwicGF0aFwiKS5hdHRyKFwiZFwiLCBcIk0gMTgsNyBMOSwxMyBMMSw3IEw5LDEgWlwiKTtcbiAgZWxlbS5hcHBlbmQoXCJkZWZzXCIpLmFwcGVuZChcIm1hcmtlclwiKS5hdHRyKFwiaWRcIiwgXCJhZ2dyZWdhdGlvblN0YXJ0XCIpLmF0dHIoXCJjbGFzc1wiLCBcImV4dGVuc2lvblwiKS5hdHRyKFwicmVmWFwiLCAwKS5hdHRyKFwicmVmWVwiLCA3KS5hdHRyKFwibWFya2VyV2lkdGhcIiwgMTkwKS5hdHRyKFwibWFya2VySGVpZ2h0XCIsIDI0MCkuYXR0cihcIm9yaWVudFwiLCBcImF1dG9cIikuYXBwZW5kKFwicGF0aFwiKS5hdHRyKFwiZFwiLCBcIk0gMTgsNyBMOSwxMyBMMSw3IEw5LDEgWlwiKTtcbiAgZWxlbS5hcHBlbmQoXCJkZWZzXCIpLmFwcGVuZChcIm1hcmtlclwiKS5hdHRyKFwiaWRcIiwgXCJhZ2dyZWdhdGlvbkVuZFwiKS5hdHRyKFwicmVmWFwiLCAxOSkuYXR0cihcInJlZllcIiwgNykuYXR0cihcIm1hcmtlcldpZHRoXCIsIDIwKS5hdHRyKFwibWFya2VySGVpZ2h0XCIsIDI4KS5hdHRyKFwib3JpZW50XCIsIFwiYXV0b1wiKS5hcHBlbmQoXCJwYXRoXCIpLmF0dHIoXCJkXCIsIFwiTSAxOCw3IEw5LDEzIEwxLDcgTDksMSBaXCIpO1xuICBlbGVtLmFwcGVuZChcImRlZnNcIikuYXBwZW5kKFwibWFya2VyXCIpLmF0dHIoXCJpZFwiLCBcImRlcGVuZGVuY3lTdGFydFwiKS5hdHRyKFwiY2xhc3NcIiwgXCJleHRlbnNpb25cIikuYXR0cihcInJlZlhcIiwgMCkuYXR0cihcInJlZllcIiwgNykuYXR0cihcIm1hcmtlcldpZHRoXCIsIDE5MCkuYXR0cihcIm1hcmtlckhlaWdodFwiLCAyNDApLmF0dHIoXCJvcmllbnRcIiwgXCJhdXRvXCIpLmFwcGVuZChcInBhdGhcIikuYXR0cihcImRcIiwgXCJNIDUsNyBMOSwxMyBMMSw3IEw5LDEgWlwiKTtcbiAgZWxlbS5hcHBlbmQoXCJkZWZzXCIpLmFwcGVuZChcIm1hcmtlclwiKS5hdHRyKFwiaWRcIiwgXCJkZXBlbmRlbmN5RW5kXCIpLmF0dHIoXCJyZWZYXCIsIDE5KS5hdHRyKFwicmVmWVwiLCA3KS5hdHRyKFwibWFya2VyV2lkdGhcIiwgMjApLmF0dHIoXCJtYXJrZXJIZWlnaHRcIiwgMjgpLmF0dHIoXCJvcmllbnRcIiwgXCJhdXRvXCIpLmFwcGVuZChcInBhdGhcIikuYXR0cihcImRcIiwgXCJNIDE4LDcgTDksMTMgTDE0LDcgTDksMSBaXCIpO1xufTtcbmNvbnN0IGRyYXcgPSBmdW5jdGlvbih0ZXh0LCBpZCwgX3ZlcnNpb24sIGRpYWdPYmopIHtcbiAgY29uc3QgY29uZiA9IGdldENvbmZpZygpLmNsYXNzO1xuICBpZENhY2hlID0ge307XG4gIGxvZy5pbmZvKFwiUmVuZGVyaW5nIGRpYWdyYW0gXCIgKyB0ZXh0KTtcbiAgY29uc3Qgc2VjdXJpdHlMZXZlbCA9IGdldENvbmZpZygpLnNlY3VyaXR5TGV2ZWw7XG4gIGxldCBzYW5kYm94RWxlbWVudDtcbiAgaWYgKHNlY3VyaXR5TGV2ZWwgPT09IFwic2FuZGJveFwiKSB7XG4gICAgc2FuZGJveEVsZW1lbnQgPSBzZWxlY3QoXCIjaVwiICsgaWQpO1xuICB9XG4gIGNvbnN0IHJvb3QgPSBzZWN1cml0eUxldmVsID09PSBcInNhbmRib3hcIiA/IHNlbGVjdChzYW5kYm94RWxlbWVudC5ub2RlcygpWzBdLmNvbnRlbnREb2N1bWVudC5ib2R5KSA6IHNlbGVjdChcImJvZHlcIik7XG4gIGNvbnN0IGRpYWdyYW0yID0gcm9vdC5zZWxlY3QoYFtpZD0nJHtpZH0nXWApO1xuICBpbnNlcnRNYXJrZXJzKGRpYWdyYW0yKTtcbiAgY29uc3QgZyA9IG5ldyBncmFwaGxpYi5HcmFwaCh7XG4gICAgbXVsdGlncmFwaDogdHJ1ZVxuICB9KTtcbiAgZy5zZXRHcmFwaCh7XG4gICAgaXNNdWx0aUdyYXBoOiB0cnVlXG4gIH0pO1xuICBnLnNldERlZmF1bHRFZGdlTGFiZWwoZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHt9O1xuICB9KTtcbiAgY29uc3QgY2xhc3NlcyA9IGRpYWdPYmouZGIuZ2V0Q2xhc3NlcygpO1xuICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMoY2xhc3Nlcyk7XG4gIGZvciAoY29uc3Qga2V5IG9mIGtleXMpIHtcbiAgICBjb25zdCBjbGFzc0RlZiA9IGNsYXNzZXNba2V5XTtcbiAgICBjb25zdCBub2RlID0gc3ZnRHJhdy5kcmF3Q2xhc3MoZGlhZ3JhbTIsIGNsYXNzRGVmLCBjb25mLCBkaWFnT2JqKTtcbiAgICBpZENhY2hlW25vZGUuaWRdID0gbm9kZTtcbiAgICBnLnNldE5vZGUobm9kZS5pZCwgbm9kZSk7XG4gICAgbG9nLmluZm8oXCJPcmcgaGVpZ2h0OiBcIiArIG5vZGUuaGVpZ2h0KTtcbiAgfVxuICBjb25zdCByZWxhdGlvbnMgPSBkaWFnT2JqLmRiLmdldFJlbGF0aW9ucygpO1xuICByZWxhdGlvbnMuZm9yRWFjaChmdW5jdGlvbihyZWxhdGlvbikge1xuICAgIGxvZy5pbmZvKFxuICAgICAgLy8gY3NwZWxsOmlnbm9yZSB0am9ob1xuICAgICAgXCJ0am9ob1wiICsgZ2V0R3JhcGhJZChyZWxhdGlvbi5pZDEpICsgZ2V0R3JhcGhJZChyZWxhdGlvbi5pZDIpICsgSlNPTi5zdHJpbmdpZnkocmVsYXRpb24pXG4gICAgKTtcbiAgICBnLnNldEVkZ2UoXG4gICAgICBnZXRHcmFwaElkKHJlbGF0aW9uLmlkMSksXG4gICAgICBnZXRHcmFwaElkKHJlbGF0aW9uLmlkMiksXG4gICAgICB7XG4gICAgICAgIHJlbGF0aW9uXG4gICAgICB9LFxuICAgICAgcmVsYXRpb24udGl0bGUgfHwgXCJERUZBVUxUXCJcbiAgICApO1xuICB9KTtcbiAgY29uc3Qgbm90ZXMgPSBkaWFnT2JqLmRiLmdldE5vdGVzKCk7XG4gIG5vdGVzLmZvckVhY2goZnVuY3Rpb24obm90ZSkge1xuICAgIGxvZy5kZWJ1ZyhgQWRkaW5nIG5vdGU6ICR7SlNPTi5zdHJpbmdpZnkobm90ZSl9YCk7XG4gICAgY29uc3Qgbm9kZSA9IHN2Z0RyYXcuZHJhd05vdGUoZGlhZ3JhbTIsIG5vdGUsIGNvbmYsIGRpYWdPYmopO1xuICAgIGlkQ2FjaGVbbm9kZS5pZF0gPSBub2RlO1xuICAgIGcuc2V0Tm9kZShub2RlLmlkLCBub2RlKTtcbiAgICBpZiAobm90ZS5jbGFzcyAmJiBub3RlLmNsYXNzIGluIGNsYXNzZXMpIHtcbiAgICAgIGcuc2V0RWRnZShcbiAgICAgICAgbm90ZS5pZCxcbiAgICAgICAgZ2V0R3JhcGhJZChub3RlLmNsYXNzKSxcbiAgICAgICAge1xuICAgICAgICAgIHJlbGF0aW9uOiB7XG4gICAgICAgICAgICBpZDE6IG5vdGUuaWQsXG4gICAgICAgICAgICBpZDI6IG5vdGUuY2xhc3MsXG4gICAgICAgICAgICByZWxhdGlvbjoge1xuICAgICAgICAgICAgICB0eXBlMTogXCJub25lXCIsXG4gICAgICAgICAgICAgIHR5cGUyOiBcIm5vbmVcIixcbiAgICAgICAgICAgICAgbGluZVR5cGU6IDEwXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBcIkRFRkFVTFRcIlxuICAgICAgKTtcbiAgICB9XG4gIH0pO1xuICBsYXlvdXQoZyk7XG4gIGcubm9kZXMoKS5mb3JFYWNoKGZ1bmN0aW9uKHYpIHtcbiAgICBpZiAodiAhPT0gdm9pZCAwICYmIGcubm9kZSh2KSAhPT0gdm9pZCAwKSB7XG4gICAgICBsb2cuZGVidWcoXCJOb2RlIFwiICsgdiArIFwiOiBcIiArIEpTT04uc3RyaW5naWZ5KGcubm9kZSh2KSkpO1xuICAgICAgcm9vdC5zZWxlY3QoXCIjXCIgKyAoZGlhZ09iai5kYi5sb29rVXBEb21JZCh2KSB8fCB2KSkuYXR0cihcbiAgICAgICAgXCJ0cmFuc2Zvcm1cIixcbiAgICAgICAgXCJ0cmFuc2xhdGUoXCIgKyAoZy5ub2RlKHYpLnggLSBnLm5vZGUodikud2lkdGggLyAyKSArIFwiLFwiICsgKGcubm9kZSh2KS55IC0gZy5ub2RlKHYpLmhlaWdodCAvIDIpICsgXCIgKVwiXG4gICAgICApO1xuICAgIH1cbiAgfSk7XG4gIGcuZWRnZXMoKS5mb3JFYWNoKGZ1bmN0aW9uKGUpIHtcbiAgICBpZiAoZSAhPT0gdm9pZCAwICYmIGcuZWRnZShlKSAhPT0gdm9pZCAwKSB7XG4gICAgICBsb2cuZGVidWcoXCJFZGdlIFwiICsgZS52ICsgXCIgLT4gXCIgKyBlLncgKyBcIjogXCIgKyBKU09OLnN0cmluZ2lmeShnLmVkZ2UoZSkpKTtcbiAgICAgIHN2Z0RyYXcuZHJhd0VkZ2UoZGlhZ3JhbTIsIGcuZWRnZShlKSwgZy5lZGdlKGUpLnJlbGF0aW9uLCBjb25mLCBkaWFnT2JqKTtcbiAgICB9XG4gIH0pO1xuICBjb25zdCBzdmdCb3VuZHMgPSBkaWFncmFtMi5ub2RlKCkuZ2V0QkJveCgpO1xuICBjb25zdCB3aWR0aCA9IHN2Z0JvdW5kcy53aWR0aCArIHBhZGRpbmcgKiAyO1xuICBjb25zdCBoZWlnaHQgPSBzdmdCb3VuZHMuaGVpZ2h0ICsgcGFkZGluZyAqIDI7XG4gIGNvbmZpZ3VyZVN2Z1NpemUoZGlhZ3JhbTIsIGhlaWdodCwgd2lkdGgsIGNvbmYudXNlTWF4V2lkdGgpO1xuICBjb25zdCB2Qm94ID0gYCR7c3ZnQm91bmRzLnggLSBwYWRkaW5nfSAke3N2Z0JvdW5kcy55IC0gcGFkZGluZ30gJHt3aWR0aH0gJHtoZWlnaHR9YDtcbiAgbG9nLmRlYnVnKGB2aWV3Qm94ICR7dkJveH1gKTtcbiAgZGlhZ3JhbTIuYXR0cihcInZpZXdCb3hcIiwgdkJveCk7XG59O1xuY29uc3QgcmVuZGVyZXIgPSB7XG4gIGRyYXdcbn07XG5jb25zdCBkaWFncmFtID0ge1xuICBwYXJzZXIsXG4gIGRiLFxuICByZW5kZXJlcixcbiAgc3R5bGVzLFxuICBpbml0OiAoY25mKSA9PiB7XG4gICAgaWYgKCFjbmYuY2xhc3MpIHtcbiAgICAgIGNuZi5jbGFzcyA9IHt9O1xuICAgIH1cbiAgICBjbmYuY2xhc3MuYXJyb3dNYXJrZXJBYnNvbHV0ZSA9IGNuZi5hcnJvd01hcmtlckFic29sdXRlO1xuICAgIGRiLmNsZWFyKCk7XG4gIH1cbn07XG5leHBvcnQge1xuICBkaWFncmFtXG59O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///7426\n')}}]);
"use strict";(self.webpackChunkgantt_on_kintone=self.webpackChunkgantt_on_kintone||[]).push([[162],{5937:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   A: () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _utils_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(6309);\n/* harmony import */ var _color_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(1931);\n/* IMPORT */\n\n\n/* MAIN */\nconst channel = (color, channel) => {\n    return _utils_index_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.lang.round(_color_index_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A.parse(color)[channel]);\n};\n/* EXPORT */\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (channel);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNTkzNy5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFBO0FBQ2tDO0FBQ0k7QUFDdEM7QUFDQTtBQUNBLFdBQVcsZ0VBQUMsWUFBWSxnRUFBSztBQUM3QjtBQUNBO0FBQ0EsaUVBQWUsT0FBTyxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ2FudHQtb24ta2ludG9uZS8uL25vZGVfbW9kdWxlcy9raHJvbWEvZGlzdC9tZXRob2RzL2NoYW5uZWwuanM/NzViNSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiBJTVBPUlQgKi9cbmltcG9ydCBfIGZyb20gJy4uL3V0aWxzL2luZGV4LmpzJztcbmltcG9ydCBDb2xvciBmcm9tICcuLi9jb2xvci9pbmRleC5qcyc7XG4vKiBNQUlOICovXG5jb25zdCBjaGFubmVsID0gKGNvbG9yLCBjaGFubmVsKSA9PiB7XG4gICAgcmV0dXJuIF8ubGFuZy5yb3VuZChDb2xvci5wYXJzZShjb2xvcilbY2hhbm5lbF0pO1xufTtcbi8qIEVYUE9SVCAqL1xuZXhwb3J0IGRlZmF1bHQgY2hhbm5lbDtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///5937\n')},53:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval("/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   A: () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _baseClone_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(970);\n\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_SYMBOLS_FLAG = 4;\n\n/**\n * Creates a shallow clone of `value`.\n *\n * **Note:** This method is loosely based on the\n * [structured clone algorithm](https://mdn.io/Structured_clone_algorithm)\n * and supports cloning arrays, array buffers, booleans, date objects, maps,\n * numbers, `Object` objects, regexes, sets, strings, symbols, and typed\n * arrays. The own enumerable properties of `arguments` objects are cloned\n * as plain objects. An empty object is returned for uncloneable values such\n * as error objects, functions, DOM nodes, and WeakMaps.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to clone.\n * @returns {*} Returns the cloned value.\n * @see _.cloneDeep\n * @example\n *\n * var objects = [{ 'a': 1 }, { 'b': 2 }];\n *\n * var shallow = _.clone(objects);\n * console.log(shallow[0] === objects[0]);\n * // => true\n */\nfunction clone(value) {\n  return (0,_baseClone_js__WEBPACK_IMPORTED_MODULE_0__/* [\"default\"] */ .A)(value, CLONE_SYMBOLS_FLAG);\n}\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (clone);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNTMuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUF3Qzs7QUFFeEM7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLEdBQUc7QUFDZCxhQUFhLEdBQUc7QUFDaEI7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLFFBQVEsSUFBSSxRQUFRO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsa0VBQVM7QUFDbEI7O0FBRUEsaUVBQWUsS0FBSyxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ2FudHQtb24ta2ludG9uZS8uL25vZGVfbW9kdWxlcy9sb2Rhc2gtZXMvY2xvbmUuanM/OTdlMiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgYmFzZUNsb25lIGZyb20gJy4vX2Jhc2VDbG9uZS5qcyc7XG5cbi8qKiBVc2VkIHRvIGNvbXBvc2UgYml0bWFza3MgZm9yIGNsb25pbmcuICovXG52YXIgQ0xPTkVfU1lNQk9MU19GTEFHID0gNDtcblxuLyoqXG4gKiBDcmVhdGVzIGEgc2hhbGxvdyBjbG9uZSBvZiBgdmFsdWVgLlxuICpcbiAqICoqTm90ZToqKiBUaGlzIG1ldGhvZCBpcyBsb29zZWx5IGJhc2VkIG9uIHRoZVxuICogW3N0cnVjdHVyZWQgY2xvbmUgYWxnb3JpdGhtXShodHRwczovL21kbi5pby9TdHJ1Y3R1cmVkX2Nsb25lX2FsZ29yaXRobSlcbiAqIGFuZCBzdXBwb3J0cyBjbG9uaW5nIGFycmF5cywgYXJyYXkgYnVmZmVycywgYm9vbGVhbnMsIGRhdGUgb2JqZWN0cywgbWFwcyxcbiAqIG51bWJlcnMsIGBPYmplY3RgIG9iamVjdHMsIHJlZ2V4ZXMsIHNldHMsIHN0cmluZ3MsIHN5bWJvbHMsIGFuZCB0eXBlZFxuICogYXJyYXlzLiBUaGUgb3duIGVudW1lcmFibGUgcHJvcGVydGllcyBvZiBgYXJndW1lbnRzYCBvYmplY3RzIGFyZSBjbG9uZWRcbiAqIGFzIHBsYWluIG9iamVjdHMuIEFuIGVtcHR5IG9iamVjdCBpcyByZXR1cm5lZCBmb3IgdW5jbG9uZWFibGUgdmFsdWVzIHN1Y2hcbiAqIGFzIGVycm9yIG9iamVjdHMsIGZ1bmN0aW9ucywgRE9NIG5vZGVzLCBhbmQgV2Vha01hcHMuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSAwLjEuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNsb25lLlxuICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIGNsb25lZCB2YWx1ZS5cbiAqIEBzZWUgXy5jbG9uZURlZXBcbiAqIEBleGFtcGxlXG4gKlxuICogdmFyIG9iamVjdHMgPSBbeyAnYSc6IDEgfSwgeyAnYic6IDIgfV07XG4gKlxuICogdmFyIHNoYWxsb3cgPSBfLmNsb25lKG9iamVjdHMpO1xuICogY29uc29sZS5sb2coc2hhbGxvd1swXSA9PT0gb2JqZWN0c1swXSk7XG4gKiAvLyA9PiB0cnVlXG4gKi9cbmZ1bmN0aW9uIGNsb25lKHZhbHVlKSB7XG4gIHJldHVybiBiYXNlQ2xvbmUodmFsdWUsIENMT05FX1NZTUJPTFNfRkxBRyk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsb25lO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///53\n")},4162:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   diagram: () => (/* binding */ diagram)\n/* harmony export */ });\n/* harmony import */ var _mermaid_6dc72991_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(5950);\n/* harmony import */ var lodash_es_clone_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(53);\n/* harmony import */ var khroma__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(5937);\n/* harmony import */ var khroma__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(5582);\n/* harmony import */ var _edges_066a5561_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(8055);\n/* harmony import */ var dagre_d3_es_src_graphlib_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(697);\n/* harmony import */ var d3__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(8918);\n/* harmony import */ var dayjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(4353);\n/* harmony import */ var _braintree_sanitize_url__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(6750);\n/* harmony import */ var dompurify__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(2838);\nvar _a, _b;\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar parser = function() {\n  var o = function(k, v, o2, l) {\n    for (o2 = o2 || {}, l = k.length; l--; o2[k[l]] = v)\n      ;\n    return o2;\n  }, $V0 = [1, 7], $V1 = [1, 13], $V2 = [1, 14], $V3 = [1, 15], $V4 = [1, 19], $V5 = [1, 16], $V6 = [1, 17], $V7 = [1, 18], $V8 = [8, 30], $V9 = [8, 21, 28, 29, 30, 31, 32, 40, 44, 47], $Va = [1, 23], $Vb = [1, 24], $Vc = [8, 15, 16, 21, 28, 29, 30, 31, 32, 40, 44, 47], $Vd = [8, 15, 16, 21, 27, 28, 29, 30, 31, 32, 40, 44, 47], $Ve = [1, 49];\n  var parser2 = {\n    trace: function trace() {\n    },\n    yy: {},\n    symbols_: { "error": 2, "spaceLines": 3, "SPACELINE": 4, "NL": 5, "separator": 6, "SPACE": 7, "EOF": 8, "start": 9, "BLOCK_DIAGRAM_KEY": 10, "document": 11, "stop": 12, "statement": 13, "link": 14, "LINK": 15, "START_LINK": 16, "LINK_LABEL": 17, "STR": 18, "nodeStatement": 19, "columnsStatement": 20, "SPACE_BLOCK": 21, "blockStatement": 22, "classDefStatement": 23, "cssClassStatement": 24, "styleStatement": 25, "node": 26, "SIZE": 27, "COLUMNS": 28, "id-block": 29, "end": 30, "block": 31, "NODE_ID": 32, "nodeShapeNLabel": 33, "dirList": 34, "DIR": 35, "NODE_DSTART": 36, "NODE_DEND": 37, "BLOCK_ARROW_START": 38, "BLOCK_ARROW_END": 39, "classDef": 40, "CLASSDEF_ID": 41, "CLASSDEF_STYLEOPTS": 42, "DEFAULT": 43, "class": 44, "CLASSENTITY_IDS": 45, "STYLECLASS": 46, "style": 47, "STYLE_ENTITY_IDS": 48, "STYLE_DEFINITION_DATA": 49, "$accept": 0, "$end": 1 },\n    terminals_: { 2: "error", 4: "SPACELINE", 5: "NL", 7: "SPACE", 8: "EOF", 10: "BLOCK_DIAGRAM_KEY", 15: "LINK", 16: "START_LINK", 17: "LINK_LABEL", 18: "STR", 21: "SPACE_BLOCK", 27: "SIZE", 28: "COLUMNS", 29: "id-block", 30: "end", 31: "block", 32: "NODE_ID", 35: "DIR", 36: "NODE_DSTART", 37: "NODE_DEND", 38: "BLOCK_ARROW_START", 39: "BLOCK_ARROW_END", 40: "classDef", 41: "CLASSDEF_ID", 42: "CLASSDEF_STYLEOPTS", 43: "DEFAULT", 44: "class", 45: "CLASSENTITY_IDS", 46: "STYLECLASS", 47: "style", 48: "STYLE_ENTITY_IDS", 49: "STYLE_DEFINITION_DATA" },\n    productions_: [0, [3, 1], [3, 2], [3, 2], [6, 1], [6, 1], [6, 1], [9, 3], [12, 1], [12, 1], [12, 2], [12, 2], [11, 1], [11, 2], [14, 1], [14, 4], [13, 1], [13, 1], [13, 1], [13, 1], [13, 1], [13, 1], [13, 1], [19, 3], [19, 2], [19, 1], [20, 1], [22, 4], [22, 3], [26, 1], [26, 2], [34, 1], [34, 2], [33, 3], [33, 4], [23, 3], [23, 3], [24, 3], [25, 3]],\n    performAction: function anonymous(yytext, yyleng, yylineno, yy, yystate, $$, _$) {\n      var $0 = $$.length - 1;\n      switch (yystate) {\n        case 4:\n          yy.getLogger().debug("Rule: separator (NL) ");\n          break;\n        case 5:\n          yy.getLogger().debug("Rule: separator (Space) ");\n          break;\n        case 6:\n          yy.getLogger().debug("Rule: separator (EOF) ");\n          break;\n        case 7:\n          yy.getLogger().debug("Rule: hierarchy: ", $$[$0 - 1]);\n          yy.setHierarchy($$[$0 - 1]);\n          break;\n        case 8:\n          yy.getLogger().debug("Stop NL ");\n          break;\n        case 9:\n          yy.getLogger().debug("Stop EOF ");\n          break;\n        case 10:\n          yy.getLogger().debug("Stop NL2 ");\n          break;\n        case 11:\n          yy.getLogger().debug("Stop EOF2 ");\n          break;\n        case 12:\n          yy.getLogger().debug("Rule: statement: ", $$[$0]);\n          typeof $$[$0].length === "number" ? this.$ = $$[$0] : this.$ = [$$[$0]];\n          break;\n        case 13:\n          yy.getLogger().debug("Rule: statement #2: ", $$[$0 - 1]);\n          this.$ = [$$[$0 - 1]].concat($$[$0]);\n          break;\n        case 14:\n          yy.getLogger().debug("Rule: link: ", $$[$0], yytext);\n          this.$ = { edgeTypeStr: $$[$0], label: "" };\n          break;\n        case 15:\n          yy.getLogger().debug("Rule: LABEL link: ", $$[$0 - 3], $$[$0 - 1], $$[$0]);\n          this.$ = { edgeTypeStr: $$[$0], label: $$[$0 - 1] };\n          break;\n        case 18:\n          const num = parseInt($$[$0]);\n          const spaceId = yy.generateId();\n          this.$ = { id: spaceId, type: "space", label: "", width: num, children: [] };\n          break;\n        case 23:\n          yy.getLogger().debug("Rule: (nodeStatement link node) ", $$[$0 - 2], $$[$0 - 1], $$[$0], " typestr: ", $$[$0 - 1].edgeTypeStr);\n          const edgeData = yy.edgeStrToEdgeData($$[$0 - 1].edgeTypeStr);\n          this.$ = [\n            { id: $$[$0 - 2].id, label: $$[$0 - 2].label, type: $$[$0 - 2].type, directions: $$[$0 - 2].directions },\n            { id: $$[$0 - 2].id + "-" + $$[$0].id, start: $$[$0 - 2].id, end: $$[$0].id, label: $$[$0 - 1].label, type: "edge", directions: $$[$0].directions, arrowTypeEnd: edgeData, arrowTypeStart: "arrow_open" },\n            { id: $$[$0].id, label: $$[$0].label, type: yy.typeStr2Type($$[$0].typeStr), directions: $$[$0].directions }\n          ];\n          break;\n        case 24:\n          yy.getLogger().debug("Rule: nodeStatement (abc88 node size) ", $$[$0 - 1], $$[$0]);\n          this.$ = { id: $$[$0 - 1].id, label: $$[$0 - 1].label, type: yy.typeStr2Type($$[$0 - 1].typeStr), directions: $$[$0 - 1].directions, widthInColumns: parseInt($$[$0], 10) };\n          break;\n        case 25:\n          yy.getLogger().debug("Rule: nodeStatement (node) ", $$[$0]);\n          this.$ = { id: $$[$0].id, label: $$[$0].label, type: yy.typeStr2Type($$[$0].typeStr), directions: $$[$0].directions, widthInColumns: 1 };\n          break;\n        case 26:\n          yy.getLogger().debug("APA123", this ? this : "na");\n          yy.getLogger().debug("COLUMNS: ", $$[$0]);\n          this.$ = { type: "column-setting", columns: $$[$0] === "auto" ? -1 : parseInt($$[$0]) };\n          break;\n        case 27:\n          yy.getLogger().debug("Rule: id-block statement : ", $$[$0 - 2], $$[$0 - 1]);\n          yy.generateId();\n          this.$ = { ...$$[$0 - 2], type: "composite", children: $$[$0 - 1] };\n          break;\n        case 28:\n          yy.getLogger().debug("Rule: blockStatement : ", $$[$0 - 2], $$[$0 - 1], $$[$0]);\n          const id = yy.generateId();\n          this.$ = { id, type: "composite", label: "", children: $$[$0 - 1] };\n          break;\n        case 29:\n          yy.getLogger().debug("Rule: node (NODE_ID separator): ", $$[$0]);\n          this.$ = { id: $$[$0] };\n          break;\n        case 30:\n          yy.getLogger().debug("Rule: node (NODE_ID nodeShapeNLabel separator): ", $$[$0 - 1], $$[$0]);\n          this.$ = { id: $$[$0 - 1], label: $$[$0].label, typeStr: $$[$0].typeStr, directions: $$[$0].directions };\n          break;\n        case 31:\n          yy.getLogger().debug("Rule: dirList: ", $$[$0]);\n          this.$ = [$$[$0]];\n          break;\n        case 32:\n          yy.getLogger().debug("Rule: dirList: ", $$[$0 - 1], $$[$0]);\n          this.$ = [$$[$0 - 1]].concat($$[$0]);\n          break;\n        case 33:\n          yy.getLogger().debug("Rule: nodeShapeNLabel: ", $$[$0 - 2], $$[$0 - 1], $$[$0]);\n          this.$ = { typeStr: $$[$0 - 2] + $$[$0], label: $$[$0 - 1] };\n          break;\n        case 34:\n          yy.getLogger().debug("Rule: BLOCK_ARROW nodeShapeNLabel: ", $$[$0 - 3], $$[$0 - 2], " #3:", $$[$0 - 1], $$[$0]);\n          this.$ = { typeStr: $$[$0 - 3] + $$[$0], label: $$[$0 - 2], directions: $$[$0 - 1] };\n          break;\n        case 35:\n        case 36:\n          this.$ = { type: "classDef", id: $$[$0 - 1].trim(), css: $$[$0].trim() };\n          break;\n        case 37:\n          this.$ = { type: "applyClass", id: $$[$0 - 1].trim(), styleClass: $$[$0].trim() };\n          break;\n        case 38:\n          this.$ = { type: "applyStyles", id: $$[$0 - 1].trim(), stylesStr: $$[$0].trim() };\n          break;\n      }\n    },\n    table: [{ 9: 1, 10: [1, 2] }, { 1: [3] }, { 11: 3, 13: 4, 19: 5, 20: 6, 21: $V0, 22: 8, 23: 9, 24: 10, 25: 11, 26: 12, 28: $V1, 29: $V2, 31: $V3, 32: $V4, 40: $V5, 44: $V6, 47: $V7 }, { 8: [1, 20] }, o($V8, [2, 12], { 13: 4, 19: 5, 20: 6, 22: 8, 23: 9, 24: 10, 25: 11, 26: 12, 11: 21, 21: $V0, 28: $V1, 29: $V2, 31: $V3, 32: $V4, 40: $V5, 44: $V6, 47: $V7 }), o($V9, [2, 16], { 14: 22, 15: $Va, 16: $Vb }), o($V9, [2, 17]), o($V9, [2, 18]), o($V9, [2, 19]), o($V9, [2, 20]), o($V9, [2, 21]), o($V9, [2, 22]), o($Vc, [2, 25], { 27: [1, 25] }), o($V9, [2, 26]), { 19: 26, 26: 12, 32: $V4 }, { 11: 27, 13: 4, 19: 5, 20: 6, 21: $V0, 22: 8, 23: 9, 24: 10, 25: 11, 26: 12, 28: $V1, 29: $V2, 31: $V3, 32: $V4, 40: $V5, 44: $V6, 47: $V7 }, { 41: [1, 28], 43: [1, 29] }, { 45: [1, 30] }, { 48: [1, 31] }, o($Vd, [2, 29], { 33: 32, 36: [1, 33], 38: [1, 34] }), { 1: [2, 7] }, o($V8, [2, 13]), { 26: 35, 32: $V4 }, { 32: [2, 14] }, { 17: [1, 36] }, o($Vc, [2, 24]), { 11: 37, 13: 4, 14: 22, 15: $Va, 16: $Vb, 19: 5, 20: 6, 21: $V0, 22: 8, 23: 9, 24: 10, 25: 11, 26: 12, 28: $V1, 29: $V2, 31: $V3, 32: $V4, 40: $V5, 44: $V6, 47: $V7 }, { 30: [1, 38] }, { 42: [1, 39] }, { 42: [1, 40] }, { 46: [1, 41] }, { 49: [1, 42] }, o($Vd, [2, 30]), { 18: [1, 43] }, { 18: [1, 44] }, o($Vc, [2, 23]), { 18: [1, 45] }, { 30: [1, 46] }, o($V9, [2, 28]), o($V9, [2, 35]), o($V9, [2, 36]), o($V9, [2, 37]), o($V9, [2, 38]), { 37: [1, 47] }, { 34: 48, 35: $Ve }, { 15: [1, 50] }, o($V9, [2, 27]), o($Vd, [2, 33]), { 39: [1, 51] }, { 34: 52, 35: $Ve, 39: [2, 31] }, { 32: [2, 15] }, o($Vd, [2, 34]), { 39: [2, 32] }],\n    defaultActions: { 20: [2, 7], 23: [2, 14], 50: [2, 15], 52: [2, 32] },\n    parseError: function parseError(str, hash) {\n      if (hash.recoverable) {\n        this.trace(str);\n      } else {\n        var error = new Error(str);\n        error.hash = hash;\n        throw error;\n      }\n    },\n    parse: function parse(input) {\n      var self = this, stack = [0], tstack = [], vstack = [null], lstack = [], table = this.table, yytext = "", yylineno = 0, yyleng = 0, TERROR = 2, EOF = 1;\n      var args = lstack.slice.call(arguments, 1);\n      var lexer2 = Object.create(this.lexer);\n      var sharedState = { yy: {} };\n      for (var k in this.yy) {\n        if (Object.prototype.hasOwnProperty.call(this.yy, k)) {\n          sharedState.yy[k] = this.yy[k];\n        }\n      }\n      lexer2.setInput(input, sharedState.yy);\n      sharedState.yy.lexer = lexer2;\n      sharedState.yy.parser = this;\n      if (typeof lexer2.yylloc == "undefined") {\n        lexer2.yylloc = {};\n      }\n      var yyloc = lexer2.yylloc;\n      lstack.push(yyloc);\n      var ranges = lexer2.options && lexer2.options.ranges;\n      if (typeof sharedState.yy.parseError === "function") {\n        this.parseError = sharedState.yy.parseError;\n      } else {\n        this.parseError = Object.getPrototypeOf(this).parseError;\n      }\n      function lex() {\n        var token;\n        token = tstack.pop() || lexer2.lex() || EOF;\n        if (typeof token !== "number") {\n          if (token instanceof Array) {\n            tstack = token;\n            token = tstack.pop();\n          }\n          token = self.symbols_[token] || token;\n        }\n        return token;\n      }\n      var symbol, state, action, r, yyval = {}, p, len, newState, expected;\n      while (true) {\n        state = stack[stack.length - 1];\n        if (this.defaultActions[state]) {\n          action = this.defaultActions[state];\n        } else {\n          if (symbol === null || typeof symbol == "undefined") {\n            symbol = lex();\n          }\n          action = table[state] && table[state][symbol];\n        }\n        if (typeof action === "undefined" || !action.length || !action[0]) {\n          var errStr = "";\n          expected = [];\n          for (p in table[state]) {\n            if (this.terminals_[p] && p > TERROR) {\n              expected.push("\'" + this.terminals_[p] + "\'");\n            }\n          }\n          if (lexer2.showPosition) {\n            errStr = "Parse error on line " + (yylineno + 1) + ":\\n" + lexer2.showPosition() + "\\nExpecting " + expected.join(", ") + ", got \'" + (this.terminals_[symbol] || symbol) + "\'";\n          } else {\n            errStr = "Parse error on line " + (yylineno + 1) + ": Unexpected " + (symbol == EOF ? "end of input" : "\'" + (this.terminals_[symbol] || symbol) + "\'");\n          }\n          this.parseError(errStr, {\n            text: lexer2.match,\n            token: this.terminals_[symbol] || symbol,\n            line: lexer2.yylineno,\n            loc: yyloc,\n            expected\n          });\n        }\n        if (action[0] instanceof Array && action.length > 1) {\n          throw new Error("Parse Error: multiple actions possible at state: " + state + ", token: " + symbol);\n        }\n        switch (action[0]) {\n          case 1:\n            stack.push(symbol);\n            vstack.push(lexer2.yytext);\n            lstack.push(lexer2.yylloc);\n            stack.push(action[1]);\n            symbol = null;\n            {\n              yyleng = lexer2.yyleng;\n              yytext = lexer2.yytext;\n              yylineno = lexer2.yylineno;\n              yyloc = lexer2.yylloc;\n            }\n            break;\n          case 2:\n            len = this.productions_[action[1]][1];\n            yyval.$ = vstack[vstack.length - len];\n            yyval._$ = {\n              first_line: lstack[lstack.length - (len || 1)].first_line,\n              last_line: lstack[lstack.length - 1].last_line,\n              first_column: lstack[lstack.length - (len || 1)].first_column,\n              last_column: lstack[lstack.length - 1].last_column\n            };\n            if (ranges) {\n              yyval._$.range = [\n                lstack[lstack.length - (len || 1)].range[0],\n                lstack[lstack.length - 1].range[1]\n              ];\n            }\n            r = this.performAction.apply(yyval, [\n              yytext,\n              yyleng,\n              yylineno,\n              sharedState.yy,\n              action[1],\n              vstack,\n              lstack\n            ].concat(args));\n            if (typeof r !== "undefined") {\n              return r;\n            }\n            if (len) {\n              stack = stack.slice(0, -1 * len * 2);\n              vstack = vstack.slice(0, -1 * len);\n              lstack = lstack.slice(0, -1 * len);\n            }\n            stack.push(this.productions_[action[1]][0]);\n            vstack.push(yyval.$);\n            lstack.push(yyval._$);\n            newState = table[stack[stack.length - 2]][stack[stack.length - 1]];\n            stack.push(newState);\n            break;\n          case 3:\n            return true;\n        }\n      }\n      return true;\n    }\n  };\n  var lexer = function() {\n    var lexer2 = {\n      EOF: 1,\n      parseError: function parseError(str, hash) {\n        if (this.yy.parser) {\n          this.yy.parser.parseError(str, hash);\n        } else {\n          throw new Error(str);\n        }\n      },\n      // resets the lexer, sets new input\n      setInput: function(input, yy) {\n        this.yy = yy || this.yy || {};\n        this._input = input;\n        this._more = this._backtrack = this.done = false;\n        this.yylineno = this.yyleng = 0;\n        this.yytext = this.matched = this.match = "";\n        this.conditionStack = ["INITIAL"];\n        this.yylloc = {\n          first_line: 1,\n          first_column: 0,\n          last_line: 1,\n          last_column: 0\n        };\n        if (this.options.ranges) {\n          this.yylloc.range = [0, 0];\n        }\n        this.offset = 0;\n        return this;\n      },\n      // consumes and returns one char from the input\n      input: function() {\n        var ch = this._input[0];\n        this.yytext += ch;\n        this.yyleng++;\n        this.offset++;\n        this.match += ch;\n        this.matched += ch;\n        var lines = ch.match(/(?:\\r\\n?|\\n).*/g);\n        if (lines) {\n          this.yylineno++;\n          this.yylloc.last_line++;\n        } else {\n          this.yylloc.last_column++;\n        }\n        if (this.options.ranges) {\n          this.yylloc.range[1]++;\n        }\n        this._input = this._input.slice(1);\n        return ch;\n      },\n      // unshifts one char (or a string) into the input\n      unput: function(ch) {\n        var len = ch.length;\n        var lines = ch.split(/(?:\\r\\n?|\\n)/g);\n        this._input = ch + this._input;\n        this.yytext = this.yytext.substr(0, this.yytext.length - len);\n        this.offset -= len;\n        var oldLines = this.match.split(/(?:\\r\\n?|\\n)/g);\n        this.match = this.match.substr(0, this.match.length - 1);\n        this.matched = this.matched.substr(0, this.matched.length - 1);\n        if (lines.length - 1) {\n          this.yylineno -= lines.length - 1;\n        }\n        var r = this.yylloc.range;\n        this.yylloc = {\n          first_line: this.yylloc.first_line,\n          last_line: this.yylineno + 1,\n          first_column: this.yylloc.first_column,\n          last_column: lines ? (lines.length === oldLines.length ? this.yylloc.first_column : 0) + oldLines[oldLines.length - lines.length].length - lines[0].length : this.yylloc.first_column - len\n        };\n        if (this.options.ranges) {\n          this.yylloc.range = [r[0], r[0] + this.yyleng - len];\n        }\n        this.yyleng = this.yytext.length;\n        return this;\n      },\n      // When called from action, caches matched text and appends it on next action\n      more: function() {\n        this._more = true;\n        return this;\n      },\n      // When called from action, signals the lexer that this rule fails to match the input, so the next matching rule (regex) should be tested instead.\n      reject: function() {\n        if (this.options.backtrack_lexer) {\n          this._backtrack = true;\n        } else {\n          return this.parseError("Lexical error on line " + (this.yylineno + 1) + ". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\\n" + this.showPosition(), {\n            text: "",\n            token: null,\n            line: this.yylineno\n          });\n        }\n        return this;\n      },\n      // retain first n characters of the match\n      less: function(n) {\n        this.unput(this.match.slice(n));\n      },\n      // displays already matched input, i.e. for error messages\n      pastInput: function() {\n        var past = this.matched.substr(0, this.matched.length - this.match.length);\n        return (past.length > 20 ? "..." : "") + past.substr(-20).replace(/\\n/g, "");\n      },\n      // displays upcoming input, i.e. for error messages\n      upcomingInput: function() {\n        var next = this.match;\n        if (next.length < 20) {\n          next += this._input.substr(0, 20 - next.length);\n        }\n        return (next.substr(0, 20) + (next.length > 20 ? "..." : "")).replace(/\\n/g, "");\n      },\n      // displays the character position where the lexing error occurred, i.e. for error messages\n      showPosition: function() {\n        var pre = this.pastInput();\n        var c = new Array(pre.length + 1).join("-");\n        return pre + this.upcomingInput() + "\\n" + c + "^";\n      },\n      // test the lexed token: return FALSE when not a match, otherwise return token\n      test_match: function(match, indexed_rule) {\n        var token, lines, backup;\n        if (this.options.backtrack_lexer) {\n          backup = {\n            yylineno: this.yylineno,\n            yylloc: {\n              first_line: this.yylloc.first_line,\n              last_line: this.last_line,\n              first_column: this.yylloc.first_column,\n              last_column: this.yylloc.last_column\n            },\n            yytext: this.yytext,\n            match: this.match,\n            matches: this.matches,\n            matched: this.matched,\n            yyleng: this.yyleng,\n            offset: this.offset,\n            _more: this._more,\n            _input: this._input,\n            yy: this.yy,\n            conditionStack: this.conditionStack.slice(0),\n            done: this.done\n          };\n          if (this.options.ranges) {\n            backup.yylloc.range = this.yylloc.range.slice(0);\n          }\n        }\n        lines = match[0].match(/(?:\\r\\n?|\\n).*/g);\n        if (lines) {\n          this.yylineno += lines.length;\n        }\n        this.yylloc = {\n          first_line: this.yylloc.last_line,\n          last_line: this.yylineno + 1,\n          first_column: this.yylloc.last_column,\n          last_column: lines ? lines[lines.length - 1].length - lines[lines.length - 1].match(/\\r?\\n?/)[0].length : this.yylloc.last_column + match[0].length\n        };\n        this.yytext += match[0];\n        this.match += match[0];\n        this.matches = match;\n        this.yyleng = this.yytext.length;\n        if (this.options.ranges) {\n          this.yylloc.range = [this.offset, this.offset += this.yyleng];\n        }\n        this._more = false;\n        this._backtrack = false;\n        this._input = this._input.slice(match[0].length);\n        this.matched += match[0];\n        token = this.performAction.call(this, this.yy, this, indexed_rule, this.conditionStack[this.conditionStack.length - 1]);\n        if (this.done && this._input) {\n          this.done = false;\n        }\n        if (token) {\n          return token;\n        } else if (this._backtrack) {\n          for (var k in backup) {\n            this[k] = backup[k];\n          }\n          return false;\n        }\n        return false;\n      },\n      // return next match in input\n      next: function() {\n        if (this.done) {\n          return this.EOF;\n        }\n        if (!this._input) {\n          this.done = true;\n        }\n        var token, match, tempMatch, index;\n        if (!this._more) {\n          this.yytext = "";\n          this.match = "";\n        }\n        var rules = this._currentRules();\n        for (var i = 0; i < rules.length; i++) {\n          tempMatch = this._input.match(this.rules[rules[i]]);\n          if (tempMatch && (!match || tempMatch[0].length > match[0].length)) {\n            match = tempMatch;\n            index = i;\n            if (this.options.backtrack_lexer) {\n              token = this.test_match(tempMatch, rules[i]);\n              if (token !== false) {\n                return token;\n              } else if (this._backtrack) {\n                match = false;\n                continue;\n              } else {\n                return false;\n              }\n            } else if (!this.options.flex) {\n              break;\n            }\n          }\n        }\n        if (match) {\n          token = this.test_match(match, rules[index]);\n          if (token !== false) {\n            return token;\n          }\n          return false;\n        }\n        if (this._input === "") {\n          return this.EOF;\n        } else {\n          return this.parseError("Lexical error on line " + (this.yylineno + 1) + ". Unrecognized text.\\n" + this.showPosition(), {\n            text: "",\n            token: null,\n            line: this.yylineno\n          });\n        }\n      },\n      // return next match that has a token\n      lex: function lex() {\n        var r = this.next();\n        if (r) {\n          return r;\n        } else {\n          return this.lex();\n        }\n      },\n      // activates a new lexer condition state (pushes the new lexer condition state onto the condition stack)\n      begin: function begin(condition) {\n        this.conditionStack.push(condition);\n      },\n      // pop the previously active lexer condition state off the condition stack\n      popState: function popState() {\n        var n = this.conditionStack.length - 1;\n        if (n > 0) {\n          return this.conditionStack.pop();\n        } else {\n          return this.conditionStack[0];\n        }\n      },\n      // produce the lexer rule set which is active for the currently active lexer condition state\n      _currentRules: function _currentRules() {\n        if (this.conditionStack.length && this.conditionStack[this.conditionStack.length - 1]) {\n          return this.conditions[this.conditionStack[this.conditionStack.length - 1]].rules;\n        } else {\n          return this.conditions["INITIAL"].rules;\n        }\n      },\n      // return the currently active lexer condition state; when an index argument is provided it produces the N-th previous condition state, if available\n      topState: function topState(n) {\n        n = this.conditionStack.length - 1 - Math.abs(n || 0);\n        if (n >= 0) {\n          return this.conditionStack[n];\n        } else {\n          return "INITIAL";\n        }\n      },\n      // alias for begin(condition)\n      pushState: function pushState(condition) {\n        this.begin(condition);\n      },\n      // return the number of states currently on the stack\n      stateStackSize: function stateStackSize() {\n        return this.conditionStack.length;\n      },\n      options: {},\n      performAction: function anonymous(yy, yy_, $avoiding_name_collisions, YY_START) {\n        switch ($avoiding_name_collisions) {\n          case 0:\n            return 10;\n          case 1:\n            yy.getLogger().debug("Found space-block");\n            return 31;\n          case 2:\n            yy.getLogger().debug("Found nl-block");\n            return 31;\n          case 3:\n            yy.getLogger().debug("Found space-block");\n            return 29;\n          case 4:\n            yy.getLogger().debug(".", yy_.yytext);\n            break;\n          case 5:\n            yy.getLogger().debug("_", yy_.yytext);\n            break;\n          case 6:\n            return 5;\n          case 7:\n            yy_.yytext = -1;\n            return 28;\n          case 8:\n            yy_.yytext = yy_.yytext.replace(/columns\\s+/, "");\n            yy.getLogger().debug("COLUMNS (LEX)", yy_.yytext);\n            return 28;\n          case 9:\n            this.pushState("md_string");\n            break;\n          case 10:\n            return "MD_STR";\n          case 11:\n            this.popState();\n            break;\n          case 12:\n            this.pushState("string");\n            break;\n          case 13:\n            yy.getLogger().debug("LEX: POPPING STR:", yy_.yytext);\n            this.popState();\n            break;\n          case 14:\n            yy.getLogger().debug("LEX: STR end:", yy_.yytext);\n            return "STR";\n          case 15:\n            yy_.yytext = yy_.yytext.replace(/space\\:/, "");\n            yy.getLogger().debug("SPACE NUM (LEX)", yy_.yytext);\n            return 21;\n          case 16:\n            yy_.yytext = "1";\n            yy.getLogger().debug("COLUMNS (LEX)", yy_.yytext);\n            return 21;\n          case 17:\n            return 43;\n          case 18:\n            return "LINKSTYLE";\n          case 19:\n            return "INTERPOLATE";\n          case 20:\n            this.pushState("CLASSDEF");\n            return 40;\n          case 21:\n            this.popState();\n            this.pushState("CLASSDEFID");\n            return "DEFAULT_CLASSDEF_ID";\n          case 22:\n            this.popState();\n            this.pushState("CLASSDEFID");\n            return 41;\n          case 23:\n            this.popState();\n            return 42;\n          case 24:\n            this.pushState("CLASS");\n            return 44;\n          case 25:\n            this.popState();\n            this.pushState("CLASS_STYLE");\n            return 45;\n          case 26:\n            this.popState();\n            return 46;\n          case 27:\n            this.pushState("STYLE_STMNT");\n            return 47;\n          case 28:\n            this.popState();\n            this.pushState("STYLE_DEFINITION");\n            return 48;\n          case 29:\n            this.popState();\n            return 49;\n          case 30:\n            this.pushState("acc_title");\n            return "acc_title";\n          case 31:\n            this.popState();\n            return "acc_title_value";\n          case 32:\n            this.pushState("acc_descr");\n            return "acc_descr";\n          case 33:\n            this.popState();\n            return "acc_descr_value";\n          case 34:\n            this.pushState("acc_descr_multiline");\n            break;\n          case 35:\n            this.popState();\n            break;\n          case 36:\n            return "acc_descr_multiline_value";\n          case 37:\n            return 30;\n          case 38:\n            this.popState();\n            yy.getLogger().debug("Lex: ((");\n            return "NODE_DEND";\n          case 39:\n            this.popState();\n            yy.getLogger().debug("Lex: ((");\n            return "NODE_DEND";\n          case 40:\n            this.popState();\n            yy.getLogger().debug("Lex: ))");\n            return "NODE_DEND";\n          case 41:\n            this.popState();\n            yy.getLogger().debug("Lex: ((");\n            return "NODE_DEND";\n          case 42:\n            this.popState();\n            yy.getLogger().debug("Lex: ((");\n            return "NODE_DEND";\n          case 43:\n            this.popState();\n            yy.getLogger().debug("Lex: (-");\n            return "NODE_DEND";\n          case 44:\n            this.popState();\n            yy.getLogger().debug("Lex: -)");\n            return "NODE_DEND";\n          case 45:\n            this.popState();\n            yy.getLogger().debug("Lex: ((");\n            return "NODE_DEND";\n          case 46:\n            this.popState();\n            yy.getLogger().debug("Lex: ]]");\n            return "NODE_DEND";\n          case 47:\n            this.popState();\n            yy.getLogger().debug("Lex: (");\n            return "NODE_DEND";\n          case 48:\n            this.popState();\n            yy.getLogger().debug("Lex: ])");\n            return "NODE_DEND";\n          case 49:\n            this.popState();\n            yy.getLogger().debug("Lex: /]");\n            return "NODE_DEND";\n          case 50:\n            this.popState();\n            yy.getLogger().debug("Lex: /]");\n            return "NODE_DEND";\n          case 51:\n            this.popState();\n            yy.getLogger().debug("Lex: )]");\n            return "NODE_DEND";\n          case 52:\n            this.popState();\n            yy.getLogger().debug("Lex: )");\n            return "NODE_DEND";\n          case 53:\n            this.popState();\n            yy.getLogger().debug("Lex: ]>");\n            return "NODE_DEND";\n          case 54:\n            this.popState();\n            yy.getLogger().debug("Lex: ]");\n            return "NODE_DEND";\n          case 55:\n            yy.getLogger().debug("Lexa: -)");\n            this.pushState("NODE");\n            return 36;\n          case 56:\n            yy.getLogger().debug("Lexa: (-");\n            this.pushState("NODE");\n            return 36;\n          case 57:\n            yy.getLogger().debug("Lexa: ))");\n            this.pushState("NODE");\n            return 36;\n          case 58:\n            yy.getLogger().debug("Lexa: )");\n            this.pushState("NODE");\n            return 36;\n          case 59:\n            yy.getLogger().debug("Lex: (((");\n            this.pushState("NODE");\n            return 36;\n          case 60:\n            yy.getLogger().debug("Lexa: )");\n            this.pushState("NODE");\n            return 36;\n          case 61:\n            yy.getLogger().debug("Lexa: )");\n            this.pushState("NODE");\n            return 36;\n          case 62:\n            yy.getLogger().debug("Lexa: )");\n            this.pushState("NODE");\n            return 36;\n          case 63:\n            yy.getLogger().debug("Lexc: >");\n            this.pushState("NODE");\n            return 36;\n          case 64:\n            yy.getLogger().debug("Lexa: ([");\n            this.pushState("NODE");\n            return 36;\n          case 65:\n            yy.getLogger().debug("Lexa: )");\n            this.pushState("NODE");\n            return 36;\n          case 66:\n            this.pushState("NODE");\n            return 36;\n          case 67:\n            this.pushState("NODE");\n            return 36;\n          case 68:\n            this.pushState("NODE");\n            return 36;\n          case 69:\n            this.pushState("NODE");\n            return 36;\n          case 70:\n            this.pushState("NODE");\n            return 36;\n          case 71:\n            this.pushState("NODE");\n            return 36;\n          case 72:\n            this.pushState("NODE");\n            return 36;\n          case 73:\n            yy.getLogger().debug("Lexa: [");\n            this.pushState("NODE");\n            return 36;\n          case 74:\n            this.pushState("BLOCK_ARROW");\n            yy.getLogger().debug("LEX ARR START");\n            return 38;\n          case 75:\n            yy.getLogger().debug("Lex: NODE_ID", yy_.yytext);\n            return 32;\n          case 76:\n            yy.getLogger().debug("Lex: EOF", yy_.yytext);\n            return 8;\n          case 77:\n            this.pushState("md_string");\n            break;\n          case 78:\n            this.pushState("md_string");\n            break;\n          case 79:\n            return "NODE_DESCR";\n          case 80:\n            this.popState();\n            break;\n          case 81:\n            yy.getLogger().debug("Lex: Starting string");\n            this.pushState("string");\n            break;\n          case 82:\n            yy.getLogger().debug("LEX ARR: Starting string");\n            this.pushState("string");\n            break;\n          case 83:\n            yy.getLogger().debug("LEX: NODE_DESCR:", yy_.yytext);\n            return "NODE_DESCR";\n          case 84:\n            yy.getLogger().debug("LEX POPPING");\n            this.popState();\n            break;\n          case 85:\n            yy.getLogger().debug("Lex: =>BAE");\n            this.pushState("ARROW_DIR");\n            break;\n          case 86:\n            yy_.yytext = yy_.yytext.replace(/^,\\s*/, "");\n            yy.getLogger().debug("Lex (right): dir:", yy_.yytext);\n            return "DIR";\n          case 87:\n            yy_.yytext = yy_.yytext.replace(/^,\\s*/, "");\n            yy.getLogger().debug("Lex (left):", yy_.yytext);\n            return "DIR";\n          case 88:\n            yy_.yytext = yy_.yytext.replace(/^,\\s*/, "");\n            yy.getLogger().debug("Lex (x):", yy_.yytext);\n            return "DIR";\n          case 89:\n            yy_.yytext = yy_.yytext.replace(/^,\\s*/, "");\n            yy.getLogger().debug("Lex (y):", yy_.yytext);\n            return "DIR";\n          case 90:\n            yy_.yytext = yy_.yytext.replace(/^,\\s*/, "");\n            yy.getLogger().debug("Lex (up):", yy_.yytext);\n            return "DIR";\n          case 91:\n            yy_.yytext = yy_.yytext.replace(/^,\\s*/, "");\n            yy.getLogger().debug("Lex (down):", yy_.yytext);\n            return "DIR";\n          case 92:\n            yy_.yytext = "]>";\n            yy.getLogger().debug("Lex (ARROW_DIR end):", yy_.yytext);\n            this.popState();\n            this.popState();\n            return "BLOCK_ARROW_END";\n          case 93:\n            yy.getLogger().debug("Lex: LINK", "#" + yy_.yytext + "#");\n            return 15;\n          case 94:\n            yy.getLogger().debug("Lex: LINK", yy_.yytext);\n            return 15;\n          case 95:\n            yy.getLogger().debug("Lex: LINK", yy_.yytext);\n            return 15;\n          case 96:\n            yy.getLogger().debug("Lex: LINK", yy_.yytext);\n            return 15;\n          case 97:\n            yy.getLogger().debug("Lex: START_LINK", yy_.yytext);\n            this.pushState("LLABEL");\n            return 16;\n          case 98:\n            yy.getLogger().debug("Lex: START_LINK", yy_.yytext);\n            this.pushState("LLABEL");\n            return 16;\n          case 99:\n            yy.getLogger().debug("Lex: START_LINK", yy_.yytext);\n            this.pushState("LLABEL");\n            return 16;\n          case 100:\n            this.pushState("md_string");\n            break;\n          case 101:\n            yy.getLogger().debug("Lex: Starting string");\n            this.pushState("string");\n            return "LINK_LABEL";\n          case 102:\n            this.popState();\n            yy.getLogger().debug("Lex: LINK", "#" + yy_.yytext + "#");\n            return 15;\n          case 103:\n            this.popState();\n            yy.getLogger().debug("Lex: LINK", yy_.yytext);\n            return 15;\n          case 104:\n            this.popState();\n            yy.getLogger().debug("Lex: LINK", yy_.yytext);\n            return 15;\n          case 105:\n            yy.getLogger().debug("Lex: COLON", yy_.yytext);\n            yy_.yytext = yy_.yytext.slice(1);\n            return 27;\n        }\n      },\n      rules: [/^(?:block-beta\\b)/, /^(?:block\\s+)/, /^(?:block\\n+)/, /^(?:block:)/, /^(?:[\\s]+)/, /^(?:[\\n]+)/, /^(?:((\\u000D\\u000A)|(\\u000A)))/, /^(?:columns\\s+auto\\b)/, /^(?:columns\\s+[\\d]+)/, /^(?:["][`])/, /^(?:[^`"]+)/, /^(?:[`]["])/, /^(?:["])/, /^(?:["])/, /^(?:[^"]*)/, /^(?:space[:]\\d+)/, /^(?:space\\b)/, /^(?:default\\b)/, /^(?:linkStyle\\b)/, /^(?:interpolate\\b)/, /^(?:classDef\\s+)/, /^(?:DEFAULT\\s+)/, /^(?:\\w+\\s+)/, /^(?:[^\\n]*)/, /^(?:class\\s+)/, /^(?:(\\w+)+((,\\s*\\w+)*))/, /^(?:[^\\n]*)/, /^(?:style\\s+)/, /^(?:(\\w+)+((,\\s*\\w+)*))/, /^(?:[^\\n]*)/, /^(?:accTitle\\s*:\\s*)/, /^(?:(?!\\n||)*[^\\n]*)/, /^(?:accDescr\\s*:\\s*)/, /^(?:(?!\\n||)*[^\\n]*)/, /^(?:accDescr\\s*\\{\\s*)/, /^(?:[\\}])/, /^(?:[^\\}]*)/, /^(?:end\\b\\s*)/, /^(?:\\(\\(\\()/, /^(?:\\)\\)\\))/, /^(?:[\\)]\\))/, /^(?:\\}\\})/, /^(?:\\})/, /^(?:\\(-)/, /^(?:-\\))/, /^(?:\\(\\()/, /^(?:\\]\\])/, /^(?:\\()/, /^(?:\\]\\))/, /^(?:\\\\\\])/, /^(?:\\/\\])/, /^(?:\\)\\])/, /^(?:[\\)])/, /^(?:\\]>)/, /^(?:[\\]])/, /^(?:-\\))/, /^(?:\\(-)/, /^(?:\\)\\))/, /^(?:\\))/, /^(?:\\(\\(\\()/, /^(?:\\(\\()/, /^(?:\\{\\{)/, /^(?:\\{)/, /^(?:>)/, /^(?:\\(\\[)/, /^(?:\\()/, /^(?:\\[\\[)/, /^(?:\\[\\|)/, /^(?:\\[\\()/, /^(?:\\)\\)\\))/, /^(?:\\[\\\\)/, /^(?:\\[\\/)/, /^(?:\\[\\\\)/, /^(?:\\[)/, /^(?:<\\[)/, /^(?:[^\\(\\[\\n\\-\\)\\{\\}\\s\\<\\>:]+)/, /^(?:$)/, /^(?:["][`])/, /^(?:["][`])/, /^(?:[^`"]+)/, /^(?:[`]["])/, /^(?:["])/, /^(?:["])/, /^(?:[^"]+)/, /^(?:["])/, /^(?:\\]>\\s*\\()/, /^(?:,?\\s*right\\s*)/, /^(?:,?\\s*left\\s*)/, /^(?:,?\\s*x\\s*)/, /^(?:,?\\s*y\\s*)/, /^(?:,?\\s*up\\s*)/, /^(?:,?\\s*down\\s*)/, /^(?:\\)\\s*)/, /^(?:\\s*[xo<]?--+[-xo>]\\s*)/, /^(?:\\s*[xo<]?==+[=xo>]\\s*)/, /^(?:\\s*[xo<]?-?\\.+-[xo>]?\\s*)/, /^(?:\\s*~~[\\~]+\\s*)/, /^(?:\\s*[xo<]?--\\s*)/, /^(?:\\s*[xo<]?==\\s*)/, /^(?:\\s*[xo<]?-\\.\\s*)/, /^(?:["][`])/, /^(?:["])/, /^(?:\\s*[xo<]?--+[-xo>]\\s*)/, /^(?:\\s*[xo<]?==+[=xo>]\\s*)/, /^(?:\\s*[xo<]?-?\\.+-[xo>]?\\s*)/, /^(?::\\d+)/],\n      conditions: { "STYLE_DEFINITION": { "rules": [29], "inclusive": false }, "STYLE_STMNT": { "rules": [28], "inclusive": false }, "CLASSDEFID": { "rules": [23], "inclusive": false }, "CLASSDEF": { "rules": [21, 22], "inclusive": false }, "CLASS_STYLE": { "rules": [26], "inclusive": false }, "CLASS": { "rules": [25], "inclusive": false }, "LLABEL": { "rules": [100, 101, 102, 103, 104], "inclusive": false }, "ARROW_DIR": { "rules": [86, 87, 88, 89, 90, 91, 92], "inclusive": false }, "BLOCK_ARROW": { "rules": [77, 82, 85], "inclusive": false }, "NODE": { "rules": [38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 78, 81], "inclusive": false }, "md_string": { "rules": [10, 11, 79, 80], "inclusive": false }, "space": { "rules": [], "inclusive": false }, "string": { "rules": [13, 14, 83, 84], "inclusive": false }, "acc_descr_multiline": { "rules": [35, 36], "inclusive": false }, "acc_descr": { "rules": [33], "inclusive": false }, "acc_title": { "rules": [31], "inclusive": false }, "INITIAL": { "rules": [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 12, 15, 16, 17, 18, 19, 20, 24, 27, 30, 32, 34, 37, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 93, 94, 95, 96, 97, 98, 99, 105], "inclusive": true } }\n    };\n    return lexer2;\n  }();\n  parser2.lexer = lexer;\n  function Parser() {\n    this.yy = {};\n  }\n  Parser.prototype = parser2;\n  parser2.Parser = Parser;\n  return new Parser();\n}();\nparser.parser = parser;\nconst parser$1 = parser;\nlet blockDatabase = {};\nlet edgeList = [];\nlet edgeCount = {};\nconst COLOR_KEYWORD = "color";\nconst FILL_KEYWORD = "fill";\nconst BG_FILL = "bgFill";\nconst STYLECLASS_SEP = ",";\nconst config = (0,_mermaid_6dc72991_js__WEBPACK_IMPORTED_MODULE_5__.c)();\nlet classes = {};\nconst sanitizeText = (txt) => _mermaid_6dc72991_js__WEBPACK_IMPORTED_MODULE_5__.e.sanitizeText(txt, config);\nconst addStyleClass = function(id, styleAttributes = "") {\n  if (classes[id] === void 0) {\n    classes[id] = { id, styles: [], textStyles: [] };\n  }\n  const foundClass = classes[id];\n  if (styleAttributes !== void 0 && styleAttributes !== null) {\n    styleAttributes.split(STYLECLASS_SEP).forEach((attrib) => {\n      const fixedAttrib = attrib.replace(/([^;]*);/, "$1").trim();\n      if (attrib.match(COLOR_KEYWORD)) {\n        const newStyle1 = fixedAttrib.replace(FILL_KEYWORD, BG_FILL);\n        const newStyle2 = newStyle1.replace(COLOR_KEYWORD, FILL_KEYWORD);\n        foundClass.textStyles.push(newStyle2);\n      }\n      foundClass.styles.push(fixedAttrib);\n    });\n  }\n};\nconst addStyle2Node = function(id, styles = "") {\n  const foundBlock = blockDatabase[id];\n  if (styles !== void 0 && styles !== null) {\n    foundBlock.styles = styles.split(STYLECLASS_SEP);\n  }\n};\nconst setCssClass = function(itemIds, cssClassName) {\n  itemIds.split(",").forEach(function(id) {\n    let foundBlock = blockDatabase[id];\n    if (foundBlock === void 0) {\n      const trimmedId = id.trim();\n      blockDatabase[trimmedId] = { id: trimmedId, type: "na", children: [] };\n      foundBlock = blockDatabase[trimmedId];\n    }\n    if (!foundBlock.classes) {\n      foundBlock.classes = [];\n    }\n    foundBlock.classes.push(cssClassName);\n  });\n};\nconst populateBlockDatabase = (_blockList, parent) => {\n  const blockList = _blockList.flat();\n  const children = [];\n  for (const block of blockList) {\n    if (block.label) {\n      block.label = sanitizeText(block.label);\n    }\n    if (block.type === "classDef") {\n      addStyleClass(block.id, block.css);\n      continue;\n    }\n    if (block.type === "applyClass") {\n      setCssClass(block.id, (block == null ? void 0 : block.styleClass) || "");\n      continue;\n    }\n    if (block.type === "applyStyles") {\n      if (block == null ? void 0 : block.stylesStr) {\n        addStyle2Node(block.id, block == null ? void 0 : block.stylesStr);\n      }\n      continue;\n    }\n    if (block.type === "column-setting") {\n      parent.columns = block.columns || -1;\n    } else if (block.type === "edge") {\n      if (edgeCount[block.id]) {\n        edgeCount[block.id]++;\n      } else {\n        edgeCount[block.id] = 1;\n      }\n      block.id = edgeCount[block.id] + "-" + block.id;\n      edgeList.push(block);\n    } else {\n      if (!block.label) {\n        if (block.type === "composite") {\n          block.label = "";\n        } else {\n          block.label = block.id;\n        }\n      }\n      const newBlock = !blockDatabase[block.id];\n      if (newBlock) {\n        blockDatabase[block.id] = block;\n      } else {\n        if (block.type !== "na") {\n          blockDatabase[block.id].type = block.type;\n        }\n        if (block.label !== block.id) {\n          blockDatabase[block.id].label = block.label;\n        }\n      }\n      if (block.children) {\n        populateBlockDatabase(block.children, block);\n      }\n      if (block.type === "space") {\n        const w = block.width || 1;\n        for (let j = 0; j < w; j++) {\n          const newBlock2 = (0,lodash_es_clone_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .A)(block);\n          newBlock2.id = newBlock2.id + "-" + j;\n          blockDatabase[newBlock2.id] = newBlock2;\n          children.push(newBlock2);\n        }\n      } else if (newBlock) {\n        children.push(block);\n      }\n    }\n  }\n  parent.children = children;\n};\nlet blocks = [];\nlet rootBlock = { id: "root", type: "composite", children: [], columns: -1 };\nconst clear = () => {\n  _mermaid_6dc72991_js__WEBPACK_IMPORTED_MODULE_5__.l.debug("Clear called");\n  (0,_mermaid_6dc72991_js__WEBPACK_IMPORTED_MODULE_5__.v)();\n  rootBlock = { id: "root", type: "composite", children: [], columns: -1 };\n  blockDatabase = { root: rootBlock };\n  blocks = [];\n  classes = {};\n  edgeList = [];\n  edgeCount = {};\n};\nfunction typeStr2Type(typeStr) {\n  _mermaid_6dc72991_js__WEBPACK_IMPORTED_MODULE_5__.l.debug("typeStr2Type", typeStr);\n  switch (typeStr) {\n    case "[]":\n      return "square";\n    case "()":\n      _mermaid_6dc72991_js__WEBPACK_IMPORTED_MODULE_5__.l.debug("we have a round");\n      return "round";\n    case "(())":\n      return "circle";\n    case ">]":\n      return "rect_left_inv_arrow";\n    case "{}":\n      return "diamond";\n    case "{{}}":\n      return "hexagon";\n    case "([])":\n      return "stadium";\n    case "[[]]":\n      return "subroutine";\n    case "[()]":\n      return "cylinder";\n    case "((()))":\n      return "doublecircle";\n    case "[//]":\n      return "lean_right";\n    case "[\\\\\\\\]":\n      return "lean_left";\n    case "[/\\\\]":\n      return "trapezoid";\n    case "[\\\\/]":\n      return "inv_trapezoid";\n    case "<[]>":\n      return "block_arrow";\n    default:\n      return "na";\n  }\n}\nfunction edgeTypeStr2Type(typeStr) {\n  _mermaid_6dc72991_js__WEBPACK_IMPORTED_MODULE_5__.l.debug("typeStr2Type", typeStr);\n  switch (typeStr) {\n    case "==":\n      return "thick";\n    default:\n      return "normal";\n  }\n}\nfunction edgeStrToEdgeData(typeStr) {\n  switch (typeStr.trim()) {\n    case "--x":\n      return "arrow_cross";\n    case "--o":\n      return "arrow_circle";\n    default:\n      return "arrow_point";\n  }\n}\nlet cnt = 0;\nconst generateId = () => {\n  cnt++;\n  return "id-" + Math.random().toString(36).substr(2, 12) + "-" + cnt;\n};\nconst setHierarchy = (block) => {\n  rootBlock.children = block;\n  populateBlockDatabase(block, rootBlock);\n  blocks = rootBlock.children;\n};\nconst getColumns = (blockId) => {\n  const block = blockDatabase[blockId];\n  if (!block) {\n    return -1;\n  }\n  if (block.columns) {\n    return block.columns;\n  }\n  if (!block.children) {\n    return -1;\n  }\n  return block.children.length;\n};\nconst getBlocksFlat = () => {\n  return [...Object.values(blockDatabase)];\n};\nconst getBlocks = () => {\n  return blocks || [];\n};\nconst getEdges = () => {\n  return edgeList;\n};\nconst getBlock = (id) => {\n  return blockDatabase[id];\n};\nconst setBlock = (block) => {\n  blockDatabase[block.id] = block;\n};\nconst getLogger = () => console;\nconst getClasses$1 = function() {\n  return classes;\n};\nconst db = {\n  getConfig: () => (0,_mermaid_6dc72991_js__WEBPACK_IMPORTED_MODULE_5__.F)().block,\n  typeStr2Type,\n  edgeTypeStr2Type,\n  edgeStrToEdgeData,\n  getLogger,\n  getBlocksFlat,\n  getBlocks,\n  getEdges,\n  setHierarchy,\n  getBlock,\n  setBlock,\n  getColumns,\n  getClasses: getClasses$1,\n  clear,\n  generateId\n};\nconst db$1 = db;\nconst fade = (color, opacity) => {\n  const channel = khroma__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .A;\n  const r = channel(color, "r");\n  const g = channel(color, "g");\n  const b = channel(color, "b");\n  return khroma__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .A(r, g, b, opacity);\n};\nconst getStyles = (options) => `.label {\n    font-family: ${options.fontFamily};\n    color: ${options.nodeTextColor || options.textColor};\n  }\n  .cluster-label text {\n    fill: ${options.titleColor};\n  }\n  .cluster-label span,p {\n    color: ${options.titleColor};\n  }\n\n\n\n  .label text,span,p {\n    fill: ${options.nodeTextColor || options.textColor};\n    color: ${options.nodeTextColor || options.textColor};\n  }\n\n  .node rect,\n  .node circle,\n  .node ellipse,\n  .node polygon,\n  .node path {\n    fill: ${options.mainBkg};\n    stroke: ${options.nodeBorder};\n    stroke-width: 1px;\n  }\n  .flowchart-label text {\n    text-anchor: middle;\n  }\n  // .flowchart-label .text-outer-tspan {\n  //   text-anchor: middle;\n  // }\n  // .flowchart-label .text-inner-tspan {\n  //   text-anchor: start;\n  // }\n\n  .node .label {\n    text-align: center;\n  }\n  .node.clickable {\n    cursor: pointer;\n  }\n\n  .arrowheadPath {\n    fill: ${options.arrowheadColor};\n  }\n\n  .edgePath .path {\n    stroke: ${options.lineColor};\n    stroke-width: 2.0px;\n  }\n\n  .flowchart-link {\n    stroke: ${options.lineColor};\n    fill: none;\n  }\n\n  .edgeLabel {\n    background-color: ${options.edgeLabelBackground};\n    rect {\n      opacity: 0.5;\n      background-color: ${options.edgeLabelBackground};\n      fill: ${options.edgeLabelBackground};\n    }\n    text-align: center;\n  }\n\n  /* For html labels only */\n  .labelBkg {\n    background-color: ${fade(options.edgeLabelBackground, 0.5)};\n    // background-color:\n  }\n\n  .node .cluster {\n    // fill: ${fade(options.mainBkg, 0.5)};\n    fill: ${fade(options.clusterBkg, 0.5)};\n    stroke: ${fade(options.clusterBorder, 0.2)};\n    box-shadow: rgba(50, 50, 93, 0.25) 0px 13px 27px -5px, rgba(0, 0, 0, 0.3) 0px 8px 16px -8px;\n    stroke-width: 1px;\n  }\n\n  .cluster text {\n    fill: ${options.titleColor};\n  }\n\n  .cluster span,p {\n    color: ${options.titleColor};\n  }\n  /* .cluster div {\n    color: ${options.titleColor};\n  } */\n\n  div.mermaidTooltip {\n    position: absolute;\n    text-align: center;\n    max-width: 200px;\n    padding: 2px;\n    font-family: ${options.fontFamily};\n    font-size: 12px;\n    background: ${options.tertiaryColor};\n    border: 1px solid ${options.border2};\n    border-radius: 2px;\n    pointer-events: none;\n    z-index: 100;\n  }\n\n  .flowchartTitleText {\n    text-anchor: middle;\n    font-size: 18px;\n    fill: ${options.textColor};\n  }\n`;\nconst flowStyles = getStyles;\nfunction getNodeFromBlock(block, db2, positioned = false) {\n  var _a2, _b2, _c;\n  const vertex = block;\n  let classStr = "default";\n  if ((((_a2 = vertex == null ? void 0 : vertex.classes) == null ? void 0 : _a2.length) || 0) > 0) {\n    classStr = ((vertex == null ? void 0 : vertex.classes) || []).join(" ");\n  }\n  classStr = classStr + " flowchart-label";\n  let radius = 0;\n  let shape = "";\n  let padding2;\n  switch (vertex.type) {\n    case "round":\n      radius = 5;\n      shape = "rect";\n      break;\n    case "composite":\n      radius = 0;\n      shape = "composite";\n      padding2 = 0;\n      break;\n    case "square":\n      shape = "rect";\n      break;\n    case "diamond":\n      shape = "question";\n      break;\n    case "hexagon":\n      shape = "hexagon";\n      break;\n    case "block_arrow":\n      shape = "block_arrow";\n      break;\n    case "odd":\n      shape = "rect_left_inv_arrow";\n      break;\n    case "lean_right":\n      shape = "lean_right";\n      break;\n    case "lean_left":\n      shape = "lean_left";\n      break;\n    case "trapezoid":\n      shape = "trapezoid";\n      break;\n    case "inv_trapezoid":\n      shape = "inv_trapezoid";\n      break;\n    case "rect_left_inv_arrow":\n      shape = "rect_left_inv_arrow";\n      break;\n    case "circle":\n      shape = "circle";\n      break;\n    case "ellipse":\n      shape = "ellipse";\n      break;\n    case "stadium":\n      shape = "stadium";\n      break;\n    case "subroutine":\n      shape = "subroutine";\n      break;\n    case "cylinder":\n      shape = "cylinder";\n      break;\n    case "group":\n      shape = "rect";\n      break;\n    case "doublecircle":\n      shape = "doublecircle";\n      break;\n    default:\n      shape = "rect";\n  }\n  const styles = (0,_mermaid_6dc72991_js__WEBPACK_IMPORTED_MODULE_5__.k)((vertex == null ? void 0 : vertex.styles) || []);\n  const vertexText = vertex.label;\n  const bounds = vertex.size || { width: 0, height: 0, x: 0, y: 0 };\n  const node = {\n    labelStyle: styles.labelStyle,\n    shape,\n    labelText: vertexText,\n    rx: radius,\n    ry: radius,\n    class: classStr,\n    style: styles.style,\n    id: vertex.id,\n    directions: vertex.directions,\n    width: bounds.width,\n    height: bounds.height,\n    x: bounds.x,\n    y: bounds.y,\n    positioned,\n    intersect: void 0,\n    type: vertex.type,\n    padding: padding2 ?? (((_c = (_b2 = (0,_mermaid_6dc72991_js__WEBPACK_IMPORTED_MODULE_5__.F)()) == null ? void 0 : _b2.block) == null ? void 0 : _c.padding) || 0)\n  };\n  return node;\n}\nasync function calculateBlockSize(elem, block, db2) {\n  const node = getNodeFromBlock(block, db2, false);\n  if (node.type === "group") {\n    return;\n  }\n  const nodeEl = await (0,_edges_066a5561_js__WEBPACK_IMPORTED_MODULE_9__.e)(elem, node);\n  const boundingBox = nodeEl.node().getBBox();\n  const obj = db2.getBlock(node.id);\n  obj.size = { width: boundingBox.width, height: boundingBox.height, x: 0, y: 0, node: nodeEl };\n  db2.setBlock(obj);\n  nodeEl.remove();\n}\nasync function insertBlockPositioned(elem, block, db2) {\n  const node = getNodeFromBlock(block, db2, true);\n  const obj = db2.getBlock(node.id);\n  if (obj.type !== "space") {\n    await (0,_edges_066a5561_js__WEBPACK_IMPORTED_MODULE_9__.e)(elem, node);\n    block.intersect = node == null ? void 0 : node.intersect;\n    (0,_edges_066a5561_js__WEBPACK_IMPORTED_MODULE_9__.p)(node);\n  }\n}\nasync function performOperations(elem, blocks2, db2, operation) {\n  for (const block of blocks2) {\n    await operation(elem, block, db2);\n    if (block.children) {\n      await performOperations(elem, block.children, db2, operation);\n    }\n  }\n}\nasync function calculateBlockSizes(elem, blocks2, db2) {\n  await performOperations(elem, blocks2, db2, calculateBlockSize);\n}\nasync function insertBlocks(elem, blocks2, db2) {\n  await performOperations(elem, blocks2, db2, insertBlockPositioned);\n}\nasync function insertEdges(elem, edges, blocks2, db2, id) {\n  const g = new dagre_d3_es_src_graphlib_index_js__WEBPACK_IMPORTED_MODULE_0__/* .Graph */ .T({\n    multigraph: true,\n    compound: true\n  });\n  g.setGraph({\n    rankdir: "TB",\n    nodesep: 10,\n    ranksep: 10,\n    marginx: 8,\n    marginy: 8\n  });\n  for (const block of blocks2) {\n    if (block.size) {\n      g.setNode(block.id, {\n        width: block.size.width,\n        height: block.size.height,\n        intersect: block.intersect\n      });\n    }\n  }\n  for (const edge of edges) {\n    if (edge.start && edge.end) {\n      const startBlock = db2.getBlock(edge.start);\n      const endBlock = db2.getBlock(edge.end);\n      if ((startBlock == null ? void 0 : startBlock.size) && (endBlock == null ? void 0 : endBlock.size)) {\n        const start = startBlock.size;\n        const end = endBlock.size;\n        const points = [\n          { x: start.x, y: start.y },\n          { x: start.x + (end.x - start.x) / 2, y: start.y + (end.y - start.y) / 2 },\n          { x: end.x, y: end.y }\n        ];\n        await (0,_edges_066a5561_js__WEBPACK_IMPORTED_MODULE_9__.h)(\n          elem,\n          { v: edge.start, w: edge.end, name: edge.id },\n          {\n            ...edge,\n            arrowTypeEnd: edge.arrowTypeEnd,\n            arrowTypeStart: edge.arrowTypeStart,\n            points,\n            classes: "edge-thickness-normal edge-pattern-solid flowchart-link LS-a1 LE-b1"\n          },\n          void 0,\n          "block",\n          g,\n          id\n        );\n        if (edge.label) {\n          await (0,_edges_066a5561_js__WEBPACK_IMPORTED_MODULE_9__.f)(elem, {\n            ...edge,\n            label: edge.label,\n            labelStyle: "stroke: #333; stroke-width: 1.5px;fill:none;",\n            arrowTypeEnd: edge.arrowTypeEnd,\n            arrowTypeStart: edge.arrowTypeStart,\n            points,\n            classes: "edge-thickness-normal edge-pattern-solid flowchart-link LS-a1 LE-b1"\n          });\n          await (0,_edges_066a5561_js__WEBPACK_IMPORTED_MODULE_9__.j)(\n            { ...edge, x: points[1].x, y: points[1].y },\n            {\n              originalPath: points\n            }\n          );\n        }\n      }\n    }\n  }\n}\nconst padding = ((_b = (_a = (0,_mermaid_6dc72991_js__WEBPACK_IMPORTED_MODULE_5__.c)()) == null ? void 0 : _a.block) == null ? void 0 : _b.padding) || 8;\nfunction calculateBlockPosition(columns, position) {\n  if (columns === 0 || !Number.isInteger(columns)) {\n    throw new Error("Columns must be an integer !== 0.");\n  }\n  if (position < 0 || !Number.isInteger(position)) {\n    throw new Error("Position must be a non-negative integer." + position);\n  }\n  if (columns < 0) {\n    return { px: position, py: 0 };\n  }\n  if (columns === 1) {\n    return { px: 0, py: position };\n  }\n  const px = position % columns;\n  const py = Math.floor(position / columns);\n  return { px, py };\n}\nconst getMaxChildSize = (block) => {\n  let maxWidth = 0;\n  let maxHeight = 0;\n  for (const child of block.children) {\n    const { width, height, x, y } = child.size || { width: 0, height: 0, x: 0, y: 0 };\n    _mermaid_6dc72991_js__WEBPACK_IMPORTED_MODULE_5__.l.debug(\n      "getMaxChildSize abc95 child:",\n      child.id,\n      "width:",\n      width,\n      "height:",\n      height,\n      "x:",\n      x,\n      "y:",\n      y,\n      child.type\n    );\n    if (child.type === "space") {\n      continue;\n    }\n    if (width > maxWidth) {\n      maxWidth = width / (block.widthInColumns || 1);\n    }\n    if (height > maxHeight) {\n      maxHeight = height;\n    }\n  }\n  return { width: maxWidth, height: maxHeight };\n};\nfunction setBlockSizes(block, db2, siblingWidth = 0, siblingHeight = 0) {\n  var _a2, _b2, _c, _d, _e, _f, _g, _h, _i, _j, _k;\n  _mermaid_6dc72991_js__WEBPACK_IMPORTED_MODULE_5__.l.debug(\n    "setBlockSizes abc95 (start)",\n    block.id,\n    (_a2 = block == null ? void 0 : block.size) == null ? void 0 : _a2.x,\n    "block width =",\n    block == null ? void 0 : block.size,\n    "sieblingWidth",\n    siblingWidth\n  );\n  if (!((_b2 = block == null ? void 0 : block.size) == null ? void 0 : _b2.width)) {\n    block.size = {\n      width: siblingWidth,\n      height: siblingHeight,\n      x: 0,\n      y: 0\n    };\n  }\n  let maxWidth = 0;\n  let maxHeight = 0;\n  if (((_c = block.children) == null ? void 0 : _c.length) > 0) {\n    for (const child of block.children) {\n      setBlockSizes(child, db2);\n    }\n    const childSize = getMaxChildSize(block);\n    maxWidth = childSize.width;\n    maxHeight = childSize.height;\n    _mermaid_6dc72991_js__WEBPACK_IMPORTED_MODULE_5__.l.debug("setBlockSizes abc95 maxWidth of", block.id, ":s children is ", maxWidth, maxHeight);\n    for (const child of block.children) {\n      if (child.size) {\n        _mermaid_6dc72991_js__WEBPACK_IMPORTED_MODULE_5__.l.debug(\n          `abc95 Setting size of children of ${block.id} id=${child.id} ${maxWidth} ${maxHeight} ${child.size}`\n        );\n        child.size.width = maxWidth * (child.widthInColumns || 1) + padding * ((child.widthInColumns || 1) - 1);\n        child.size.height = maxHeight;\n        child.size.x = 0;\n        child.size.y = 0;\n        _mermaid_6dc72991_js__WEBPACK_IMPORTED_MODULE_5__.l.debug(\n          `abc95 updating size of ${block.id} children child:${child.id} maxWidth:${maxWidth} maxHeight:${maxHeight}`\n        );\n      }\n    }\n    for (const child of block.children) {\n      setBlockSizes(child, db2, maxWidth, maxHeight);\n    }\n    const columns = block.columns || -1;\n    let numItems = 0;\n    for (const child of block.children) {\n      numItems += child.widthInColumns || 1;\n    }\n    let xSize = block.children.length;\n    if (columns > 0 && columns < numItems) {\n      xSize = columns;\n    }\n    block.widthInColumns || 1;\n    const ySize = Math.ceil(numItems / xSize);\n    let width = xSize * (maxWidth + padding) + padding;\n    let height = ySize * (maxHeight + padding) + padding;\n    if (width < siblingWidth) {\n      _mermaid_6dc72991_js__WEBPACK_IMPORTED_MODULE_5__.l.debug(\n        `Detected to small siebling: abc95 ${block.id} sieblingWidth ${siblingWidth} sieblingHeight ${siblingHeight} width ${width}`\n      );\n      width = siblingWidth;\n      height = siblingHeight;\n      const childWidth = (siblingWidth - xSize * padding - padding) / xSize;\n      const childHeight = (siblingHeight - ySize * padding - padding) / ySize;\n      _mermaid_6dc72991_js__WEBPACK_IMPORTED_MODULE_5__.l.debug("Size indata abc88", block.id, "childWidth", childWidth, "maxWidth", maxWidth);\n      _mermaid_6dc72991_js__WEBPACK_IMPORTED_MODULE_5__.l.debug("Size indata abc88", block.id, "childHeight", childHeight, "maxHeight", maxHeight);\n      _mermaid_6dc72991_js__WEBPACK_IMPORTED_MODULE_5__.l.debug("Size indata abc88 xSize", xSize, "padding", padding);\n      for (const child of block.children) {\n        if (child.size) {\n          child.size.width = childWidth;\n          child.size.height = childHeight;\n          child.size.x = 0;\n          child.size.y = 0;\n        }\n      }\n    }\n    _mermaid_6dc72991_js__WEBPACK_IMPORTED_MODULE_5__.l.debug(\n      `abc95 (finale calc) ${block.id} xSize ${xSize} ySize ${ySize} columns ${columns}${block.children.length} width=${Math.max(width, ((_d = block.size) == null ? void 0 : _d.width) || 0)}`\n    );\n    if (width < (((_e = block == null ? void 0 : block.size) == null ? void 0 : _e.width) || 0)) {\n      width = ((_f = block == null ? void 0 : block.size) == null ? void 0 : _f.width) || 0;\n      const num = columns > 0 ? Math.min(block.children.length, columns) : block.children.length;\n      if (num > 0) {\n        const childWidth = (width - num * padding - padding) / num;\n        _mermaid_6dc72991_js__WEBPACK_IMPORTED_MODULE_5__.l.debug("abc95 (growing to fit) width", block.id, width, (_g = block.size) == null ? void 0 : _g.width, childWidth);\n        for (const child of block.children) {\n          if (child.size) {\n            child.size.width = childWidth;\n          }\n        }\n      }\n    }\n    block.size = {\n      width,\n      height,\n      x: 0,\n      y: 0\n    };\n  }\n  _mermaid_6dc72991_js__WEBPACK_IMPORTED_MODULE_5__.l.debug(\n    "setBlockSizes abc94 (done)",\n    block.id,\n    (_h = block == null ? void 0 : block.size) == null ? void 0 : _h.x,\n    (_i = block == null ? void 0 : block.size) == null ? void 0 : _i.width,\n    (_j = block == null ? void 0 : block.size) == null ? void 0 : _j.y,\n    (_k = block == null ? void 0 : block.size) == null ? void 0 : _k.height\n  );\n}\nfunction layoutBlocks(block, db2) {\n  var _a2, _b2, _c, _d, _e, _f, _g, _h, _i, _j, _k, _l, _m, _n, _o, _p, _q;\n  _mermaid_6dc72991_js__WEBPACK_IMPORTED_MODULE_5__.l.debug(\n    `abc85 layout blocks (=>layoutBlocks) ${block.id} x: ${(_a2 = block == null ? void 0 : block.size) == null ? void 0 : _a2.x} y: ${(_b2 = block == null ? void 0 : block.size) == null ? void 0 : _b2.y} width: ${(_c = block == null ? void 0 : block.size) == null ? void 0 : _c.width}`\n  );\n  const columns = block.columns || -1;\n  _mermaid_6dc72991_js__WEBPACK_IMPORTED_MODULE_5__.l.debug("layoutBlocks columns abc95", block.id, "=>", columns, block);\n  if (block.children && // find max width of children\n  block.children.length > 0) {\n    const width = ((_e = (_d = block == null ? void 0 : block.children[0]) == null ? void 0 : _d.size) == null ? void 0 : _e.width) || 0;\n    const widthOfChildren = block.children.length * width + (block.children.length - 1) * padding;\n    _mermaid_6dc72991_js__WEBPACK_IMPORTED_MODULE_5__.l.debug("widthOfChildren 88", widthOfChildren, "posX");\n    let columnPos = 0;\n    _mermaid_6dc72991_js__WEBPACK_IMPORTED_MODULE_5__.l.debug("abc91 block?.size?.x", block.id, (_f = block == null ? void 0 : block.size) == null ? void 0 : _f.x);\n    let startingPosX = ((_g = block == null ? void 0 : block.size) == null ? void 0 : _g.x) ? ((_h = block == null ? void 0 : block.size) == null ? void 0 : _h.x) + (-((_i = block == null ? void 0 : block.size) == null ? void 0 : _i.width) / 2 || 0) : -padding;\n    let rowPos = 0;\n    for (const child of block.children) {\n      const parent = block;\n      if (!child.size) {\n        continue;\n      }\n      const { width: width2, height } = child.size;\n      const { px, py } = calculateBlockPosition(columns, columnPos);\n      if (py != rowPos) {\n        rowPos = py;\n        startingPosX = ((_j = block == null ? void 0 : block.size) == null ? void 0 : _j.x) ? ((_k = block == null ? void 0 : block.size) == null ? void 0 : _k.x) + (-((_l = block == null ? void 0 : block.size) == null ? void 0 : _l.width) / 2 || 0) : -padding;\n        _mermaid_6dc72991_js__WEBPACK_IMPORTED_MODULE_5__.l.debug("New row in layout for block", block.id, " and child ", child.id, rowPos);\n      }\n      _mermaid_6dc72991_js__WEBPACK_IMPORTED_MODULE_5__.l.debug(\n        `abc89 layout blocks (child) id: ${child.id} Pos: ${columnPos} (px, py) ${px},${py} (${(_m = parent == null ? void 0 : parent.size) == null ? void 0 : _m.x},${(_n = parent == null ? void 0 : parent.size) == null ? void 0 : _n.y}) parent: ${parent.id} width: ${width2}${padding}`\n      );\n      if (parent.size) {\n        const halfWidth = width2 / 2;\n        child.size.x = startingPosX + padding + halfWidth;\n        _mermaid_6dc72991_js__WEBPACK_IMPORTED_MODULE_5__.l.debug(\n          `abc91 layout blocks (calc) px, pyid:${child.id} startingPos=X${startingPosX} new startingPosX${child.size.x} ${halfWidth} padding=${padding} width=${width2} halfWidth=${halfWidth} => x:${child.size.x} y:${child.size.y} ${child.widthInColumns} (width * (child?.w || 1)) / 2 ${width2 * ((child == null ? void 0 : child.widthInColumns) || 1) / 2}`\n        );\n        startingPosX = child.size.x + halfWidth;\n        child.size.y = parent.size.y - parent.size.height / 2 + py * (height + padding) + height / 2 + padding;\n        _mermaid_6dc72991_js__WEBPACK_IMPORTED_MODULE_5__.l.debug(\n          `abc88 layout blocks (calc) px, pyid:${child.id}startingPosX${startingPosX}${padding}${halfWidth}=>x:${child.size.x}y:${child.size.y}${child.widthInColumns}(width * (child?.w || 1)) / 2${width2 * ((child == null ? void 0 : child.widthInColumns) || 1) / 2}`\n        );\n      }\n      if (child.children) {\n        layoutBlocks(child);\n      }\n      columnPos += (child == null ? void 0 : child.widthInColumns) || 1;\n      _mermaid_6dc72991_js__WEBPACK_IMPORTED_MODULE_5__.l.debug("abc88 columnsPos", child, columnPos);\n    }\n  }\n  _mermaid_6dc72991_js__WEBPACK_IMPORTED_MODULE_5__.l.debug(\n    `layout blocks (<==layoutBlocks) ${block.id} x: ${(_o = block == null ? void 0 : block.size) == null ? void 0 : _o.x} y: ${(_p = block == null ? void 0 : block.size) == null ? void 0 : _p.y} width: ${(_q = block == null ? void 0 : block.size) == null ? void 0 : _q.width}`\n  );\n}\nfunction findBounds(block, { minX, minY, maxX, maxY } = { minX: 0, minY: 0, maxX: 0, maxY: 0 }) {\n  if (block.size && block.id !== "root") {\n    const { x, y, width, height } = block.size;\n    if (x - width / 2 < minX) {\n      minX = x - width / 2;\n    }\n    if (y - height / 2 < minY) {\n      minY = y - height / 2;\n    }\n    if (x + width / 2 > maxX) {\n      maxX = x + width / 2;\n    }\n    if (y + height / 2 > maxY) {\n      maxY = y + height / 2;\n    }\n  }\n  if (block.children) {\n    for (const child of block.children) {\n      ({ minX, minY, maxX, maxY } = findBounds(child, { minX, minY, maxX, maxY }));\n    }\n  }\n  return { minX, minY, maxX, maxY };\n}\nfunction layout(db2) {\n  const root = db2.getBlock("root");\n  if (!root) {\n    return;\n  }\n  setBlockSizes(root, db2, 0, 0);\n  layoutBlocks(root);\n  _mermaid_6dc72991_js__WEBPACK_IMPORTED_MODULE_5__.l.debug("getBlocks", JSON.stringify(root, null, 2));\n  const { minX, minY, maxX, maxY } = findBounds(root);\n  const height = maxY - minY;\n  const width = maxX - minX;\n  return { x: minX, y: minY, width, height };\n}\nconst getClasses = function(text, diagObj) {\n  return diagObj.db.getClasses();\n};\nconst draw = async function(text, id, _version, diagObj) {\n  const { securityLevel, block: conf } = (0,_mermaid_6dc72991_js__WEBPACK_IMPORTED_MODULE_5__.F)();\n  const db2 = diagObj.db;\n  let sandboxElement;\n  if (securityLevel === "sandbox") {\n    sandboxElement = (0,d3__WEBPACK_IMPORTED_MODULE_1__/* .select */ .Ltv)("#i" + id);\n  }\n  const root = securityLevel === "sandbox" ? (0,d3__WEBPACK_IMPORTED_MODULE_1__/* .select */ .Ltv)(sandboxElement.nodes()[0].contentDocument.body) : (0,d3__WEBPACK_IMPORTED_MODULE_1__/* .select */ .Ltv)("body");\n  const svg = securityLevel === "sandbox" ? root.select(`[id="${id}"]`) : (0,d3__WEBPACK_IMPORTED_MODULE_1__/* .select */ .Ltv)(`[id="${id}"]`);\n  const markers = ["point", "circle", "cross"];\n  (0,_edges_066a5561_js__WEBPACK_IMPORTED_MODULE_9__.a)(svg, markers, diagObj.type, id);\n  const bl = db2.getBlocks();\n  const blArr = db2.getBlocksFlat();\n  const edges = db2.getEdges();\n  const nodes = svg.insert("g").attr("class", "block");\n  await calculateBlockSizes(nodes, bl, db2);\n  const bounds = layout(db2);\n  await insertBlocks(nodes, bl, db2);\n  await insertEdges(nodes, edges, blArr, db2, id);\n  if (bounds) {\n    const bounds2 = bounds;\n    const magicFactor = Math.max(1, Math.round(0.125 * (bounds2.width / bounds2.height)));\n    const height = bounds2.height + magicFactor + 10;\n    const width = bounds2.width + 10;\n    const { useMaxWidth } = conf;\n    (0,_mermaid_6dc72991_js__WEBPACK_IMPORTED_MODULE_5__.i)(svg, height, width, !!useMaxWidth);\n    _mermaid_6dc72991_js__WEBPACK_IMPORTED_MODULE_5__.l.debug("Here Bounds", bounds, bounds2);\n    svg.attr(\n      "viewBox",\n      `${bounds2.x - 5} ${bounds2.y - 5} ${bounds2.width + 10} ${bounds2.height + 10}`\n    );\n  }\n  (0,d3__WEBPACK_IMPORTED_MODULE_1__/* .scaleOrdinal */ .UMr)(d3__WEBPACK_IMPORTED_MODULE_1__/* .schemeTableau10 */ .zt);\n};\nconst renderer = {\n  draw,\n  getClasses\n};\nconst diagram = {\n  parser: parser$1,\n  db: db$1,\n  renderer,\n  styles: flowStyles\n};\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0Isa0JBQWtCO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0I7QUFDaEI7QUFDQTtBQUNBLGdCQUFnQjtBQUNoQjtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsNERBQTREO0FBQzVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFD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LHlCQUF5QjtBQUNuQztBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLDZCQUE2QixFQUFFLHVEQUFXO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQixxREFBTTtBQUMzQjtBQUNBLDZDQUE2QyxxREFBTSxtREFBbUQscURBQU07QUFDNUcsZ0VBQWdFLEdBQUcsT0FBTyxxREFBTSxTQUFTLEdBQUc7QUFDNUY7QUFDQSxFQUFFLHFEQUFhO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLGNBQWM7QUFDMUIsSUFBSSx1REFBZ0I7QUFDcEIsSUFBSSxtREFBRztBQUNQO0FBQ0E7QUFDQSxTQUFTLGVBQWUsRUFBRSxlQUFlLEVBQUUsb0JBQW9CLEVBQUUsb0JBQW9CO0FBQ3JGO0FBQ0E7QUFDQSxFQUFFLDJEQUFZLENBQUMseURBQWU7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ2FudHQtb24ta2ludG9uZS8uL25vZGVfbW9kdWxlcy9tZXJtYWlkL2Rpc3QvYmxvY2tEaWFncmFtLTlmNGE2ODY1LmpzPzljNzkiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIF9hLCBfYjtcbmltcG9ydCB7IGMgYXMgZ2V0Q29uZmlnLCBGIGFzIGdldENvbmZpZyQxLCBsIGFzIGxvZywgdiBhcyBjbGVhciQxLCBlIGFzIGNvbW1vbiwgayBhcyBnZXRTdHlsZXNGcm9tQXJyYXksIGkgYXMgY29uZmlndXJlU3ZnU2l6ZSB9IGZyb20gXCIuL21lcm1haWQtNmRjNzI5OTEuanNcIjtcbmltcG9ydCBjbG9uZSBmcm9tIFwibG9kYXNoLWVzL2Nsb25lLmpzXCI7XG5pbXBvcnQgKiBhcyBraHJvbWEgZnJvbSBcImtocm9tYVwiO1xuaW1wb3J0IHsgaCBhcyBpbnNlcnRFZGdlLCBmIGFzIGluc2VydEVkZ2VMYWJlbCwgaiBhcyBwb3NpdGlvbkVkZ2VMYWJlbCwgZSBhcyBpbnNlcnROb2RlLCBwIGFzIHBvc2l0aW9uTm9kZSwgYSBhcyBpbnNlcnRNYXJrZXJzIH0gZnJvbSBcIi4vZWRnZXMtMDY2YTU1NjEuanNcIjtcbmltcG9ydCAqIGFzIGdyYXBobGliIGZyb20gXCJkYWdyZS1kMy1lcy9zcmMvZ3JhcGhsaWIvaW5kZXguanNcIjtcbmltcG9ydCB7IHNlbGVjdCwgc2NhbGVPcmRpbmFsLCBzY2hlbWVUYWJsZWF1MTAgfSBmcm9tIFwiZDNcIjtcbmltcG9ydCBcInRzLWRlZGVudFwiO1xuaW1wb3J0IFwiZGF5anNcIjtcbmltcG9ydCBcIkBicmFpbnRyZWUvc2FuaXRpemUtdXJsXCI7XG5pbXBvcnQgXCJkb21wdXJpZnlcIjtcbmltcG9ydCBcImxvZGFzaC1lcy9tZW1vaXplLmpzXCI7XG5pbXBvcnQgXCJsb2Rhc2gtZXMvbWVyZ2UuanNcIjtcbmltcG9ydCBcInN0eWxpc1wiO1xuaW1wb3J0IFwibG9kYXNoLWVzL2lzRW1wdHkuanNcIjtcbmltcG9ydCBcIi4vY3JlYXRlVGV4dC1jYTBjNTIxNi5qc1wiO1xuaW1wb3J0IFwibWRhc3QtdXRpbC1mcm9tLW1hcmtkb3duXCI7XG52YXIgcGFyc2VyID0gZnVuY3Rpb24oKSB7XG4gIHZhciBvID0gZnVuY3Rpb24oaywgdiwgbzIsIGwpIHtcbiAgICBmb3IgKG8yID0gbzIgfHwge30sIGwgPSBrLmxlbmd0aDsgbC0tOyBvMltrW2xdXSA9IHYpXG4gICAgICA7XG4gICAgcmV0dXJuIG8yO1xuICB9LCAkVjAgPSBbMSwgN10sICRWMSA9IFsxLCAxM10sICRWMiA9IFsxLCAxNF0sICRWMyA9IFsxLCAxNV0sICRWNCA9IFsxLCAxOV0sICRWNSA9IFsxLCAxNl0sICRWNiA9IFsxLCAxN10sICRWNyA9IFsxLCAxOF0sICRWOCA9IFs4LCAzMF0sICRWOSA9IFs4LCAyMSwgMjgsIDI5LCAzMCwgMzEsIDMyLCA0MCwgNDQsIDQ3XSwgJFZhID0gWzEsIDIzXSwgJFZiID0gWzEsIDI0XSwgJFZjID0gWzgsIDE1LCAxNiwgMjEsIDI4LCAyOSwgMzAsIDMxLCAzMiwgNDAsIDQ0LCA0N10sICRWZCA9IFs4LCAxNSwgMTYsIDIxLCAyNywgMjgsIDI5LCAzMCwgMzEsIDMyLCA0MCwgNDQsIDQ3XSwgJFZlID0gWzEsIDQ5XTtcbiAgdmFyIHBhcnNlcjIgPSB7XG4gICAgdHJhY2U6IGZ1bmN0aW9uIHRyYWNlKCkge1xuICAgIH0sXG4gICAgeXk6IHt9LFxuICAgIHN5bWJvbHNfOiB7IFwiZXJyb3JcIjogMiwgXCJzcGFjZUxpbmVzXCI6IDMsIFwiU1BBQ0VMSU5FXCI6IDQsIFwiTkxcIjogNSwgXCJzZXBhcmF0b3JcIjogNiwgXCJTUEFDRVwiOiA3LCBcIkVPRlwiOiA4LCBcInN0YXJ0XCI6IDksIFwiQkxPQ0tfRElBR1JBTV9LRVlcIjogMTAsIFwiZG9jdW1lbnRcIjogMTEsIFwic3RvcFwiOiAxMiwgXCJzdGF0ZW1lbnRcIjogMTMsIFwibGlua1wiOiAxNCwgXCJMSU5LXCI6IDE1LCBcIlNUQVJUX0xJTktcIjogMTYsIFwiTElOS19MQUJFTFwiOiAxNywgXCJTVFJcIjogMTgsIFwibm9kZVN0YXRlbWVudFwiOiAxOSwgXCJjb2x1bW5zU3RhdGVtZW50XCI6IDIwLCBcIlNQQUNFX0JMT0NLXCI6IDIxLCBcImJsb2NrU3RhdGVtZW50XCI6IDIyLCBcImNsYXNzRGVmU3RhdGVtZW50XCI6IDIzLCBcImNzc0NsYXNzU3RhdGVtZW50XCI6IDI0LCBcInN0eWxlU3RhdGVtZW50XCI6IDI1LCBcIm5vZGVcIjogMjYsIFwiU0laRVwiOiAyNywgXCJDT0xVTU5TXCI6IDI4LCBcImlkLWJsb2NrXCI6IDI5LCBcImVuZFwiOiAzMCwgXCJibG9ja1wiOiAzMSwgXCJOT0RFX0lEXCI6IDMyLCBcIm5vZGVTaGFwZU5MYWJlbFwiOiAzMywgXCJkaXJMaXN0XCI6IDM0LCBcIkRJUlwiOiAzNSwgXCJOT0RFX0RTVEFSVFwiOiAzNiwgXCJOT0RFX0RFTkRcIjogMzcsIFwiQkxPQ0tfQVJST1dfU1RBUlRcIjogMzgsIFwiQkxPQ0tfQVJST1dfRU5EXCI6IDM5LCBcImNsYXNzRGVmXCI6IDQwLCBcIkNMQVNTREVGX0lEXCI6IDQxLCBcIkNMQVNTREVGX1NUWUxFT1BUU1wiOiA0MiwgXCJERUZBVUxUXCI6IDQzLCBcImNsYXNzXCI6IDQ0LCBcIkNMQVNTRU5USVRZX0lEU1wiOiA0NSwgXCJTVFlMRUNMQVNTXCI6IDQ2LCBcInN0eWxlXCI6IDQ3LCBcIlNUWUxFX0VOVElUWV9JRFNcIjogNDgsIFwiU1RZTEVfREVGSU5JVElPTl9EQVRBXCI6IDQ5LCBcIiRhY2NlcHRcIjogMCwgXCIkZW5kXCI6IDEgfSxcbiAgICB0ZXJtaW5hbHNfOiB7IDI6IFwiZXJyb3JcIiwgNDogXCJTUEFDRUxJTkVcIiwgNTogXCJOTFwiLCA3OiBcIlNQQUNFXCIsIDg6IFwiRU9GXCIsIDEwOiBcIkJMT0NLX0RJQUdSQU1fS0VZXCIsIDE1OiBcIkxJTktcIiwgMTY6IFwiU1RBUlRfTElOS1wiLCAxNzogXCJMSU5LX0xBQkVMXCIsIDE4OiBcIlNUUlwiLCAyMTogXCJTUEFDRV9CTE9DS1wiLCAyNzogXCJTSVpFXCIsIDI4OiBcIkNPTFVNTlNcIiwgMjk6IFwiaWQtYmxvY2tcIiwgMzA6IFwiZW5kXCIsIDMxOiBcImJsb2NrXCIsIDMyOiBcIk5PREVfSURcIiwgMzU6IFwiRElSXCIsIDM2OiBcIk5PREVfRFNUQVJUXCIsIDM3OiBcIk5PREVfREVORFwiLCAzODogXCJCTE9DS19BUlJPV19TVEFSVFwiLCAzOTogXCJCTE9DS19BUlJPV19FTkRcIiwgNDA6IFwiY2xhc3NEZWZcIiwgNDE6IFwiQ0xBU1NERUZfSURcIiwgNDI6IFwiQ0xBU1NERUZfU1RZTEVPUFRTXCIsIDQzOiBcIkRFRkFVTFRcIiwgNDQ6IFwiY2xhc3NcIiwgNDU6IFwiQ0xBU1NFTlRJVFlfSURTXCIsIDQ2OiBcIlNUWUxFQ0xBU1NcIiwgNDc6IFwic3R5bGVcIiwgNDg6IFwiU1RZTEVfRU5USVRZX0lEU1wiLCA0OTogXCJTVFlMRV9ERUZJTklUSU9OX0RBVEFcIiB9LFxuICAgIHByb2R1Y3Rpb25zXzogWzAsIFszLCAxXSwgWzMsIDJdLCBbMywgMl0sIFs2LCAxXSwgWzYsIDFdLCBbNiwgMV0sIFs5LCAzXSwgWzEyLCAxXSwgWzEyLCAxXSwgWzEyLCAyXSwgWzEyLCAyXSwgWzExLCAxXSwgWzExLCAyXSwgWzE0LCAxXSwgWzE0LCA0XSwgWzEzLCAxXSwgWzEzLCAxXSwgWzEzLCAxXSwgWzEzLCAxXSwgWzEzLCAxXSwgWzEzLCAxXSwgWzEzLCAxXSwgWzE5LCAzXSwgWzE5LCAyXSwgWzE5LCAxXSwgWzIwLCAxXSwgWzIyLCA0XSwgWzIyLCAzXSwgWzI2LCAxXSwgWzI2LCAyXSwgWzM0LCAxXSwgWzM0LCAyXSwgWzMzLCAzXSwgWzMzLCA0XSwgWzIzLCAzXSwgWzIzLCAzXSwgWzI0LCAzXSwgWzI1LCAzXV0sXG4gICAgcGVyZm9ybUFjdGlvbjogZnVuY3Rpb24gYW5vbnltb3VzKHl5dGV4dCwgeXlsZW5nLCB5eWxpbmVubywgeXksIHl5c3RhdGUsICQkLCBfJCkge1xuICAgICAgdmFyICQwID0gJCQubGVuZ3RoIC0gMTtcbiAgICAgIHN3aXRjaCAoeXlzdGF0ZSkge1xuICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgeXkuZ2V0TG9nZ2VyKCkuZGVidWcoXCJSdWxlOiBzZXBhcmF0b3IgKE5MKSBcIik7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgNTpcbiAgICAgICAgICB5eS5nZXRMb2dnZXIoKS5kZWJ1ZyhcIlJ1bGU6IHNlcGFyYXRvciAoU3BhY2UpIFwiKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSA2OlxuICAgICAgICAgIHl5LmdldExvZ2dlcigpLmRlYnVnKFwiUnVsZTogc2VwYXJhdG9yIChFT0YpIFwiKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSA3OlxuICAgICAgICAgIHl5LmdldExvZ2dlcigpLmRlYnVnKFwiUnVsZTogaGllcmFyY2h5OiBcIiwgJCRbJDAgLSAxXSk7XG4gICAgICAgICAgeXkuc2V0SGllcmFyY2h5KCQkWyQwIC0gMV0pO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDg6XG4gICAgICAgICAgeXkuZ2V0TG9nZ2VyKCkuZGVidWcoXCJTdG9wIE5MIFwiKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSA5OlxuICAgICAgICAgIHl5LmdldExvZ2dlcigpLmRlYnVnKFwiU3RvcCBFT0YgXCIpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDEwOlxuICAgICAgICAgIHl5LmdldExvZ2dlcigpLmRlYnVnKFwiU3RvcCBOTDIgXCIpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDExOlxuICAgICAgICAgIHl5LmdldExvZ2dlcigpLmRlYnVnKFwiU3RvcCBFT0YyIFwiKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAxMjpcbiAgICAgICAgICB5eS5nZXRMb2dnZXIoKS5kZWJ1ZyhcIlJ1bGU6IHN0YXRlbWVudDogXCIsICQkWyQwXSk7XG4gICAgICAgICAgdHlwZW9mICQkWyQwXS5sZW5ndGggPT09IFwibnVtYmVyXCIgPyB0aGlzLiQgPSAkJFskMF0gOiB0aGlzLiQgPSBbJCRbJDBdXTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAxMzpcbiAgICAgICAgICB5eS5nZXRMb2dnZXIoKS5kZWJ1ZyhcIlJ1bGU6IHN0YXRlbWVudCAjMjogXCIsICQkWyQwIC0gMV0pO1xuICAgICAgICAgIHRoaXMuJCA9IFskJFskMCAtIDFdXS5jb25jYXQoJCRbJDBdKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAxNDpcbiAgICAgICAgICB5eS5nZXRMb2dnZXIoKS5kZWJ1ZyhcIlJ1bGU6IGxpbms6IFwiLCAkJFskMF0sIHl5dGV4dCk7XG4gICAgICAgICAgdGhpcy4kID0geyBlZGdlVHlwZVN0cjogJCRbJDBdLCBsYWJlbDogXCJcIiB9O1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDE1OlxuICAgICAgICAgIHl5LmdldExvZ2dlcigpLmRlYnVnKFwiUnVsZTogTEFCRUwgbGluazogXCIsICQkWyQwIC0gM10sICQkWyQwIC0gMV0sICQkWyQwXSk7XG4gICAgICAgICAgdGhpcy4kID0geyBlZGdlVHlwZVN0cjogJCRbJDBdLCBsYWJlbDogJCRbJDAgLSAxXSB9O1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDE4OlxuICAgICAgICAgIGNvbnN0IG51bSA9IHBhcnNlSW50KCQkWyQwXSk7XG4gICAgICAgICAgY29uc3Qgc3BhY2VJZCA9IHl5LmdlbmVyYXRlSWQoKTtcbiAgICAgICAgICB0aGlzLiQgPSB7IGlkOiBzcGFjZUlkLCB0eXBlOiBcInNwYWNlXCIsIGxhYmVsOiBcIlwiLCB3aWR0aDogbnVtLCBjaGlsZHJlbjogW10gfTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAyMzpcbiAgICAgICAgICB5eS5nZXRMb2dnZXIoKS5kZWJ1ZyhcIlJ1bGU6IChub2RlU3RhdGVtZW50IGxpbmsgbm9kZSkgXCIsICQkWyQwIC0gMl0sICQkWyQwIC0gMV0sICQkWyQwXSwgXCIgdHlwZXN0cjogXCIsICQkWyQwIC0gMV0uZWRnZVR5cGVTdHIpO1xuICAgICAgICAgIGNvbnN0IGVkZ2VEYXRhID0geXkuZWRnZVN0clRvRWRnZURhdGEoJCRbJDAgLSAxXS5lZGdlVHlwZVN0cik7XG4gICAgICAgICAgdGhpcy4kID0gW1xuICAgICAgICAgICAgeyBpZDogJCRbJDAgLSAyXS5pZCwgbGFiZWw6ICQkWyQwIC0gMl0ubGFiZWwsIHR5cGU6ICQkWyQwIC0gMl0udHlwZSwgZGlyZWN0aW9uczogJCRbJDAgLSAyXS5kaXJlY3Rpb25zIH0sXG4gICAgICAgICAgICB7IGlkOiAkJFskMCAtIDJdLmlkICsgXCItXCIgKyAkJFskMF0uaWQsIHN0YXJ0OiAkJFskMCAtIDJdLmlkLCBlbmQ6ICQkWyQwXS5pZCwgbGFiZWw6ICQkWyQwIC0gMV0ubGFiZWwsIHR5cGU6IFwiZWRnZVwiLCBkaXJlY3Rpb25zOiAkJFskMF0uZGlyZWN0aW9ucywgYXJyb3dUeXBlRW5kOiBlZGdlRGF0YSwgYXJyb3dUeXBlU3RhcnQ6IFwiYXJyb3dfb3BlblwiIH0sXG4gICAgICAgICAgICB7IGlkOiAkJFskMF0uaWQsIGxhYmVsOiAkJFskMF0ubGFiZWwsIHR5cGU6IHl5LnR5cGVTdHIyVHlwZSgkJFskMF0udHlwZVN0ciksIGRpcmVjdGlvbnM6ICQkWyQwXS5kaXJlY3Rpb25zIH1cbiAgICAgICAgICBdO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDI0OlxuICAgICAgICAgIHl5LmdldExvZ2dlcigpLmRlYnVnKFwiUnVsZTogbm9kZVN0YXRlbWVudCAoYWJjODggbm9kZSBzaXplKSBcIiwgJCRbJDAgLSAxXSwgJCRbJDBdKTtcbiAgICAgICAgICB0aGlzLiQgPSB7IGlkOiAkJFskMCAtIDFdLmlkLCBsYWJlbDogJCRbJDAgLSAxXS5sYWJlbCwgdHlwZTogeXkudHlwZVN0cjJUeXBlKCQkWyQwIC0gMV0udHlwZVN0ciksIGRpcmVjdGlvbnM6ICQkWyQwIC0gMV0uZGlyZWN0aW9ucywgd2lkdGhJbkNvbHVtbnM6IHBhcnNlSW50KCQkWyQwXSwgMTApIH07XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMjU6XG4gICAgICAgICAgeXkuZ2V0TG9nZ2VyKCkuZGVidWcoXCJSdWxlOiBub2RlU3RhdGVtZW50IChub2RlKSBcIiwgJCRbJDBdKTtcbiAgICAgICAgICB0aGlzLiQgPSB7IGlkOiAkJFskMF0uaWQsIGxhYmVsOiAkJFskMF0ubGFiZWwsIHR5cGU6IHl5LnR5cGVTdHIyVHlwZSgkJFskMF0udHlwZVN0ciksIGRpcmVjdGlvbnM6ICQkWyQwXS5kaXJlY3Rpb25zLCB3aWR0aEluQ29sdW1uczogMSB9O1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDI2OlxuICAgICAgICAgIHl5LmdldExvZ2dlcigpLmRlYnVnKFwiQVBBMTIzXCIsIHRoaXMgPyB0aGlzIDogXCJuYVwiKTtcbiAgICAgICAgICB5eS5nZXRMb2dnZXIoKS5kZWJ1ZyhcIkNPTFVNTlM6IFwiLCAkJFskMF0pO1xuICAgICAgICAgIHRoaXMuJCA9IHsgdHlwZTogXCJjb2x1bW4tc2V0dGluZ1wiLCBjb2x1bW5zOiAkJFskMF0gPT09IFwiYXV0b1wiID8gLTEgOiBwYXJzZUludCgkJFskMF0pIH07XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMjc6XG4gICAgICAgICAgeXkuZ2V0TG9nZ2VyKCkuZGVidWcoXCJSdWxlOiBpZC1ibG9jayBzdGF0ZW1lbnQgOiBcIiwgJCRbJDAgLSAyXSwgJCRbJDAgLSAxXSk7XG4gICAgICAgICAgeXkuZ2VuZXJhdGVJZCgpO1xuICAgICAgICAgIHRoaXMuJCA9IHsgLi4uJCRbJDAgLSAyXSwgdHlwZTogXCJjb21wb3NpdGVcIiwgY2hpbGRyZW46ICQkWyQwIC0gMV0gfTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAyODpcbiAgICAgICAgICB5eS5nZXRMb2dnZXIoKS5kZWJ1ZyhcIlJ1bGU6IGJsb2NrU3RhdGVtZW50IDogXCIsICQkWyQwIC0gMl0sICQkWyQwIC0gMV0sICQkWyQwXSk7XG4gICAgICAgICAgY29uc3QgaWQgPSB5eS5nZW5lcmF0ZUlkKCk7XG4gICAgICAgICAgdGhpcy4kID0geyBpZCwgdHlwZTogXCJjb21wb3NpdGVcIiwgbGFiZWw6IFwiXCIsIGNoaWxkcmVuOiAkJFskMCAtIDFdIH07XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMjk6XG4gICAgICAgICAgeXkuZ2V0TG9nZ2VyKCkuZGVidWcoXCJSdWxlOiBub2RlIChOT0RFX0lEIHNlcGFyYXRvcik6IFwiLCAkJFskMF0pO1xuICAgICAgICAgIHRoaXMuJCA9IHsgaWQ6ICQkWyQwXSB9O1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDMwOlxuICAgICAgICAgIHl5LmdldExvZ2dlcigpLmRlYnVnKFwiUnVsZTogbm9kZSAoTk9ERV9JRCBub2RlU2hhcGVOTGFiZWwgc2VwYXJhdG9yKTogXCIsICQkWyQwIC0gMV0sICQkWyQwXSk7XG4gICAgICAgICAgdGhpcy4kID0geyBpZDogJCRbJDAgLSAxXSwgbGFiZWw6ICQkWyQwXS5sYWJlbCwgdHlwZVN0cjogJCRbJDBdLnR5cGVTdHIsIGRpcmVjdGlvbnM6ICQkWyQwXS5kaXJlY3Rpb25zIH07XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMzE6XG4gICAgICAgICAgeXkuZ2V0TG9nZ2VyKCkuZGVidWcoXCJSdWxlOiBkaXJMaXN0OiBcIiwgJCRbJDBdKTtcbiAgICAgICAgICB0aGlzLiQgPSBbJCRbJDBdXTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAzMjpcbiAgICAgICAgICB5eS5nZXRMb2dnZXIoKS5kZWJ1ZyhcIlJ1bGU6IGRpckxpc3Q6IFwiLCAkJFskMCAtIDFdLCAkJFskMF0pO1xuICAgICAgICAgIHRoaXMuJCA9IFskJFskMCAtIDFdXS5jb25jYXQoJCRbJDBdKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAzMzpcbiAgICAgICAgICB5eS5nZXRMb2dnZXIoKS5kZWJ1ZyhcIlJ1bGU6IG5vZGVTaGFwZU5MYWJlbDogXCIsICQkWyQwIC0gMl0sICQkWyQwIC0gMV0sICQkWyQwXSk7XG4gICAgICAgICAgdGhpcy4kID0geyB0eXBlU3RyOiAkJFskMCAtIDJdICsgJCRbJDBdLCBsYWJlbDogJCRbJDAgLSAxXSB9O1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDM0OlxuICAgICAgICAgIHl5LmdldExvZ2dlcigpLmRlYnVnKFwiUnVsZTogQkxPQ0tfQVJST1cgbm9kZVNoYXBlTkxhYmVsOiBcIiwgJCRbJDAgLSAzXSwgJCRbJDAgLSAyXSwgXCIgIzM6XCIsICQkWyQwIC0gMV0sICQkWyQwXSk7XG4gICAgICAgICAgdGhpcy4kID0geyB0eXBlU3RyOiAkJFskMCAtIDNdICsgJCRbJDBdLCBsYWJlbDogJCRbJDAgLSAyXSwgZGlyZWN0aW9uczogJCRbJDAgLSAxXSB9O1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDM1OlxuICAgICAgICBjYXNlIDM2OlxuICAgICAgICAgIHRoaXMuJCA9IHsgdHlwZTogXCJjbGFzc0RlZlwiLCBpZDogJCRbJDAgLSAxXS50cmltKCksIGNzczogJCRbJDBdLnRyaW0oKSB9O1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDM3OlxuICAgICAgICAgIHRoaXMuJCA9IHsgdHlwZTogXCJhcHBseUNsYXNzXCIsIGlkOiAkJFskMCAtIDFdLnRyaW0oKSwgc3R5bGVDbGFzczogJCRbJDBdLnRyaW0oKSB9O1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDM4OlxuICAgICAgICAgIHRoaXMuJCA9IHsgdHlwZTogXCJhcHBseVN0eWxlc1wiLCBpZDogJCRbJDAgLSAxXS50cmltKCksIHN0eWxlc1N0cjogJCRbJDBdLnRyaW0oKSB9O1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH0sXG4gICAgdGFibGU6IFt7IDk6IDEsIDEwOiBbMSwgMl0gfSwgeyAxOiBbM10gfSwgeyAxMTogMywgMTM6IDQsIDE5OiA1LCAyMDogNiwgMjE6ICRWMCwgMjI6IDgsIDIzOiA5LCAyNDogMTAsIDI1OiAxMSwgMjY6IDEyLCAyODogJFYxLCAyOTogJFYyLCAzMTogJFYzLCAzMjogJFY0LCA0MDogJFY1LCA0NDogJFY2LCA0NzogJFY3IH0sIHsgODogWzEsIDIwXSB9LCBvKCRWOCwgWzIsIDEyXSwgeyAxMzogNCwgMTk6IDUsIDIwOiA2LCAyMjogOCwgMjM6IDksIDI0OiAxMCwgMjU6IDExLCAyNjogMTIsIDExOiAyMSwgMjE6ICRWMCwgMjg6ICRWMSwgMjk6ICRWMiwgMzE6ICRWMywgMzI6ICRWNCwgNDA6ICRWNSwgNDQ6ICRWNiwgNDc6ICRWNyB9KSwgbygkVjksIFsyLCAxNl0sIHsgMTQ6IDIyLCAxNTogJFZhLCAxNjogJFZiIH0pLCBvKCRWOSwgWzIsIDE3XSksIG8oJFY5LCBbMiwgMThdKSwgbygkVjksIFsyLCAxOV0pLCBvKCRWOSwgWzIsIDIwXSksIG8oJFY5LCBbMiwgMjFdKSwgbygkVjksIFsyLCAyMl0pLCBvKCRWYywgWzIsIDI1XSwgeyAyNzogWzEsIDI1XSB9KSwgbygkVjksIFsyLCAyNl0pLCB7IDE5OiAyNiwgMjY6IDEyLCAzMjogJFY0IH0sIHsgMTE6IDI3LCAxMzogNCwgMTk6IDUsIDIwOiA2LCAyMTogJFYwLCAyMjogOCwgMjM6IDksIDI0OiAxMCwgMjU6IDExLCAyNjogMTIsIDI4OiAkVjEsIDI5OiAkVjIsIDMxOiAkVjMsIDMyOiAkVjQsIDQwOiAkVjUsIDQ0OiAkVjYsIDQ3OiAkVjcgfSwgeyA0MTogWzEsIDI4XSwgNDM6IFsxLCAyOV0gfSwgeyA0NTogWzEsIDMwXSB9LCB7IDQ4OiBbMSwgMzFdIH0sIG8oJFZkLCBbMiwgMjldLCB7IDMzOiAzMiwgMzY6IFsxLCAzM10sIDM4OiBbMSwgMzRdIH0pLCB7IDE6IFsyLCA3XSB9LCBvKCRWOCwgWzIsIDEzXSksIHsgMjY6IDM1LCAzMjogJFY0IH0sIHsgMzI6IFsyLCAxNF0gfSwgeyAxNzogWzEsIDM2XSB9LCBvKCRWYywgWzIsIDI0XSksIHsgMTE6IDM3LCAxMzogNCwgMTQ6IDIyLCAxNTogJFZhLCAxNjogJFZiLCAxOTogNSwgMjA6IDYsIDIxOiAkVjAsIDIyOiA4LCAyMzogOSwgMjQ6IDEwLCAyNTogMTEsIDI2OiAxMiwgMjg6ICRWMSwgMjk6ICRWMiwgMzE6ICRWMywgMzI6ICRWNCwgNDA6ICRWNSwgNDQ6ICRWNiwgNDc6ICRWNyB9LCB7IDMwOiBbMSwgMzhdIH0sIHsgNDI6IFsxLCAzOV0gfSwgeyA0MjogWzEsIDQwXSB9LCB7IDQ2OiBbMSwgNDFdIH0sIHsgNDk6IFsxLCA0Ml0gfSwgbygkVmQsIFsyLCAzMF0pLCB7IDE4OiBbMSwgNDNdIH0sIHsgMTg6IFsxLCA0NF0gfSwgbygkVmMsIFsyLCAyM10pLCB7IDE4OiBbMSwgNDVdIH0sIHsgMzA6IFsxLCA0Nl0gfSwgbygkVjksIFsyLCAyOF0pLCBvKCRWOSwgWzIsIDM1XSksIG8oJFY5LCBbMiwgMzZdKSwgbygkVjksIFsyLCAzN10pLCBvKCRWOSwgWzIsIDM4XSksIHsgMzc6IFsxLCA0N10gfSwgeyAzNDogNDgsIDM1OiAkVmUgfSwgeyAxNTogWzEsIDUwXSB9LCBvKCRWOSwgWzIsIDI3XSksIG8oJFZkLCBbMiwgMzNdKSwgeyAzOTogWzEsIDUxXSB9LCB7IDM0OiA1MiwgMzU6ICRWZSwgMzk6IFsyLCAzMV0gfSwgeyAzMjogWzIsIDE1XSB9LCBvKCRWZCwgWzIsIDM0XSksIHsgMzk6IFsyLCAzMl0gfV0sXG4gICAgZGVmYXVsdEFjdGlvbnM6IHsgMjA6IFsyLCA3XSwgMjM6IFsyLCAxNF0sIDUwOiBbMiwgMTVdLCA1MjogWzIsIDMyXSB9LFxuICAgIHBhcnNlRXJyb3I6IGZ1bmN0aW9uIHBhcnNlRXJyb3Ioc3RyLCBoYXNoKSB7XG4gICAgICBpZiAoaGFzaC5yZWNvdmVyYWJsZSkge1xuICAgICAgICB0aGlzLnRyYWNlKHN0cik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgZXJyb3IgPSBuZXcgRXJyb3Ioc3RyKTtcbiAgICAgICAgZXJyb3IuaGFzaCA9IGhhc2g7XG4gICAgICAgIHRocm93IGVycm9yO1xuICAgICAgfVxuICAgIH0sXG4gICAgcGFyc2U6IGZ1bmN0aW9uIHBhcnNlKGlucHV0KSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXMsIHN0YWNrID0gWzBdLCB0c3RhY2sgPSBbXSwgdnN0YWNrID0gW251bGxdLCBsc3RhY2sgPSBbXSwgdGFibGUgPSB0aGlzLnRhYmxlLCB5eXRleHQgPSBcIlwiLCB5eWxpbmVubyA9IDAsIHl5bGVuZyA9IDAsIFRFUlJPUiA9IDIsIEVPRiA9IDE7XG4gICAgICB2YXIgYXJncyA9IGxzdGFjay5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7XG4gICAgICB2YXIgbGV4ZXIyID0gT2JqZWN0LmNyZWF0ZSh0aGlzLmxleGVyKTtcbiAgICAgIHZhciBzaGFyZWRTdGF0ZSA9IHsgeXk6IHt9IH07XG4gICAgICBmb3IgKHZhciBrIGluIHRoaXMueXkpIHtcbiAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0aGlzLnl5LCBrKSkge1xuICAgICAgICAgIHNoYXJlZFN0YXRlLnl5W2tdID0gdGhpcy55eVtrXTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgbGV4ZXIyLnNldElucHV0KGlucHV0LCBzaGFyZWRTdGF0ZS55eSk7XG4gICAgICBzaGFyZWRTdGF0ZS55eS5sZXhlciA9IGxleGVyMjtcbiAgICAgIHNoYXJlZFN0YXRlLnl5LnBhcnNlciA9IHRoaXM7XG4gICAgICBpZiAodHlwZW9mIGxleGVyMi55eWxsb2MgPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICBsZXhlcjIueXlsbG9jID0ge307XG4gICAgICB9XG4gICAgICB2YXIgeXlsb2MgPSBsZXhlcjIueXlsbG9jO1xuICAgICAgbHN0YWNrLnB1c2goeXlsb2MpO1xuICAgICAgdmFyIHJhbmdlcyA9IGxleGVyMi5vcHRpb25zICYmIGxleGVyMi5vcHRpb25zLnJhbmdlcztcbiAgICAgIGlmICh0eXBlb2Ygc2hhcmVkU3RhdGUueXkucGFyc2VFcnJvciA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIHRoaXMucGFyc2VFcnJvciA9IHNoYXJlZFN0YXRlLnl5LnBhcnNlRXJyb3I7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnBhcnNlRXJyb3IgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YodGhpcykucGFyc2VFcnJvcjtcbiAgICAgIH1cbiAgICAgIGZ1bmN0aW9uIGxleCgpIHtcbiAgICAgICAgdmFyIHRva2VuO1xuICAgICAgICB0b2tlbiA9IHRzdGFjay5wb3AoKSB8fCBsZXhlcjIubGV4KCkgfHwgRU9GO1xuICAgICAgICBpZiAodHlwZW9mIHRva2VuICE9PSBcIm51bWJlclwiKSB7XG4gICAgICAgICAgaWYgKHRva2VuIGluc3RhbmNlb2YgQXJyYXkpIHtcbiAgICAgICAgICAgIHRzdGFjayA9IHRva2VuO1xuICAgICAgICAgICAgdG9rZW4gPSB0c3RhY2sucG9wKCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHRva2VuID0gc2VsZi5zeW1ib2xzX1t0b2tlbl0gfHwgdG9rZW47XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRva2VuO1xuICAgICAgfVxuICAgICAgdmFyIHN5bWJvbCwgc3RhdGUsIGFjdGlvbiwgciwgeXl2YWwgPSB7fSwgcCwgbGVuLCBuZXdTdGF0ZSwgZXhwZWN0ZWQ7XG4gICAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICBzdGF0ZSA9IHN0YWNrW3N0YWNrLmxlbmd0aCAtIDFdO1xuICAgICAgICBpZiAodGhpcy5kZWZhdWx0QWN0aW9uc1tzdGF0ZV0pIHtcbiAgICAgICAgICBhY3Rpb24gPSB0aGlzLmRlZmF1bHRBY3Rpb25zW3N0YXRlXTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAoc3ltYm9sID09PSBudWxsIHx8IHR5cGVvZiBzeW1ib2wgPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgc3ltYm9sID0gbGV4KCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGFjdGlvbiA9IHRhYmxlW3N0YXRlXSAmJiB0YWJsZVtzdGF0ZV1bc3ltYm9sXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIGFjdGlvbiA9PT0gXCJ1bmRlZmluZWRcIiB8fCAhYWN0aW9uLmxlbmd0aCB8fCAhYWN0aW9uWzBdKSB7XG4gICAgICAgICAgdmFyIGVyclN0ciA9IFwiXCI7XG4gICAgICAgICAgZXhwZWN0ZWQgPSBbXTtcbiAgICAgICAgICBmb3IgKHAgaW4gdGFibGVbc3RhdGVdKSB7XG4gICAgICAgICAgICBpZiAodGhpcy50ZXJtaW5hbHNfW3BdICYmIHAgPiBURVJST1IpIHtcbiAgICAgICAgICAgICAgZXhwZWN0ZWQucHVzaChcIidcIiArIHRoaXMudGVybWluYWxzX1twXSArIFwiJ1wiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGxleGVyMi5zaG93UG9zaXRpb24pIHtcbiAgICAgICAgICAgIGVyclN0ciA9IFwiUGFyc2UgZXJyb3Igb24gbGluZSBcIiArICh5eWxpbmVubyArIDEpICsgXCI6XFxuXCIgKyBsZXhlcjIuc2hvd1Bvc2l0aW9uKCkgKyBcIlxcbkV4cGVjdGluZyBcIiArIGV4cGVjdGVkLmpvaW4oXCIsIFwiKSArIFwiLCBnb3QgJ1wiICsgKHRoaXMudGVybWluYWxzX1tzeW1ib2xdIHx8IHN5bWJvbCkgKyBcIidcIjtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZXJyU3RyID0gXCJQYXJzZSBlcnJvciBvbiBsaW5lIFwiICsgKHl5bGluZW5vICsgMSkgKyBcIjogVW5leHBlY3RlZCBcIiArIChzeW1ib2wgPT0gRU9GID8gXCJlbmQgb2YgaW5wdXRcIiA6IFwiJ1wiICsgKHRoaXMudGVybWluYWxzX1tzeW1ib2xdIHx8IHN5bWJvbCkgKyBcIidcIik7XG4gICAgICAgICAgfVxuICAgICAgICAgIHRoaXMucGFyc2VFcnJvcihlcnJTdHIsIHtcbiAgICAgICAgICAgIHRleHQ6IGxleGVyMi5tYXRjaCxcbiAgICAgICAgICAgIHRva2VuOiB0aGlzLnRlcm1pbmFsc19bc3ltYm9sXSB8fCBzeW1ib2wsXG4gICAgICAgICAgICBsaW5lOiBsZXhlcjIueXlsaW5lbm8sXG4gICAgICAgICAgICBsb2M6IHl5bG9jLFxuICAgICAgICAgICAgZXhwZWN0ZWRcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYWN0aW9uWzBdIGluc3RhbmNlb2YgQXJyYXkgJiYgYWN0aW9uLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJQYXJzZSBFcnJvcjogbXVsdGlwbGUgYWN0aW9ucyBwb3NzaWJsZSBhdCBzdGF0ZTogXCIgKyBzdGF0ZSArIFwiLCB0b2tlbjogXCIgKyBzeW1ib2wpO1xuICAgICAgICB9XG4gICAgICAgIHN3aXRjaCAoYWN0aW9uWzBdKSB7XG4gICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgc3RhY2sucHVzaChzeW1ib2wpO1xuICAgICAgICAgICAgdnN0YWNrLnB1c2gobGV4ZXIyLnl5dGV4dCk7XG4gICAgICAgICAgICBsc3RhY2sucHVzaChsZXhlcjIueXlsbG9jKTtcbiAgICAgICAgICAgIHN0YWNrLnB1c2goYWN0aW9uWzFdKTtcbiAgICAgICAgICAgIHN5bWJvbCA9IG51bGw7XG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHl5bGVuZyA9IGxleGVyMi55eWxlbmc7XG4gICAgICAgICAgICAgIHl5dGV4dCA9IGxleGVyMi55eXRleHQ7XG4gICAgICAgICAgICAgIHl5bGluZW5vID0gbGV4ZXIyLnl5bGluZW5vO1xuICAgICAgICAgICAgICB5eWxvYyA9IGxleGVyMi55eWxsb2M7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICBsZW4gPSB0aGlzLnByb2R1Y3Rpb25zX1thY3Rpb25bMV1dWzFdO1xuICAgICAgICAgICAgeXl2YWwuJCA9IHZzdGFja1t2c3RhY2subGVuZ3RoIC0gbGVuXTtcbiAgICAgICAgICAgIHl5dmFsLl8kID0ge1xuICAgICAgICAgICAgICBmaXJzdF9saW5lOiBsc3RhY2tbbHN0YWNrLmxlbmd0aCAtIChsZW4gfHwgMSldLmZpcnN0X2xpbmUsXG4gICAgICAgICAgICAgIGxhc3RfbGluZTogbHN0YWNrW2xzdGFjay5sZW5ndGggLSAxXS5sYXN0X2xpbmUsXG4gICAgICAgICAgICAgIGZpcnN0X2NvbHVtbjogbHN0YWNrW2xzdGFjay5sZW5ndGggLSAobGVuIHx8IDEpXS5maXJzdF9jb2x1bW4sXG4gICAgICAgICAgICAgIGxhc3RfY29sdW1uOiBsc3RhY2tbbHN0YWNrLmxlbmd0aCAtIDFdLmxhc3RfY29sdW1uXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKHJhbmdlcykge1xuICAgICAgICAgICAgICB5eXZhbC5fJC5yYW5nZSA9IFtcbiAgICAgICAgICAgICAgICBsc3RhY2tbbHN0YWNrLmxlbmd0aCAtIChsZW4gfHwgMSldLnJhbmdlWzBdLFxuICAgICAgICAgICAgICAgIGxzdGFja1tsc3RhY2subGVuZ3RoIC0gMV0ucmFuZ2VbMV1cbiAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHIgPSB0aGlzLnBlcmZvcm1BY3Rpb24uYXBwbHkoeXl2YWwsIFtcbiAgICAgICAgICAgICAgeXl0ZXh0LFxuICAgICAgICAgICAgICB5eWxlbmcsXG4gICAgICAgICAgICAgIHl5bGluZW5vLFxuICAgICAgICAgICAgICBzaGFyZWRTdGF0ZS55eSxcbiAgICAgICAgICAgICAgYWN0aW9uWzFdLFxuICAgICAgICAgICAgICB2c3RhY2ssXG4gICAgICAgICAgICAgIGxzdGFja1xuICAgICAgICAgICAgXS5jb25jYXQoYXJncykpO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiByICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICAgIHJldHVybiByO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGxlbikge1xuICAgICAgICAgICAgICBzdGFjayA9IHN0YWNrLnNsaWNlKDAsIC0xICogbGVuICogMik7XG4gICAgICAgICAgICAgIHZzdGFjayA9IHZzdGFjay5zbGljZSgwLCAtMSAqIGxlbik7XG4gICAgICAgICAgICAgIGxzdGFjayA9IGxzdGFjay5zbGljZSgwLCAtMSAqIGxlbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzdGFjay5wdXNoKHRoaXMucHJvZHVjdGlvbnNfW2FjdGlvblsxXV1bMF0pO1xuICAgICAgICAgICAgdnN0YWNrLnB1c2goeXl2YWwuJCk7XG4gICAgICAgICAgICBsc3RhY2sucHVzaCh5eXZhbC5fJCk7XG4gICAgICAgICAgICBuZXdTdGF0ZSA9IHRhYmxlW3N0YWNrW3N0YWNrLmxlbmd0aCAtIDJdXVtzdGFja1tzdGFjay5sZW5ndGggLSAxXV07XG4gICAgICAgICAgICBzdGFjay5wdXNoKG5ld1N0YXRlKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH07XG4gIHZhciBsZXhlciA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBsZXhlcjIgPSB7XG4gICAgICBFT0Y6IDEsXG4gICAgICBwYXJzZUVycm9yOiBmdW5jdGlvbiBwYXJzZUVycm9yKHN0ciwgaGFzaCkge1xuICAgICAgICBpZiAodGhpcy55eS5wYXJzZXIpIHtcbiAgICAgICAgICB0aGlzLnl5LnBhcnNlci5wYXJzZUVycm9yKHN0ciwgaGFzaCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKHN0cik7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICAvLyByZXNldHMgdGhlIGxleGVyLCBzZXRzIG5ldyBpbnB1dFxuICAgICAgc2V0SW5wdXQ6IGZ1bmN0aW9uKGlucHV0LCB5eSkge1xuICAgICAgICB0aGlzLnl5ID0geXkgfHwgdGhpcy55eSB8fCB7fTtcbiAgICAgICAgdGhpcy5faW5wdXQgPSBpbnB1dDtcbiAgICAgICAgdGhpcy5fbW9yZSA9IHRoaXMuX2JhY2t0cmFjayA9IHRoaXMuZG9uZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLnl5bGluZW5vID0gdGhpcy55eWxlbmcgPSAwO1xuICAgICAgICB0aGlzLnl5dGV4dCA9IHRoaXMubWF0Y2hlZCA9IHRoaXMubWF0Y2ggPSBcIlwiO1xuICAgICAgICB0aGlzLmNvbmRpdGlvblN0YWNrID0gW1wiSU5JVElBTFwiXTtcbiAgICAgICAgdGhpcy55eWxsb2MgPSB7XG4gICAgICAgICAgZmlyc3RfbGluZTogMSxcbiAgICAgICAgICBmaXJzdF9jb2x1bW46IDAsXG4gICAgICAgICAgbGFzdF9saW5lOiAxLFxuICAgICAgICAgIGxhc3RfY29sdW1uOiAwXG4gICAgICAgIH07XG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMucmFuZ2VzKSB7XG4gICAgICAgICAgdGhpcy55eWxsb2MucmFuZ2UgPSBbMCwgMF07XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5vZmZzZXQgPSAwO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH0sXG4gICAgICAvLyBjb25zdW1lcyBhbmQgcmV0dXJucyBvbmUgY2hhciBmcm9tIHRoZSBpbnB1dFxuICAgICAgaW5wdXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgY2ggPSB0aGlzLl9pbnB1dFswXTtcbiAgICAgICAgdGhpcy55eXRleHQgKz0gY2g7XG4gICAgICAgIHRoaXMueXlsZW5nKys7XG4gICAgICAgIHRoaXMub2Zmc2V0Kys7XG4gICAgICAgIHRoaXMubWF0Y2ggKz0gY2g7XG4gICAgICAgIHRoaXMubWF0Y2hlZCArPSBjaDtcbiAgICAgICAgdmFyIGxpbmVzID0gY2gubWF0Y2goLyg/Olxcclxcbj98XFxuKS4qL2cpO1xuICAgICAgICBpZiAobGluZXMpIHtcbiAgICAgICAgICB0aGlzLnl5bGluZW5vKys7XG4gICAgICAgICAgdGhpcy55eWxsb2MubGFzdF9saW5lKys7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy55eWxsb2MubGFzdF9jb2x1bW4rKztcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5vcHRpb25zLnJhbmdlcykge1xuICAgICAgICAgIHRoaXMueXlsbG9jLnJhbmdlWzFdKys7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5faW5wdXQgPSB0aGlzLl9pbnB1dC5zbGljZSgxKTtcbiAgICAgICAgcmV0dXJuIGNoO1xuICAgICAgfSxcbiAgICAgIC8vIHVuc2hpZnRzIG9uZSBjaGFyIChvciBhIHN0cmluZykgaW50byB0aGUgaW5wdXRcbiAgICAgIHVucHV0OiBmdW5jdGlvbihjaCkge1xuICAgICAgICB2YXIgbGVuID0gY2gubGVuZ3RoO1xuICAgICAgICB2YXIgbGluZXMgPSBjaC5zcGxpdCgvKD86XFxyXFxuP3xcXG4pL2cpO1xuICAgICAgICB0aGlzLl9pbnB1dCA9IGNoICsgdGhpcy5faW5wdXQ7XG4gICAgICAgIHRoaXMueXl0ZXh0ID0gdGhpcy55eXRleHQuc3Vic3RyKDAsIHRoaXMueXl0ZXh0Lmxlbmd0aCAtIGxlbik7XG4gICAgICAgIHRoaXMub2Zmc2V0IC09IGxlbjtcbiAgICAgICAgdmFyIG9sZExpbmVzID0gdGhpcy5tYXRjaC5zcGxpdCgvKD86XFxyXFxuP3xcXG4pL2cpO1xuICAgICAgICB0aGlzLm1hdGNoID0gdGhpcy5tYXRjaC5zdWJzdHIoMCwgdGhpcy5tYXRjaC5sZW5ndGggLSAxKTtcbiAgICAgICAgdGhpcy5tYXRjaGVkID0gdGhpcy5tYXRjaGVkLnN1YnN0cigwLCB0aGlzLm1hdGNoZWQubGVuZ3RoIC0gMSk7XG4gICAgICAgIGlmIChsaW5lcy5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgdGhpcy55eWxpbmVubyAtPSBsaW5lcy5sZW5ndGggLSAxO1xuICAgICAgICB9XG4gICAgICAgIHZhciByID0gdGhpcy55eWxsb2MucmFuZ2U7XG4gICAgICAgIHRoaXMueXlsbG9jID0ge1xuICAgICAgICAgIGZpcnN0X2xpbmU6IHRoaXMueXlsbG9jLmZpcnN0X2xpbmUsXG4gICAgICAgICAgbGFzdF9saW5lOiB0aGlzLnl5bGluZW5vICsgMSxcbiAgICAgICAgICBmaXJzdF9jb2x1bW46IHRoaXMueXlsbG9jLmZpcnN0X2NvbHVtbixcbiAgICAgICAgICBsYXN0X2NvbHVtbjogbGluZXMgPyAobGluZXMubGVuZ3RoID09PSBvbGRMaW5lcy5sZW5ndGggPyB0aGlzLnl5bGxvYy5maXJzdF9jb2x1bW4gOiAwKSArIG9sZExpbmVzW29sZExpbmVzLmxlbmd0aCAtIGxpbmVzLmxlbmd0aF0ubGVuZ3RoIC0gbGluZXNbMF0ubGVuZ3RoIDogdGhpcy55eWxsb2MuZmlyc3RfY29sdW1uIC0gbGVuXG4gICAgICAgIH07XG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMucmFuZ2VzKSB7XG4gICAgICAgICAgdGhpcy55eWxsb2MucmFuZ2UgPSBbclswXSwgclswXSArIHRoaXMueXlsZW5nIC0gbGVuXTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnl5bGVuZyA9IHRoaXMueXl0ZXh0Lmxlbmd0aDtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9LFxuICAgICAgLy8gV2hlbiBjYWxsZWQgZnJvbSBhY3Rpb24sIGNhY2hlcyBtYXRjaGVkIHRleHQgYW5kIGFwcGVuZHMgaXQgb24gbmV4dCBhY3Rpb25cbiAgICAgIG1vcmU6IGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGlzLl9tb3JlID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9LFxuICAgICAgLy8gV2hlbiBjYWxsZWQgZnJvbSBhY3Rpb24sIHNpZ25hbHMgdGhlIGxleGVyIHRoYXQgdGhpcyBydWxlIGZhaWxzIHRvIG1hdGNoIHRoZSBpbnB1dCwgc28gdGhlIG5leHQgbWF0Y2hpbmcgcnVsZSAocmVnZXgpIHNob3VsZCBiZSB0ZXN0ZWQgaW5zdGVhZC5cbiAgICAgIHJlamVjdDogZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMuYmFja3RyYWNrX2xleGVyKSB7XG4gICAgICAgICAgdGhpcy5fYmFja3RyYWNrID0gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5wYXJzZUVycm9yKFwiTGV4aWNhbCBlcnJvciBvbiBsaW5lIFwiICsgKHRoaXMueXlsaW5lbm8gKyAxKSArIFwiLiBZb3UgY2FuIG9ubHkgaW52b2tlIHJlamVjdCgpIGluIHRoZSBsZXhlciB3aGVuIHRoZSBsZXhlciBpcyBvZiB0aGUgYmFja3RyYWNraW5nIHBlcnN1YXNpb24gKG9wdGlvbnMuYmFja3RyYWNrX2xleGVyID0gdHJ1ZSkuXFxuXCIgKyB0aGlzLnNob3dQb3NpdGlvbigpLCB7XG4gICAgICAgICAgICB0ZXh0OiBcIlwiLFxuICAgICAgICAgICAgdG9rZW46IG51bGwsXG4gICAgICAgICAgICBsaW5lOiB0aGlzLnl5bGluZW5vXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9LFxuICAgICAgLy8gcmV0YWluIGZpcnN0IG4gY2hhcmFjdGVycyBvZiB0aGUgbWF0Y2hcbiAgICAgIGxlc3M6IGZ1bmN0aW9uKG4pIHtcbiAgICAgICAgdGhpcy51bnB1dCh0aGlzLm1hdGNoLnNsaWNlKG4pKTtcbiAgICAgIH0sXG4gICAgICAvLyBkaXNwbGF5cyBhbHJlYWR5IG1hdGNoZWQgaW5wdXQsIGkuZS4gZm9yIGVycm9yIG1lc3NhZ2VzXG4gICAgICBwYXN0SW5wdXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgcGFzdCA9IHRoaXMubWF0Y2hlZC5zdWJzdHIoMCwgdGhpcy5tYXRjaGVkLmxlbmd0aCAtIHRoaXMubWF0Y2gubGVuZ3RoKTtcbiAgICAgICAgcmV0dXJuIChwYXN0Lmxlbmd0aCA+IDIwID8gXCIuLi5cIiA6IFwiXCIpICsgcGFzdC5zdWJzdHIoLTIwKS5yZXBsYWNlKC9cXG4vZywgXCJcIik7XG4gICAgICB9LFxuICAgICAgLy8gZGlzcGxheXMgdXBjb21pbmcgaW5wdXQsIGkuZS4gZm9yIGVycm9yIG1lc3NhZ2VzXG4gICAgICB1cGNvbWluZ0lucHV0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIG5leHQgPSB0aGlzLm1hdGNoO1xuICAgICAgICBpZiAobmV4dC5sZW5ndGggPCAyMCkge1xuICAgICAgICAgIG5leHQgKz0gdGhpcy5faW5wdXQuc3Vic3RyKDAsIDIwIC0gbmV4dC5sZW5ndGgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAobmV4dC5zdWJzdHIoMCwgMjApICsgKG5leHQubGVuZ3RoID4gMjAgPyBcIi4uLlwiIDogXCJcIikpLnJlcGxhY2UoL1xcbi9nLCBcIlwiKTtcbiAgICAgIH0sXG4gICAgICAvLyBkaXNwbGF5cyB0aGUgY2hhcmFjdGVyIHBvc2l0aW9uIHdoZXJlIHRoZSBsZXhpbmcgZXJyb3Igb2NjdXJyZWQsIGkuZS4gZm9yIGVycm9yIG1lc3NhZ2VzXG4gICAgICBzaG93UG9zaXRpb246IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgcHJlID0gdGhpcy5wYXN0SW5wdXQoKTtcbiAgICAgICAgdmFyIGMgPSBuZXcgQXJyYXkocHJlLmxlbmd0aCArIDEpLmpvaW4oXCItXCIpO1xuICAgICAgICByZXR1cm4gcHJlICsgdGhpcy51cGNvbWluZ0lucHV0KCkgKyBcIlxcblwiICsgYyArIFwiXlwiO1xuICAgICAgfSxcbiAgICAgIC8vIHRlc3QgdGhlIGxleGVkIHRva2VuOiByZXR1cm4gRkFMU0Ugd2hlbiBub3QgYSBtYXRjaCwgb3RoZXJ3aXNlIHJldHVybiB0b2tlblxuICAgICAgdGVzdF9tYXRjaDogZnVuY3Rpb24obWF0Y2gsIGluZGV4ZWRfcnVsZSkge1xuICAgICAgICB2YXIgdG9rZW4sIGxpbmVzLCBiYWNrdXA7XG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMuYmFja3RyYWNrX2xleGVyKSB7XG4gICAgICAgICAgYmFja3VwID0ge1xuICAgICAgICAgICAgeXlsaW5lbm86IHRoaXMueXlsaW5lbm8sXG4gICAgICAgICAgICB5eWxsb2M6IHtcbiAgICAgICAgICAgICAgZmlyc3RfbGluZTogdGhpcy55eWxsb2MuZmlyc3RfbGluZSxcbiAgICAgICAgICAgICAgbGFzdF9saW5lOiB0aGlzLmxhc3RfbGluZSxcbiAgICAgICAgICAgICAgZmlyc3RfY29sdW1uOiB0aGlzLnl5bGxvYy5maXJzdF9jb2x1bW4sXG4gICAgICAgICAgICAgIGxhc3RfY29sdW1uOiB0aGlzLnl5bGxvYy5sYXN0X2NvbHVtblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHl5dGV4dDogdGhpcy55eXRleHQsXG4gICAgICAgICAgICBtYXRjaDogdGhpcy5tYXRjaCxcbiAgICAgICAgICAgIG1hdGNoZXM6IHRoaXMubWF0Y2hlcyxcbiAgICAgICAgICAgIG1hdGNoZWQ6IHRoaXMubWF0Y2hlZCxcbiAgICAgICAgICAgIHl5bGVuZzogdGhpcy55eWxlbmcsXG4gICAgICAgICAgICBvZmZzZXQ6IHRoaXMub2Zmc2V0LFxuICAgICAgICAgICAgX21vcmU6IHRoaXMuX21vcmUsXG4gICAgICAgICAgICBfaW5wdXQ6IHRoaXMuX2lucHV0LFxuICAgICAgICAgICAgeXk6IHRoaXMueXksXG4gICAgICAgICAgICBjb25kaXRpb25TdGFjazogdGhpcy5jb25kaXRpb25TdGFjay5zbGljZSgwKSxcbiAgICAgICAgICAgIGRvbmU6IHRoaXMuZG9uZVxuICAgICAgICAgIH07XG4gICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5yYW5nZXMpIHtcbiAgICAgICAgICAgIGJhY2t1cC55eWxsb2MucmFuZ2UgPSB0aGlzLnl5bGxvYy5yYW5nZS5zbGljZSgwKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgbGluZXMgPSBtYXRjaFswXS5tYXRjaCgvKD86XFxyXFxuP3xcXG4pLiovZyk7XG4gICAgICAgIGlmIChsaW5lcykge1xuICAgICAgICAgIHRoaXMueXlsaW5lbm8gKz0gbGluZXMubGVuZ3RoO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMueXlsbG9jID0ge1xuICAgICAgICAgIGZpcnN0X2xpbmU6IHRoaXMueXlsbG9jLmxhc3RfbGluZSxcbiAgICAgICAgICBsYXN0X2xpbmU6IHRoaXMueXlsaW5lbm8gKyAxLFxuICAgICAgICAgIGZpcnN0X2NvbHVtbjogdGhpcy55eWxsb2MubGFzdF9jb2x1bW4sXG4gICAgICAgICAgbGFzdF9jb2x1bW46IGxpbmVzID8gbGluZXNbbGluZXMubGVuZ3RoIC0gMV0ubGVuZ3RoIC0gbGluZXNbbGluZXMubGVuZ3RoIC0gMV0ubWF0Y2goL1xccj9cXG4/LylbMF0ubGVuZ3RoIDogdGhpcy55eWxsb2MubGFzdF9jb2x1bW4gKyBtYXRjaFswXS5sZW5ndGhcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy55eXRleHQgKz0gbWF0Y2hbMF07XG4gICAgICAgIHRoaXMubWF0Y2ggKz0gbWF0Y2hbMF07XG4gICAgICAgIHRoaXMubWF0Y2hlcyA9IG1hdGNoO1xuICAgICAgICB0aGlzLnl5bGVuZyA9IHRoaXMueXl0ZXh0Lmxlbmd0aDtcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5yYW5nZXMpIHtcbiAgICAgICAgICB0aGlzLnl5bGxvYy5yYW5nZSA9IFt0aGlzLm9mZnNldCwgdGhpcy5vZmZzZXQgKz0gdGhpcy55eWxlbmddO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX21vcmUgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fYmFja3RyYWNrID0gZmFsc2U7XG4gICAgICAgIHRoaXMuX2lucHV0ID0gdGhpcy5faW5wdXQuc2xpY2UobWF0Y2hbMF0ubGVuZ3RoKTtcbiAgICAgICAgdGhpcy5tYXRjaGVkICs9IG1hdGNoWzBdO1xuICAgICAgICB0b2tlbiA9IHRoaXMucGVyZm9ybUFjdGlvbi5jYWxsKHRoaXMsIHRoaXMueXksIHRoaXMsIGluZGV4ZWRfcnVsZSwgdGhpcy5jb25kaXRpb25TdGFja1t0aGlzLmNvbmRpdGlvblN0YWNrLmxlbmd0aCAtIDFdKTtcbiAgICAgICAgaWYgKHRoaXMuZG9uZSAmJiB0aGlzLl9pbnB1dCkge1xuICAgICAgICAgIHRoaXMuZG9uZSA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0b2tlbikge1xuICAgICAgICAgIHJldHVybiB0b2tlbjtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLl9iYWNrdHJhY2spIHtcbiAgICAgICAgICBmb3IgKHZhciBrIGluIGJhY2t1cCkge1xuICAgICAgICAgICAgdGhpc1trXSA9IGJhY2t1cFtrXTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH0sXG4gICAgICAvLyByZXR1cm4gbmV4dCBtYXRjaCBpbiBpbnB1dFxuICAgICAgbmV4dDogZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICh0aGlzLmRvbmUpIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5FT0Y7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLl9pbnB1dCkge1xuICAgICAgICAgIHRoaXMuZG9uZSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHRva2VuLCBtYXRjaCwgdGVtcE1hdGNoLCBpbmRleDtcbiAgICAgICAgaWYgKCF0aGlzLl9tb3JlKSB7XG4gICAgICAgICAgdGhpcy55eXRleHQgPSBcIlwiO1xuICAgICAgICAgIHRoaXMubWF0Y2ggPSBcIlwiO1xuICAgICAgICB9XG4gICAgICAgIHZhciBydWxlcyA9IHRoaXMuX2N1cnJlbnRSdWxlcygpO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJ1bGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgdGVtcE1hdGNoID0gdGhpcy5faW5wdXQubWF0Y2godGhpcy5ydWxlc1tydWxlc1tpXV0pO1xuICAgICAgICAgIGlmICh0ZW1wTWF0Y2ggJiYgKCFtYXRjaCB8fCB0ZW1wTWF0Y2hbMF0ubGVuZ3RoID4gbWF0Y2hbMF0ubGVuZ3RoKSkge1xuICAgICAgICAgICAgbWF0Y2ggPSB0ZW1wTWF0Y2g7XG4gICAgICAgICAgICBpbmRleCA9IGk7XG4gICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLmJhY2t0cmFja19sZXhlcikge1xuICAgICAgICAgICAgICB0b2tlbiA9IHRoaXMudGVzdF9tYXRjaCh0ZW1wTWF0Y2gsIHJ1bGVzW2ldKTtcbiAgICAgICAgICAgICAgaWYgKHRva2VuICE9PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0b2tlbjtcbiAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLl9iYWNrdHJhY2spIHtcbiAgICAgICAgICAgICAgICBtYXRjaCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmICghdGhpcy5vcHRpb25zLmZsZXgpIHtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChtYXRjaCkge1xuICAgICAgICAgIHRva2VuID0gdGhpcy50ZXN0X21hdGNoKG1hdGNoLCBydWxlc1tpbmRleF0pO1xuICAgICAgICAgIGlmICh0b2tlbiAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgIHJldHVybiB0b2tlbjtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLl9pbnB1dCA9PT0gXCJcIikge1xuICAgICAgICAgIHJldHVybiB0aGlzLkVPRjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5wYXJzZUVycm9yKFwiTGV4aWNhbCBlcnJvciBvbiBsaW5lIFwiICsgKHRoaXMueXlsaW5lbm8gKyAxKSArIFwiLiBVbnJlY29nbml6ZWQgdGV4dC5cXG5cIiArIHRoaXMuc2hvd1Bvc2l0aW9uKCksIHtcbiAgICAgICAgICAgIHRleHQ6IFwiXCIsXG4gICAgICAgICAgICB0b2tlbjogbnVsbCxcbiAgICAgICAgICAgIGxpbmU6IHRoaXMueXlsaW5lbm9cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIC8vIHJldHVybiBuZXh0IG1hdGNoIHRoYXQgaGFzIGEgdG9rZW5cbiAgICAgIGxleDogZnVuY3Rpb24gbGV4KCkge1xuICAgICAgICB2YXIgciA9IHRoaXMubmV4dCgpO1xuICAgICAgICBpZiAocikge1xuICAgICAgICAgIHJldHVybiByO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiB0aGlzLmxleCgpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgLy8gYWN0aXZhdGVzIGEgbmV3IGxleGVyIGNvbmRpdGlvbiBzdGF0ZSAocHVzaGVzIHRoZSBuZXcgbGV4ZXIgY29uZGl0aW9uIHN0YXRlIG9udG8gdGhlIGNvbmRpdGlvbiBzdGFjaylcbiAgICAgIGJlZ2luOiBmdW5jdGlvbiBiZWdpbihjb25kaXRpb24pIHtcbiAgICAgICAgdGhpcy5jb25kaXRpb25TdGFjay5wdXNoKGNvbmRpdGlvbik7XG4gICAgICB9LFxuICAgICAgLy8gcG9wIHRoZSBwcmV2aW91c2x5IGFjdGl2ZSBsZXhlciBjb25kaXRpb24gc3RhdGUgb2ZmIHRoZSBjb25kaXRpb24gc3RhY2tcbiAgICAgIHBvcFN0YXRlOiBmdW5jdGlvbiBwb3BTdGF0ZSgpIHtcbiAgICAgICAgdmFyIG4gPSB0aGlzLmNvbmRpdGlvblN0YWNrLmxlbmd0aCAtIDE7XG4gICAgICAgIGlmIChuID4gMCkge1xuICAgICAgICAgIHJldHVybiB0aGlzLmNvbmRpdGlvblN0YWNrLnBvcCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiB0aGlzLmNvbmRpdGlvblN0YWNrWzBdO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgLy8gcHJvZHVjZSB0aGUgbGV4ZXIgcnVsZSBzZXQgd2hpY2ggaXMgYWN0aXZlIGZvciB0aGUgY3VycmVudGx5IGFjdGl2ZSBsZXhlciBjb25kaXRpb24gc3RhdGVcbiAgICAgIF9jdXJyZW50UnVsZXM6IGZ1bmN0aW9uIF9jdXJyZW50UnVsZXMoKSB7XG4gICAgICAgIGlmICh0aGlzLmNvbmRpdGlvblN0YWNrLmxlbmd0aCAmJiB0aGlzLmNvbmRpdGlvblN0YWNrW3RoaXMuY29uZGl0aW9uU3RhY2subGVuZ3RoIC0gMV0pIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5jb25kaXRpb25zW3RoaXMuY29uZGl0aW9uU3RhY2tbdGhpcy5jb25kaXRpb25TdGFjay5sZW5ndGggLSAxXV0ucnVsZXM7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuY29uZGl0aW9uc1tcIklOSVRJQUxcIl0ucnVsZXM7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICAvLyByZXR1cm4gdGhlIGN1cnJlbnRseSBhY3RpdmUgbGV4ZXIgY29uZGl0aW9uIHN0YXRlOyB3aGVuIGFuIGluZGV4IGFyZ3VtZW50IGlzIHByb3ZpZGVkIGl0IHByb2R1Y2VzIHRoZSBOLXRoIHByZXZpb3VzIGNvbmRpdGlvbiBzdGF0ZSwgaWYgYXZhaWxhYmxlXG4gICAgICB0b3BTdGF0ZTogZnVuY3Rpb24gdG9wU3RhdGUobikge1xuICAgICAgICBuID0gdGhpcy5jb25kaXRpb25TdGFjay5sZW5ndGggLSAxIC0gTWF0aC5hYnMobiB8fCAwKTtcbiAgICAgICAgaWYgKG4gPj0gMCkge1xuICAgICAgICAgIHJldHVybiB0aGlzLmNvbmRpdGlvblN0YWNrW25dO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBcIklOSVRJQUxcIjtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIC8vIGFsaWFzIGZvciBiZWdpbihjb25kaXRpb24pXG4gICAgICBwdXNoU3RhdGU6IGZ1bmN0aW9uIHB1c2hTdGF0ZShjb25kaXRpb24pIHtcbiAgICAgICAgdGhpcy5iZWdpbihjb25kaXRpb24pO1xuICAgICAgfSxcbiAgICAgIC8vIHJldHVybiB0aGUgbnVtYmVyIG9mIHN0YXRlcyBjdXJyZW50bHkgb24gdGhlIHN0YWNrXG4gICAgICBzdGF0ZVN0YWNrU2l6ZTogZnVuY3Rpb24gc3RhdGVTdGFja1NpemUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbmRpdGlvblN0YWNrLmxlbmd0aDtcbiAgICAgIH0sXG4gICAgICBvcHRpb25zOiB7fSxcbiAgICAgIHBlcmZvcm1BY3Rpb246IGZ1bmN0aW9uIGFub255bW91cyh5eSwgeXlfLCAkYXZvaWRpbmdfbmFtZV9jb2xsaXNpb25zLCBZWV9TVEFSVCkge1xuICAgICAgICBzd2l0Y2ggKCRhdm9pZGluZ19uYW1lX2NvbGxpc2lvbnMpIHtcbiAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICByZXR1cm4gMTA7XG4gICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgeXkuZ2V0TG9nZ2VyKCkuZGVidWcoXCJGb3VuZCBzcGFjZS1ibG9ja1wiKTtcbiAgICAgICAgICAgIHJldHVybiAzMTtcbiAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICB5eS5nZXRMb2dnZXIoKS5kZWJ1ZyhcIkZvdW5kIG5sLWJsb2NrXCIpO1xuICAgICAgICAgICAgcmV0dXJuIDMxO1xuICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgIHl5LmdldExvZ2dlcigpLmRlYnVnKFwiRm91bmQgc3BhY2UtYmxvY2tcIik7XG4gICAgICAgICAgICByZXR1cm4gMjk7XG4gICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgeXkuZ2V0TG9nZ2VyKCkuZGVidWcoXCIuXCIsIHl5Xy55eXRleHQpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgeXkuZ2V0TG9nZ2VyKCkuZGVidWcoXCJfXCIsIHl5Xy55eXRleHQpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSA2OlxuICAgICAgICAgICAgcmV0dXJuIDU7XG4gICAgICAgICAgY2FzZSA3OlxuICAgICAgICAgICAgeXlfLnl5dGV4dCA9IC0xO1xuICAgICAgICAgICAgcmV0dXJuIDI4O1xuICAgICAgICAgIGNhc2UgODpcbiAgICAgICAgICAgIHl5Xy55eXRleHQgPSB5eV8ueXl0ZXh0LnJlcGxhY2UoL2NvbHVtbnNcXHMrLywgXCJcIik7XG4gICAgICAgICAgICB5eS5nZXRMb2dnZXIoKS5kZWJ1ZyhcIkNPTFVNTlMgKExFWClcIiwgeXlfLnl5dGV4dCk7XG4gICAgICAgICAgICByZXR1cm4gMjg7XG4gICAgICAgICAgY2FzZSA5OlxuICAgICAgICAgICAgdGhpcy5wdXNoU3RhdGUoXCJtZF9zdHJpbmdcIik7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIDEwOlxuICAgICAgICAgICAgcmV0dXJuIFwiTURfU1RSXCI7XG4gICAgICAgICAgY2FzZSAxMTpcbiAgICAgICAgICAgIHRoaXMucG9wU3RhdGUoKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgMTI6XG4gICAgICAgICAgICB0aGlzLnB1c2hTdGF0ZShcInN0cmluZ1wiKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgMTM6XG4gICAgICAgICAgICB5eS5nZXRMb2dnZXIoKS5kZWJ1ZyhcIkxFWDogUE9QUElORyBTVFI6XCIsIHl5Xy55eXRleHQpO1xuICAgICAgICAgICAgdGhpcy5wb3BTdGF0ZSgpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSAxNDpcbiAgICAgICAgICAgIHl5LmdldExvZ2dlcigpLmRlYnVnKFwiTEVYOiBTVFIgZW5kOlwiLCB5eV8ueXl0ZXh0KTtcbiAgICAgICAgICAgIHJldHVybiBcIlNUUlwiO1xuICAgICAgICAgIGNhc2UgMTU6XG4gICAgICAgICAgICB5eV8ueXl0ZXh0ID0geXlfLnl5dGV4dC5yZXBsYWNlKC9zcGFjZVxcOi8sIFwiXCIpO1xuICAgICAgICAgICAgeXkuZ2V0TG9nZ2VyKCkuZGVidWcoXCJTUEFDRSBOVU0gKExFWClcIiwgeXlfLnl5dGV4dCk7XG4gICAgICAgICAgICByZXR1cm4gMjE7XG4gICAgICAgICAgY2FzZSAxNjpcbiAgICAgICAgICAgIHl5Xy55eXRleHQgPSBcIjFcIjtcbiAgICAgICAgICAgIHl5LmdldExvZ2dlcigpLmRlYnVnKFwiQ09MVU1OUyAoTEVYKVwiLCB5eV8ueXl0ZXh0KTtcbiAgICAgICAgICAgIHJldHVybiAyMTtcbiAgICAgICAgICBjYXNlIDE3OlxuICAgICAgICAgICAgcmV0dXJuIDQzO1xuICAgICAgICAgIGNhc2UgMTg6XG4gICAgICAgICAgICByZXR1cm4gXCJMSU5LU1RZTEVcIjtcbiAgICAgICAgICBjYXNlIDE5OlxuICAgICAgICAgICAgcmV0dXJuIFwiSU5URVJQT0xBVEVcIjtcbiAgICAgICAgICBjYXNlIDIwOlxuICAgICAgICAgICAgdGhpcy5wdXNoU3RhdGUoXCJDTEFTU0RFRlwiKTtcbiAgICAgICAgICAgIHJldHVybiA0MDtcbiAgICAgICAgICBjYXNlIDIxOlxuICAgICAgICAgICAgdGhpcy5wb3BTdGF0ZSgpO1xuICAgICAgICAgICAgdGhpcy5wdXNoU3RhdGUoXCJDTEFTU0RFRklEXCIpO1xuICAgICAgICAgICAgcmV0dXJuIFwiREVGQVVMVF9DTEFTU0RFRl9JRFwiO1xuICAgICAgICAgIGNhc2UgMjI6XG4gICAgICAgICAgICB0aGlzLnBvcFN0YXRlKCk7XG4gICAgICAgICAgICB0aGlzLnB1c2hTdGF0ZShcIkNMQVNTREVGSURcIik7XG4gICAgICAgICAgICByZXR1cm4gNDE7XG4gICAgICAgICAgY2FzZSAyMzpcbiAgICAgICAgICAgIHRoaXMucG9wU3RhdGUoKTtcbiAgICAgICAgICAgIHJldHVybiA0MjtcbiAgICAgICAgICBjYXNlIDI0OlxuICAgICAgICAgICAgdGhpcy5wdXNoU3RhdGUoXCJDTEFTU1wiKTtcbiAgICAgICAgICAgIHJldHVybiA0NDtcbiAgICAgICAgICBjYXNlIDI1OlxuICAgICAgICAgICAgdGhpcy5wb3BTdGF0ZSgpO1xuICAgICAgICAgICAgdGhpcy5wdXNoU3RhdGUoXCJDTEFTU19TVFlMRVwiKTtcbiAgICAgICAgICAgIHJldHVybiA0NTtcbiAgICAgICAgICBjYXNlIDI2OlxuICAgICAgICAgICAgdGhpcy5wb3BTdGF0ZSgpO1xuICAgICAgICAgICAgcmV0dXJuIDQ2O1xuICAgICAgICAgIGNhc2UgMjc6XG4gICAgICAgICAgICB0aGlzLnB1c2hTdGF0ZShcIlNUWUxFX1NUTU5UXCIpO1xuICAgICAgICAgICAgcmV0dXJuIDQ3O1xuICAgICAgICAgIGNhc2UgMjg6XG4gICAgICAgICAgICB0aGlzLnBvcFN0YXRlKCk7XG4gICAgICAgICAgICB0aGlzLnB1c2hTdGF0ZShcIlNUWUxFX0RFRklOSVRJT05cIik7XG4gICAgICAgICAgICByZXR1cm4gNDg7XG4gICAgICAgICAgY2FzZSAyOTpcbiAgICAgICAgICAgIHRoaXMucG9wU3RhdGUoKTtcbiAgICAgICAgICAgIHJldHVybiA0OTtcbiAgICAgICAgICBjYXNlIDMwOlxuICAgICAgICAgICAgdGhpcy5wdXNoU3RhdGUoXCJhY2NfdGl0bGVcIik7XG4gICAgICAgICAgICByZXR1cm4gXCJhY2NfdGl0bGVcIjtcbiAgICAgICAgICBjYXNlIDMxOlxuICAgICAgICAgICAgdGhpcy5wb3BTdGF0ZSgpO1xuICAgICAgICAgICAgcmV0dXJuIFwiYWNjX3RpdGxlX3ZhbHVlXCI7XG4gICAgICAgICAgY2FzZSAzMjpcbiAgICAgICAgICAgIHRoaXMucHVzaFN0YXRlKFwiYWNjX2Rlc2NyXCIpO1xuICAgICAgICAgICAgcmV0dXJuIFwiYWNjX2Rlc2NyXCI7XG4gICAgICAgICAgY2FzZSAzMzpcbiAgICAgICAgICAgIHRoaXMucG9wU3RhdGUoKTtcbiAgICAgICAgICAgIHJldHVybiBcImFjY19kZXNjcl92YWx1ZVwiO1xuICAgICAgICAgIGNhc2UgMzQ6XG4gICAgICAgICAgICB0aGlzLnB1c2hTdGF0ZShcImFjY19kZXNjcl9tdWx0aWxpbmVcIik7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIDM1OlxuICAgICAgICAgICAgdGhpcy5wb3BTdGF0ZSgpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSAzNjpcbiAgICAgICAgICAgIHJldHVybiBcImFjY19kZXNjcl9tdWx0aWxpbmVfdmFsdWVcIjtcbiAgICAgICAgICBjYXNlIDM3OlxuICAgICAgICAgICAgcmV0dXJuIDMwO1xuICAgICAgICAgIGNhc2UgMzg6XG4gICAgICAgICAgICB0aGlzLnBvcFN0YXRlKCk7XG4gICAgICAgICAgICB5eS5nZXRMb2dnZXIoKS5kZWJ1ZyhcIkxleDogKChcIik7XG4gICAgICAgICAgICByZXR1cm4gXCJOT0RFX0RFTkRcIjtcbiAgICAgICAgICBjYXNlIDM5OlxuICAgICAgICAgICAgdGhpcy5wb3BTdGF0ZSgpO1xuICAgICAgICAgICAgeXkuZ2V0TG9nZ2VyKCkuZGVidWcoXCJMZXg6ICgoXCIpO1xuICAgICAgICAgICAgcmV0dXJuIFwiTk9ERV9ERU5EXCI7XG4gICAgICAgICAgY2FzZSA0MDpcbiAgICAgICAgICAgIHRoaXMucG9wU3RhdGUoKTtcbiAgICAgICAgICAgIHl5LmdldExvZ2dlcigpLmRlYnVnKFwiTGV4OiApKVwiKTtcbiAgICAgICAgICAgIHJldHVybiBcIk5PREVfREVORFwiO1xuICAgICAgICAgIGNhc2UgNDE6XG4gICAgICAgICAgICB0aGlzLnBvcFN0YXRlKCk7XG4gICAgICAgICAgICB5eS5nZXRMb2dnZXIoKS5kZWJ1ZyhcIkxleDogKChcIik7XG4gICAgICAgICAgICByZXR1cm4gXCJOT0RFX0RFTkRcIjtcbiAgICAgICAgICBjYXNlIDQyOlxuICAgICAgICAgICAgdGhpcy5wb3BTdGF0ZSgpO1xuICAgICAgICAgICAgeXkuZ2V0TG9nZ2VyKCkuZGVidWcoXCJMZXg6ICgoXCIpO1xuICAgICAgICAgICAgcmV0dXJuIFwiTk9ERV9ERU5EXCI7XG4gICAgICAgICAgY2FzZSA0MzpcbiAgICAgICAgICAgIHRoaXMucG9wU3RhdGUoKTtcbiAgICAgICAgICAgIHl5LmdldExvZ2dlcigpLmRlYnVnKFwiTGV4OiAoLVwiKTtcbiAgICAgICAgICAgIHJldHVybiBcIk5PREVfREVORFwiO1xuICAgICAgICAgIGNhc2UgNDQ6XG4gICAgICAgICAgICB0aGlzLnBvcFN0YXRlKCk7XG4gICAgICAgICAgICB5eS5nZXRMb2dnZXIoKS5kZWJ1ZyhcIkxleDogLSlcIik7XG4gICAgICAgICAgICByZXR1cm4gXCJOT0RFX0RFTkRcIjtcbiAgICAgICAgICBjYXNlIDQ1OlxuICAgICAgICAgICAgdGhpcy5wb3BTdGF0ZSgpO1xuICAgICAgICAgICAgeXkuZ2V0TG9nZ2VyKCkuZGVidWcoXCJMZXg6ICgoXCIpO1xuICAgICAgICAgICAgcmV0dXJuIFwiTk9ERV9ERU5EXCI7XG4gICAgICAgICAgY2FzZSA0NjpcbiAgICAgICAgICAgIHRoaXMucG9wU3RhdGUoKTtcbiAgICAgICAgICAgIHl5LmdldExvZ2dlcigpLmRlYnVnKFwiTGV4OiBdXVwiKTtcbiAgICAgICAgICAgIHJldHVybiBcIk5PREVfREVORFwiO1xuICAgICAgICAgIGNhc2UgNDc6XG4gICAgICAgICAgICB0aGlzLnBvcFN0YXRlKCk7XG4gICAgICAgICAgICB5eS5nZXRMb2dnZXIoKS5kZWJ1ZyhcIkxleDogKFwiKTtcbiAgICAgICAgICAgIHJldHVybiBcIk5PREVfREVORFwiO1xuICAgICAgICAgIGNhc2UgNDg6XG4gICAgICAgICAgICB0aGlzLnBvcFN0YXRlKCk7XG4gICAgICAgICAgICB5eS5nZXRMb2dnZXIoKS5kZWJ1ZyhcIkxleDogXSlcIik7XG4gICAgICAgICAgICByZXR1cm4gXCJOT0RFX0RFTkRcIjtcbiAgICAgICAgICBjYXNlIDQ5OlxuICAgICAgICAgICAgdGhpcy5wb3BTdGF0ZSgpO1xuICAgICAgICAgICAgeXkuZ2V0TG9nZ2VyKCkuZGVidWcoXCJMZXg6IC9dXCIpO1xuICAgICAgICAgICAgcmV0dXJuIFwiTk9ERV9ERU5EXCI7XG4gICAgICAgICAgY2FzZSA1MDpcbiAgICAgICAgICAgIHRoaXMucG9wU3RhdGUoKTtcbiAgICAgICAgICAgIHl5LmdldExvZ2dlcigpLmRlYnVnKFwiTGV4OiAvXVwiKTtcbiAgICAgICAgICAgIHJldHVybiBcIk5PREVfREVORFwiO1xuICAgICAgICAgIGNhc2UgNTE6XG4gICAgICAgICAgICB0aGlzLnBvcFN0YXRlKCk7XG4gICAgICAgICAgICB5eS5nZXRMb2dnZXIoKS5kZWJ1ZyhcIkxleDogKV1cIik7XG4gICAgICAgICAgICByZXR1cm4gXCJOT0RFX0RFTkRcIjtcbiAgICAgICAgICBjYXNlIDUyOlxuICAgICAgICAgICAgdGhpcy5wb3BTdGF0ZSgpO1xuICAgICAgICAgICAgeXkuZ2V0TG9nZ2VyKCkuZGVidWcoXCJMZXg6IClcIik7XG4gICAgICAgICAgICByZXR1cm4gXCJOT0RFX0RFTkRcIjtcbiAgICAgICAgICBjYXNlIDUzOlxuICAgICAgICAgICAgdGhpcy5wb3BTdGF0ZSgpO1xuICAgICAgICAgICAgeXkuZ2V0TG9nZ2VyKCkuZGVidWcoXCJMZXg6IF0+XCIpO1xuICAgICAgICAgICAgcmV0dXJuIFwiTk9ERV9ERU5EXCI7XG4gICAgICAgICAgY2FzZSA1NDpcbiAgICAgICAgICAgIHRoaXMucG9wU3RhdGUoKTtcbiAgICAgICAgICAgIHl5LmdldExvZ2dlcigpLmRlYnVnKFwiTGV4OiBdXCIpO1xuICAgICAgICAgICAgcmV0dXJuIFwiTk9ERV9ERU5EXCI7XG4gICAgICAgICAgY2FzZSA1NTpcbiAgICAgICAgICAgIHl5LmdldExvZ2dlcigpLmRlYnVnKFwiTGV4YTogLSlcIik7XG4gICAgICAgICAgICB0aGlzLnB1c2hTdGF0ZShcIk5PREVcIik7XG4gICAgICAgICAgICByZXR1cm4gMzY7XG4gICAgICAgICAgY2FzZSA1NjpcbiAgICAgICAgICAgIHl5LmdldExvZ2dlcigpLmRlYnVnKFwiTGV4YTogKC1cIik7XG4gICAgICAgICAgICB0aGlzLnB1c2hTdGF0ZShcIk5PREVcIik7XG4gICAgICAgICAgICByZXR1cm4gMzY7XG4gICAgICAgICAgY2FzZSA1NzpcbiAgICAgICAgICAgIHl5LmdldExvZ2dlcigpLmRlYnVnKFwiTGV4YTogKSlcIik7XG4gICAgICAgICAgICB0aGlzLnB1c2hTdGF0ZShcIk5PREVcIik7XG4gICAgICAgICAgICByZXR1cm4gMzY7XG4gICAgICAgICAgY2FzZSA1ODpcbiAgICAgICAgICAgIHl5LmdldExvZ2dlcigpLmRlYnVnKFwiTGV4YTogKVwiKTtcbiAgICAgICAgICAgIHRoaXMucHVzaFN0YXRlKFwiTk9ERVwiKTtcbiAgICAgICAgICAgIHJldHVybiAzNjtcbiAgICAgICAgICBjYXNlIDU5OlxuICAgICAgICAgICAgeXkuZ2V0TG9nZ2VyKCkuZGVidWcoXCJMZXg6ICgoKFwiKTtcbiAgICAgICAgICAgIHRoaXMucHVzaFN0YXRlKFwiTk9ERVwiKTtcbiAgICAgICAgICAgIHJldHVybiAzNjtcbiAgICAgICAgICBjYXNlIDYwOlxuICAgICAgICAgICAgeXkuZ2V0TG9nZ2VyKCkuZGVidWcoXCJMZXhhOiApXCIpO1xuICAgICAgICAgICAgdGhpcy5wdXNoU3RhdGUoXCJOT0RFXCIpO1xuICAgICAgICAgICAgcmV0dXJuIDM2O1xuICAgICAgICAgIGNhc2UgNjE6XG4gICAgICAgICAgICB5eS5nZXRMb2dnZXIoKS5kZWJ1ZyhcIkxleGE6IClcIik7XG4gICAgICAgICAgICB0aGlzLnB1c2hTdGF0ZShcIk5PREVcIik7XG4gICAgICAgICAgICByZXR1cm4gMzY7XG4gICAgICAgICAgY2FzZSA2MjpcbiAgICAgICAgICAgIHl5LmdldExvZ2dlcigpLmRlYnVnKFwiTGV4YTogKVwiKTtcbiAgICAgICAgICAgIHRoaXMucHVzaFN0YXRlKFwiTk9ERVwiKTtcbiAgICAgICAgICAgIHJldHVybiAzNjtcbiAgICAgICAgICBjYXNlIDYzOlxuICAgICAgICAgICAgeXkuZ2V0TG9nZ2VyKCkuZGVidWcoXCJMZXhjOiA+XCIpO1xuICAgICAgICAgICAgdGhpcy5wdXNoU3RhdGUoXCJOT0RFXCIpO1xuICAgICAgICAgICAgcmV0dXJuIDM2O1xuICAgICAgICAgIGNhc2UgNjQ6XG4gICAgICAgICAgICB5eS5nZXRMb2dnZXIoKS5kZWJ1ZyhcIkxleGE6IChbXCIpO1xuICAgICAgICAgICAgdGhpcy5wdXNoU3RhdGUoXCJOT0RFXCIpO1xuICAgICAgICAgICAgcmV0dXJuIDM2O1xuICAgICAgICAgIGNhc2UgNjU6XG4gICAgICAgICAgICB5eS5nZXRMb2dnZXIoKS5kZWJ1ZyhcIkxleGE6IClcIik7XG4gICAgICAgICAgICB0aGlzLnB1c2hTdGF0ZShcIk5PREVcIik7XG4gICAgICAgICAgICByZXR1cm4gMzY7XG4gICAgICAgICAgY2FzZSA2NjpcbiAgICAgICAgICAgIHRoaXMucHVzaFN0YXRlKFwiTk9ERVwiKTtcbiAgICAgICAgICAgIHJldHVybiAzNjtcbiAgICAgICAgICBjYXNlIDY3OlxuICAgICAgICAgICAgdGhpcy5wdXNoU3RhdGUoXCJOT0RFXCIpO1xuICAgICAgICAgICAgcmV0dXJuIDM2O1xuICAgICAgICAgIGNhc2UgNjg6XG4gICAgICAgICAgICB0aGlzLnB1c2hTdGF0ZShcIk5PREVcIik7XG4gICAgICAgICAgICByZXR1cm4gMzY7XG4gICAgICAgICAgY2FzZSA2OTpcbiAgICAgICAgICAgIHRoaXMucHVzaFN0YXRlKFwiTk9ERVwiKTtcbiAgICAgICAgICAgIHJldHVybiAzNjtcbiAgICAgICAgICBjYXNlIDcwOlxuICAgICAgICAgICAgdGhpcy5wdXNoU3RhdGUoXCJOT0RFXCIpO1xuICAgICAgICAgICAgcmV0dXJuIDM2O1xuICAgICAgICAgIGNhc2UgNzE6XG4gICAgICAgICAgICB0aGlzLnB1c2hTdGF0ZShcIk5PREVcIik7XG4gICAgICAgICAgICByZXR1cm4gMzY7XG4gICAgICAgICAgY2FzZSA3MjpcbiAgICAgICAgICAgIHRoaXMucHVzaFN0YXRlKFwiTk9ERVwiKTtcbiAgICAgICAgICAgIHJldHVybiAzNjtcbiAgICAgICAgICBjYXNlIDczOlxuICAgICAgICAgICAgeXkuZ2V0TG9nZ2VyKCkuZGVidWcoXCJMZXhhOiBbXCIpO1xuICAgICAgICAgICAgdGhpcy5wdXNoU3RhdGUoXCJOT0RFXCIpO1xuICAgICAgICAgICAgcmV0dXJuIDM2O1xuICAgICAgICAgIGNhc2UgNzQ6XG4gICAgICAgICAgICB0aGlzLnB1c2hTdGF0ZShcIkJMT0NLX0FSUk9XXCIpO1xuICAgICAgICAgICAgeXkuZ2V0TG9nZ2VyKCkuZGVidWcoXCJMRVggQVJSIFNUQVJUXCIpO1xuICAgICAgICAgICAgcmV0dXJuIDM4O1xuICAgICAgICAgIGNhc2UgNzU6XG4gICAgICAgICAgICB5eS5nZXRMb2dnZXIoKS5kZWJ1ZyhcIkxleDogTk9ERV9JRFwiLCB5eV8ueXl0ZXh0KTtcbiAgICAgICAgICAgIHJldHVybiAzMjtcbiAgICAgICAgICBjYXNlIDc2OlxuICAgICAgICAgICAgeXkuZ2V0TG9nZ2VyKCkuZGVidWcoXCJMZXg6IEVPRlwiLCB5eV8ueXl0ZXh0KTtcbiAgICAgICAgICAgIHJldHVybiA4O1xuICAgICAgICAgIGNhc2UgNzc6XG4gICAgICAgICAgICB0aGlzLnB1c2hTdGF0ZShcIm1kX3N0cmluZ1wiKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgNzg6XG4gICAgICAgICAgICB0aGlzLnB1c2hTdGF0ZShcIm1kX3N0cmluZ1wiKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgNzk6XG4gICAgICAgICAgICByZXR1cm4gXCJOT0RFX0RFU0NSXCI7XG4gICAgICAgICAgY2FzZSA4MDpcbiAgICAgICAgICAgIHRoaXMucG9wU3RhdGUoKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgODE6XG4gICAgICAgICAgICB5eS5nZXRMb2dnZXIoKS5kZWJ1ZyhcIkxleDogU3RhcnRpbmcgc3RyaW5nXCIpO1xuICAgICAgICAgICAgdGhpcy5wdXNoU3RhdGUoXCJzdHJpbmdcIik7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIDgyOlxuICAgICAgICAgICAgeXkuZ2V0TG9nZ2VyKCkuZGVidWcoXCJMRVggQVJSOiBTdGFydGluZyBzdHJpbmdcIik7XG4gICAgICAgICAgICB0aGlzLnB1c2hTdGF0ZShcInN0cmluZ1wiKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgODM6XG4gICAgICAgICAgICB5eS5nZXRMb2dnZXIoKS5kZWJ1ZyhcIkxFWDogTk9ERV9ERVNDUjpcIiwgeXlfLnl5dGV4dCk7XG4gICAgICAgICAgICByZXR1cm4gXCJOT0RFX0RFU0NSXCI7XG4gICAgICAgICAgY2FzZSA4NDpcbiAgICAgICAgICAgIHl5LmdldExvZ2dlcigpLmRlYnVnKFwiTEVYIFBPUFBJTkdcIik7XG4gICAgICAgICAgICB0aGlzLnBvcFN0YXRlKCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIDg1OlxuICAgICAgICAgICAgeXkuZ2V0TG9nZ2VyKCkuZGVidWcoXCJMZXg6ID0+QkFFXCIpO1xuICAgICAgICAgICAgdGhpcy5wdXNoU3RhdGUoXCJBUlJPV19ESVJcIik7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIDg2OlxuICAgICAgICAgICAgeXlfLnl5dGV4dCA9IHl5Xy55eXRleHQucmVwbGFjZSgvXixcXHMqLywgXCJcIik7XG4gICAgICAgICAgICB5eS5nZXRMb2dnZXIoKS5kZWJ1ZyhcIkxleCAocmlnaHQpOiBkaXI6XCIsIHl5Xy55eXRleHQpO1xuICAgICAgICAgICAgcmV0dXJuIFwiRElSXCI7XG4gICAgICAgICAgY2FzZSA4NzpcbiAgICAgICAgICAgIHl5Xy55eXRleHQgPSB5eV8ueXl0ZXh0LnJlcGxhY2UoL14sXFxzKi8sIFwiXCIpO1xuICAgICAgICAgICAgeXkuZ2V0TG9nZ2VyKCkuZGVidWcoXCJMZXggKGxlZnQpOlwiLCB5eV8ueXl0ZXh0KTtcbiAgICAgICAgICAgIHJldHVybiBcIkRJUlwiO1xuICAgICAgICAgIGNhc2UgODg6XG4gICAgICAgICAgICB5eV8ueXl0ZXh0ID0geXlfLnl5dGV4dC5yZXBsYWNlKC9eLFxccyovLCBcIlwiKTtcbiAgICAgICAgICAgIHl5LmdldExvZ2dlcigpLmRlYnVnKFwiTGV4ICh4KTpcIiwgeXlfLnl5dGV4dCk7XG4gICAgICAgICAgICByZXR1cm4gXCJESVJcIjtcbiAgICAgICAgICBjYXNlIDg5OlxuICAgICAgICAgICAgeXlfLnl5dGV4dCA9IHl5Xy55eXRleHQucmVwbGFjZSgvXixcXHMqLywgXCJcIik7XG4gICAgICAgICAgICB5eS5nZXRMb2dnZXIoKS5kZWJ1ZyhcIkxleCAoeSk6XCIsIHl5Xy55eXRleHQpO1xuICAgICAgICAgICAgcmV0dXJuIFwiRElSXCI7XG4gICAgICAgICAgY2FzZSA5MDpcbiAgICAgICAgICAgIHl5Xy55eXRleHQgPSB5eV8ueXl0ZXh0LnJlcGxhY2UoL14sXFxzKi8sIFwiXCIpO1xuICAgICAgICAgICAgeXkuZ2V0TG9nZ2VyKCkuZGVidWcoXCJMZXggKHVwKTpcIiwgeXlfLnl5dGV4dCk7XG4gICAgICAgICAgICByZXR1cm4gXCJESVJcIjtcbiAgICAgICAgICBjYXNlIDkxOlxuICAgICAgICAgICAgeXlfLnl5dGV4dCA9IHl5Xy55eXRleHQucmVwbGFjZSgvXixcXHMqLywgXCJcIik7XG4gICAgICAgICAgICB5eS5nZXRMb2dnZXIoKS5kZWJ1ZyhcIkxleCAoZG93bik6XCIsIHl5Xy55eXRleHQpO1xuICAgICAgICAgICAgcmV0dXJuIFwiRElSXCI7XG4gICAgICAgICAgY2FzZSA5MjpcbiAgICAgICAgICAgIHl5Xy55eXRleHQgPSBcIl0+XCI7XG4gICAgICAgICAgICB5eS5nZXRMb2dnZXIoKS5kZWJ1ZyhcIkxleCAoQVJST1dfRElSIGVuZCk6XCIsIHl5Xy55eXRleHQpO1xuICAgICAgICAgICAgdGhpcy5wb3BTdGF0ZSgpO1xuICAgICAgICAgICAgdGhpcy5wb3BTdGF0ZSgpO1xuICAgICAgICAgICAgcmV0dXJuIFwiQkxPQ0tfQVJST1dfRU5EXCI7XG4gICAgICAgICAgY2FzZSA5MzpcbiAgICAgICAgICAgIHl5LmdldExvZ2dlcigpLmRlYnVnKFwiTGV4OiBMSU5LXCIsIFwiI1wiICsgeXlfLnl5dGV4dCArIFwiI1wiKTtcbiAgICAgICAgICAgIHJldHVybiAxNTtcbiAgICAgICAgICBjYXNlIDk0OlxuICAgICAgICAgICAgeXkuZ2V0TG9nZ2VyKCkuZGVidWcoXCJMZXg6IExJTktcIiwgeXlfLnl5dGV4dCk7XG4gICAgICAgICAgICByZXR1cm4gMTU7XG4gICAgICAgICAgY2FzZSA5NTpcbiAgICAgICAgICAgIHl5LmdldExvZ2dlcigpLmRlYnVnKFwiTGV4OiBMSU5LXCIsIHl5Xy55eXRleHQpO1xuICAgICAgICAgICAgcmV0dXJuIDE1O1xuICAgICAgICAgIGNhc2UgOTY6XG4gICAgICAgICAgICB5eS5nZXRMb2dnZXIoKS5kZWJ1ZyhcIkxleDogTElOS1wiLCB5eV8ueXl0ZXh0KTtcbiAgICAgICAgICAgIHJldHVybiAxNTtcbiAgICAgICAgICBjYXNlIDk3OlxuICAgICAgICAgICAgeXkuZ2V0TG9nZ2VyKCkuZGVidWcoXCJMZXg6IFNUQVJUX0xJTktcIiwgeXlfLnl5dGV4dCk7XG4gICAgICAgICAgICB0aGlzLnB1c2hTdGF0ZShcIkxMQUJFTFwiKTtcbiAgICAgICAgICAgIHJldHVybiAxNjtcbiAgICAgICAgICBjYXNlIDk4OlxuICAgICAgICAgICAgeXkuZ2V0TG9nZ2VyKCkuZGVidWcoXCJMZXg6IFNUQVJUX0xJTktcIiwgeXlfLnl5dGV4dCk7XG4gICAgICAgICAgICB0aGlzLnB1c2hTdGF0ZShcIkxMQUJFTFwiKTtcbiAgICAgICAgICAgIHJldHVybiAxNjtcbiAgICAgICAgICBjYXNlIDk5OlxuICAgICAgICAgICAgeXkuZ2V0TG9nZ2VyKCkuZGVidWcoXCJMZXg6IFNUQVJUX0xJTktcIiwgeXlfLnl5dGV4dCk7XG4gICAgICAgICAgICB0aGlzLnB1c2hTdGF0ZShcIkxMQUJFTFwiKTtcbiAgICAgICAgICAgIHJldHVybiAxNjtcbiAgICAgICAgICBjYXNlIDEwMDpcbiAgICAgICAgICAgIHRoaXMucHVzaFN0YXRlKFwibWRfc3RyaW5nXCIpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSAxMDE6XG4gICAgICAgICAgICB5eS5nZXRMb2dnZXIoKS5kZWJ1ZyhcIkxleDogU3RhcnRpbmcgc3RyaW5nXCIpO1xuICAgICAgICAgICAgdGhpcy5wdXNoU3RhdGUoXCJzdHJpbmdcIik7XG4gICAgICAgICAgICByZXR1cm4gXCJMSU5LX0xBQkVMXCI7XG4gICAgICAgICAgY2FzZSAxMDI6XG4gICAgICAgICAgICB0aGlzLnBvcFN0YXRlKCk7XG4gICAgICAgICAgICB5eS5nZXRMb2dnZXIoKS5kZWJ1ZyhcIkxleDogTElOS1wiLCBcIiNcIiArIHl5Xy55eXRleHQgKyBcIiNcIik7XG4gICAgICAgICAgICByZXR1cm4gMTU7XG4gICAgICAgICAgY2FzZSAxMDM6XG4gICAgICAgICAgICB0aGlzLnBvcFN0YXRlKCk7XG4gICAgICAgICAgICB5eS5nZXRMb2dnZXIoKS5kZWJ1ZyhcIkxleDogTElOS1wiLCB5eV8ueXl0ZXh0KTtcbiAgICAgICAgICAgIHJldHVybiAxNTtcbiAgICAgICAgICBjYXNlIDEwNDpcbiAgICAgICAgICAgIHRoaXMucG9wU3RhdGUoKTtcbiAgICAgICAgICAgIHl5LmdldExvZ2dlcigpLmRlYnVnKFwiTGV4OiBMSU5LXCIsIHl5Xy55eXRleHQpO1xuICAgICAgICAgICAgcmV0dXJuIDE1O1xuICAgICAgICAgIGNhc2UgMTA1OlxuICAgICAgICAgICAgeXkuZ2V0TG9nZ2VyKCkuZGVidWcoXCJMZXg6IENPTE9OXCIsIHl5Xy55eXRleHQpO1xuICAgICAgICAgICAgeXlfLnl5dGV4dCA9IHl5Xy55eXRleHQuc2xpY2UoMSk7XG4gICAgICAgICAgICByZXR1cm4gMjc7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBydWxlczogWy9eKD86YmxvY2stYmV0YVxcYikvLCAvXig/OmJsb2NrXFxzKykvLCAvXig/OmJsb2NrXFxuKykvLCAvXig/OmJsb2NrOikvLCAvXig/OltcXHNdKykvLCAvXig/OltcXG5dKykvLCAvXig/OigoXFx1MDAwRFxcdTAwMEEpfChcXHUwMDBBKSkpLywgL14oPzpjb2x1bW5zXFxzK2F1dG9cXGIpLywgL14oPzpjb2x1bW5zXFxzK1tcXGRdKykvLCAvXig/OltcIl1bYF0pLywgL14oPzpbXmBcIl0rKS8sIC9eKD86W2BdW1wiXSkvLCAvXig/OltcIl0pLywgL14oPzpbXCJdKS8sIC9eKD86W15cIl0qKS8sIC9eKD86c3BhY2VbOl1cXGQrKS8sIC9eKD86c3BhY2VcXGIpLywgL14oPzpkZWZhdWx0XFxiKS8sIC9eKD86bGlua1N0eWxlXFxiKS8sIC9eKD86aW50ZXJwb2xhdGVcXGIpLywgL14oPzpjbGFzc0RlZlxccyspLywgL14oPzpERUZBVUxUXFxzKykvLCAvXig/OlxcdytcXHMrKS8sIC9eKD86W15cXG5dKikvLCAvXig/OmNsYXNzXFxzKykvLCAvXig/OihcXHcrKSsoKCxcXHMqXFx3KykqKSkvLCAvXig/OlteXFxuXSopLywgL14oPzpzdHlsZVxccyspLywgL14oPzooXFx3KykrKCgsXFxzKlxcdyspKikpLywgL14oPzpbXlxcbl0qKS8sIC9eKD86YWNjVGl0bGVcXHMqOlxccyopLywgL14oPzooPyFcXG58fCkqW15cXG5dKikvLCAvXig/OmFjY0Rlc2NyXFxzKjpcXHMqKS8sIC9eKD86KD8hXFxufHwpKlteXFxuXSopLywgL14oPzphY2NEZXNjclxccypcXHtcXHMqKS8sIC9eKD86W1xcfV0pLywgL14oPzpbXlxcfV0qKS8sIC9eKD86ZW5kXFxiXFxzKikvLCAvXig/OlxcKFxcKFxcKCkvLCAvXig/OlxcKVxcKVxcKSkvLCAvXig/OltcXCldXFwpKS8sIC9eKD86XFx9XFx9KS8sIC9eKD86XFx9KS8sIC9eKD86XFwoLSkvLCAvXig/Oi1cXCkpLywgL14oPzpcXChcXCgpLywgL14oPzpcXF1cXF0pLywgL14oPzpcXCgpLywgL14oPzpcXF1cXCkpLywgL14oPzpcXFxcXFxdKS8sIC9eKD86XFwvXFxdKS8sIC9eKD86XFwpXFxdKS8sIC9eKD86W1xcKV0pLywgL14oPzpcXF0+KS8sIC9eKD86W1xcXV0pLywgL14oPzotXFwpKS8sIC9eKD86XFwoLSkvLCAvXig/OlxcKVxcKSkvLCAvXig/OlxcKSkvLCAvXig/OlxcKFxcKFxcKCkvLCAvXig/OlxcKFxcKCkvLCAvXig/Olxce1xceykvLCAvXig/OlxceykvLCAvXig/Oj4pLywgL14oPzpcXChcXFspLywgL14oPzpcXCgpLywgL14oPzpcXFtcXFspLywgL14oPzpcXFtcXHwpLywgL14oPzpcXFtcXCgpLywgL14oPzpcXClcXClcXCkpLywgL14oPzpcXFtcXFxcKS8sIC9eKD86XFxbXFwvKS8sIC9eKD86XFxbXFxcXCkvLCAvXig/OlxcWykvLCAvXig/OjxcXFspLywgL14oPzpbXlxcKFxcW1xcblxcLVxcKVxce1xcfVxcc1xcPFxcPjpdKykvLCAvXig/OiQpLywgL14oPzpbXCJdW2BdKS8sIC9eKD86W1wiXVtgXSkvLCAvXig/OlteYFwiXSspLywgL14oPzpbYF1bXCJdKS8sIC9eKD86W1wiXSkvLCAvXig/OltcIl0pLywgL14oPzpbXlwiXSspLywgL14oPzpbXCJdKS8sIC9eKD86XFxdPlxccypcXCgpLywgL14oPzosP1xccypyaWdodFxccyopLywgL14oPzosP1xccypsZWZ0XFxzKikvLCAvXig/Oiw/XFxzKnhcXHMqKS8sIC9eKD86LD9cXHMqeVxccyopLywgL14oPzosP1xccyp1cFxccyopLywgL14oPzosP1xccypkb3duXFxzKikvLCAvXig/OlxcKVxccyopLywgL14oPzpcXHMqW3hvPF0/LS0rWy14bz5dXFxzKikvLCAvXig/OlxccypbeG88XT89PStbPXhvPl1cXHMqKS8sIC9eKD86XFxzKlt4bzxdPy0/XFwuKy1beG8+XT9cXHMqKS8sIC9eKD86XFxzKn5+W1xcfl0rXFxzKikvLCAvXig/OlxccypbeG88XT8tLVxccyopLywgL14oPzpcXHMqW3hvPF0/PT1cXHMqKS8sIC9eKD86XFxzKlt4bzxdPy1cXC5cXHMqKS8sIC9eKD86W1wiXVtgXSkvLCAvXig/OltcIl0pLywgL14oPzpcXHMqW3hvPF0/LS0rWy14bz5dXFxzKikvLCAvXig/OlxccypbeG88XT89PStbPXhvPl1cXHMqKS8sIC9eKD86XFxzKlt4bzxdPy0/XFwuKy1beG8+XT9cXHMqKS8sIC9eKD86OlxcZCspL10sXG4gICAgICBjb25kaXRpb25zOiB7IFwiU1RZTEVfREVGSU5JVElPTlwiOiB7IFwicnVsZXNcIjogWzI5XSwgXCJpbmNsdXNpdmVcIjogZmFsc2UgfSwgXCJTVFlMRV9TVE1OVFwiOiB7IFwicnVsZXNcIjogWzI4XSwgXCJpbmNsdXNpdmVcIjogZmFsc2UgfSwgXCJDTEFTU0RFRklEXCI6IHsgXCJydWxlc1wiOiBbMjNdLCBcImluY2x1c2l2ZVwiOiBmYWxzZSB9LCBcIkNMQVNTREVGXCI6IHsgXCJydWxlc1wiOiBbMjEsIDIyXSwgXCJpbmNsdXNpdmVcIjogZmFsc2UgfSwgXCJDTEFTU19TVFlMRVwiOiB7IFwicnVsZXNcIjogWzI2XSwgXCJpbmNsdXNpdmVcIjogZmFsc2UgfSwgXCJDTEFTU1wiOiB7IFwicnVsZXNcIjogWzI1XSwgXCJpbmNsdXNpdmVcIjogZmFsc2UgfSwgXCJMTEFCRUxcIjogeyBcInJ1bGVzXCI6IFsxMDAsIDEwMSwgMTAyLCAxMDMsIDEwNF0sIFwiaW5jbHVzaXZlXCI6IGZhbHNlIH0sIFwiQVJST1dfRElSXCI6IHsgXCJydWxlc1wiOiBbODYsIDg3LCA4OCwgODksIDkwLCA5MSwgOTJdLCBcImluY2x1c2l2ZVwiOiBmYWxzZSB9LCBcIkJMT0NLX0FSUk9XXCI6IHsgXCJydWxlc1wiOiBbNzcsIDgyLCA4NV0sIFwiaW5jbHVzaXZlXCI6IGZhbHNlIH0sIFwiTk9ERVwiOiB7IFwicnVsZXNcIjogWzM4LCAzOSwgNDAsIDQxLCA0MiwgNDMsIDQ0LCA0NSwgNDYsIDQ3LCA0OCwgNDksIDUwLCA1MSwgNTIsIDUzLCA1NCwgNzgsIDgxXSwgXCJpbmNsdXNpdmVcIjogZmFsc2UgfSwgXCJtZF9zdHJpbmdcIjogeyBcInJ1bGVzXCI6IFsxMCwgMTEsIDc5LCA4MF0sIFwiaW5jbHVzaXZlXCI6IGZhbHNlIH0sIFwic3BhY2VcIjogeyBcInJ1bGVzXCI6IFtdLCBcImluY2x1c2l2ZVwiOiBmYWxzZSB9LCBcInN0cmluZ1wiOiB7IFwicnVsZXNcIjogWzEzLCAxNCwgODMsIDg0XSwgXCJpbmNsdXNpdmVcIjogZmFsc2UgfSwgXCJhY2NfZGVzY3JfbXVsdGlsaW5lXCI6IHsgXCJydWxlc1wiOiBbMzUsIDM2XSwgXCJpbmNsdXNpdmVcIjogZmFsc2UgfSwgXCJhY2NfZGVzY3JcIjogeyBcInJ1bGVzXCI6IFszM10sIFwiaW5jbHVzaXZlXCI6IGZhbHNlIH0sIFwiYWNjX3RpdGxlXCI6IHsgXCJydWxlc1wiOiBbMzFdLCBcImluY2x1c2l2ZVwiOiBmYWxzZSB9LCBcIklOSVRJQUxcIjogeyBcInJ1bGVzXCI6IFswLCAxLCAyLCAzLCA0LCA1LCA2LCA3LCA4LCA5LCAxMiwgMTUsIDE2LCAxNywgMTgsIDE5LCAyMCwgMjQsIDI3LCAzMCwgMzIsIDM0LCAzNywgNTUsIDU2LCA1NywgNTgsIDU5LCA2MCwgNjEsIDYyLCA2MywgNjQsIDY1LCA2NiwgNjcsIDY4LCA2OSwgNzAsIDcxLCA3MiwgNzMsIDc0LCA3NSwgNzYsIDkzLCA5NCwgOTUsIDk2LCA5NywgOTgsIDk5LCAxMDVdLCBcImluY2x1c2l2ZVwiOiB0cnVlIH0gfVxuICAgIH07XG4gICAgcmV0dXJuIGxleGVyMjtcbiAgfSgpO1xuICBwYXJzZXIyLmxleGVyID0gbGV4ZXI7XG4gIGZ1bmN0aW9uIFBhcnNlcigpIHtcbiAgICB0aGlzLnl5ID0ge307XG4gIH1cbiAgUGFyc2VyLnByb3RvdHlwZSA9IHBhcnNlcjI7XG4gIHBhcnNlcjIuUGFyc2VyID0gUGFyc2VyO1xuICByZXR1cm4gbmV3IFBhcnNlcigpO1xufSgpO1xucGFyc2VyLnBhcnNlciA9IHBhcnNlcjtcbmNvbnN0IHBhcnNlciQxID0gcGFyc2VyO1xubGV0IGJsb2NrRGF0YWJhc2UgPSB7fTtcbmxldCBlZGdlTGlzdCA9IFtdO1xubGV0IGVkZ2VDb3VudCA9IHt9O1xuY29uc3QgQ09MT1JfS0VZV09SRCA9IFwiY29sb3JcIjtcbmNvbnN0IEZJTExfS0VZV09SRCA9IFwiZmlsbFwiO1xuY29uc3QgQkdfRklMTCA9IFwiYmdGaWxsXCI7XG5jb25zdCBTVFlMRUNMQVNTX1NFUCA9IFwiLFwiO1xuY29uc3QgY29uZmlnID0gZ2V0Q29uZmlnKCk7XG5sZXQgY2xhc3NlcyA9IHt9O1xuY29uc3Qgc2FuaXRpemVUZXh0ID0gKHR4dCkgPT4gY29tbW9uLnNhbml0aXplVGV4dCh0eHQsIGNvbmZpZyk7XG5jb25zdCBhZGRTdHlsZUNsYXNzID0gZnVuY3Rpb24oaWQsIHN0eWxlQXR0cmlidXRlcyA9IFwiXCIpIHtcbiAgaWYgKGNsYXNzZXNbaWRdID09PSB2b2lkIDApIHtcbiAgICBjbGFzc2VzW2lkXSA9IHsgaWQsIHN0eWxlczogW10sIHRleHRTdHlsZXM6IFtdIH07XG4gIH1cbiAgY29uc3QgZm91bmRDbGFzcyA9IGNsYXNzZXNbaWRdO1xuICBpZiAoc3R5bGVBdHRyaWJ1dGVzICE9PSB2b2lkIDAgJiYgc3R5bGVBdHRyaWJ1dGVzICE9PSBudWxsKSB7XG4gICAgc3R5bGVBdHRyaWJ1dGVzLnNwbGl0KFNUWUxFQ0xBU1NfU0VQKS5mb3JFYWNoKChhdHRyaWIpID0+IHtcbiAgICAgIGNvbnN0IGZpeGVkQXR0cmliID0gYXR0cmliLnJlcGxhY2UoLyhbXjtdKik7LywgXCIkMVwiKS50cmltKCk7XG4gICAgICBpZiAoYXR0cmliLm1hdGNoKENPTE9SX0tFWVdPUkQpKSB7XG4gICAgICAgIGNvbnN0IG5ld1N0eWxlMSA9IGZpeGVkQXR0cmliLnJlcGxhY2UoRklMTF9LRVlXT1JELCBCR19GSUxMKTtcbiAgICAgICAgY29uc3QgbmV3U3R5bGUyID0gbmV3U3R5bGUxLnJlcGxhY2UoQ09MT1JfS0VZV09SRCwgRklMTF9LRVlXT1JEKTtcbiAgICAgICAgZm91bmRDbGFzcy50ZXh0U3R5bGVzLnB1c2gobmV3U3R5bGUyKTtcbiAgICAgIH1cbiAgICAgIGZvdW5kQ2xhc3Muc3R5bGVzLnB1c2goZml4ZWRBdHRyaWIpO1xuICAgIH0pO1xuICB9XG59O1xuY29uc3QgYWRkU3R5bGUyTm9kZSA9IGZ1bmN0aW9uKGlkLCBzdHlsZXMgPSBcIlwiKSB7XG4gIGNvbnN0IGZvdW5kQmxvY2sgPSBibG9ja0RhdGFiYXNlW2lkXTtcbiAgaWYgKHN0eWxlcyAhPT0gdm9pZCAwICYmIHN0eWxlcyAhPT0gbnVsbCkge1xuICAgIGZvdW5kQmxvY2suc3R5bGVzID0gc3R5bGVzLnNwbGl0KFNUWUxFQ0xBU1NfU0VQKTtcbiAgfVxufTtcbmNvbnN0IHNldENzc0NsYXNzID0gZnVuY3Rpb24oaXRlbUlkcywgY3NzQ2xhc3NOYW1lKSB7XG4gIGl0ZW1JZHMuc3BsaXQoXCIsXCIpLmZvckVhY2goZnVuY3Rpb24oaWQpIHtcbiAgICBsZXQgZm91bmRCbG9jayA9IGJsb2NrRGF0YWJhc2VbaWRdO1xuICAgIGlmIChmb3VuZEJsb2NrID09PSB2b2lkIDApIHtcbiAgICAgIGNvbnN0IHRyaW1tZWRJZCA9IGlkLnRyaW0oKTtcbiAgICAgIGJsb2NrRGF0YWJhc2VbdHJpbW1lZElkXSA9IHsgaWQ6IHRyaW1tZWRJZCwgdHlwZTogXCJuYVwiLCBjaGlsZHJlbjogW10gfTtcbiAgICAgIGZvdW5kQmxvY2sgPSBibG9ja0RhdGFiYXNlW3RyaW1tZWRJZF07XG4gICAgfVxuICAgIGlmICghZm91bmRCbG9jay5jbGFzc2VzKSB7XG4gICAgICBmb3VuZEJsb2NrLmNsYXNzZXMgPSBbXTtcbiAgICB9XG4gICAgZm91bmRCbG9jay5jbGFzc2VzLnB1c2goY3NzQ2xhc3NOYW1lKTtcbiAgfSk7XG59O1xuY29uc3QgcG9wdWxhdGVCbG9ja0RhdGFiYXNlID0gKF9ibG9ja0xpc3QsIHBhcmVudCkgPT4ge1xuICBjb25zdCBibG9ja0xpc3QgPSBfYmxvY2tMaXN0LmZsYXQoKTtcbiAgY29uc3QgY2hpbGRyZW4gPSBbXTtcbiAgZm9yIChjb25zdCBibG9jayBvZiBibG9ja0xpc3QpIHtcbiAgICBpZiAoYmxvY2subGFiZWwpIHtcbiAgICAgIGJsb2NrLmxhYmVsID0gc2FuaXRpemVUZXh0KGJsb2NrLmxhYmVsKTtcbiAgICB9XG4gICAgaWYgKGJsb2NrLnR5cGUgPT09IFwiY2xhc3NEZWZcIikge1xuICAgICAgYWRkU3R5bGVDbGFzcyhibG9jay5pZCwgYmxvY2suY3NzKTtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICBpZiAoYmxvY2sudHlwZSA9PT0gXCJhcHBseUNsYXNzXCIpIHtcbiAgICAgIHNldENzc0NsYXNzKGJsb2NrLmlkLCAoYmxvY2sgPT0gbnVsbCA/IHZvaWQgMCA6IGJsb2NrLnN0eWxlQ2xhc3MpIHx8IFwiXCIpO1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIGlmIChibG9jay50eXBlID09PSBcImFwcGx5U3R5bGVzXCIpIHtcbiAgICAgIGlmIChibG9jayA9PSBudWxsID8gdm9pZCAwIDogYmxvY2suc3R5bGVzU3RyKSB7XG4gICAgICAgIGFkZFN0eWxlMk5vZGUoYmxvY2suaWQsIGJsb2NrID09IG51bGwgPyB2b2lkIDAgOiBibG9jay5zdHlsZXNTdHIpO1xuICAgICAgfVxuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIGlmIChibG9jay50eXBlID09PSBcImNvbHVtbi1zZXR0aW5nXCIpIHtcbiAgICAgIHBhcmVudC5jb2x1bW5zID0gYmxvY2suY29sdW1ucyB8fCAtMTtcbiAgICB9IGVsc2UgaWYgKGJsb2NrLnR5cGUgPT09IFwiZWRnZVwiKSB7XG4gICAgICBpZiAoZWRnZUNvdW50W2Jsb2NrLmlkXSkge1xuICAgICAgICBlZGdlQ291bnRbYmxvY2suaWRdKys7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlZGdlQ291bnRbYmxvY2suaWRdID0gMTtcbiAgICAgIH1cbiAgICAgIGJsb2NrLmlkID0gZWRnZUNvdW50W2Jsb2NrLmlkXSArIFwiLVwiICsgYmxvY2suaWQ7XG4gICAgICBlZGdlTGlzdC5wdXNoKGJsb2NrKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKCFibG9jay5sYWJlbCkge1xuICAgICAgICBpZiAoYmxvY2sudHlwZSA9PT0gXCJjb21wb3NpdGVcIikge1xuICAgICAgICAgIGJsb2NrLmxhYmVsID0gXCJcIjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBibG9jay5sYWJlbCA9IGJsb2NrLmlkO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBjb25zdCBuZXdCbG9jayA9ICFibG9ja0RhdGFiYXNlW2Jsb2NrLmlkXTtcbiAgICAgIGlmIChuZXdCbG9jaykge1xuICAgICAgICBibG9ja0RhdGFiYXNlW2Jsb2NrLmlkXSA9IGJsb2NrO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGJsb2NrLnR5cGUgIT09IFwibmFcIikge1xuICAgICAgICAgIGJsb2NrRGF0YWJhc2VbYmxvY2suaWRdLnR5cGUgPSBibG9jay50eXBlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChibG9jay5sYWJlbCAhPT0gYmxvY2suaWQpIHtcbiAgICAgICAgICBibG9ja0RhdGFiYXNlW2Jsb2NrLmlkXS5sYWJlbCA9IGJsb2NrLmxhYmVsO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoYmxvY2suY2hpbGRyZW4pIHtcbiAgICAgICAgcG9wdWxhdGVCbG9ja0RhdGFiYXNlKGJsb2NrLmNoaWxkcmVuLCBibG9jayk7XG4gICAgICB9XG4gICAgICBpZiAoYmxvY2sudHlwZSA9PT0gXCJzcGFjZVwiKSB7XG4gICAgICAgIGNvbnN0IHcgPSBibG9jay53aWR0aCB8fCAxO1xuICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHc7IGorKykge1xuICAgICAgICAgIGNvbnN0IG5ld0Jsb2NrMiA9IGNsb25lKGJsb2NrKTtcbiAgICAgICAgICBuZXdCbG9jazIuaWQgPSBuZXdCbG9jazIuaWQgKyBcIi1cIiArIGo7XG4gICAgICAgICAgYmxvY2tEYXRhYmFzZVtuZXdCbG9jazIuaWRdID0gbmV3QmxvY2syO1xuICAgICAgICAgIGNoaWxkcmVuLnB1c2gobmV3QmxvY2syKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChuZXdCbG9jaykge1xuICAgICAgICBjaGlsZHJlbi5wdXNoKGJsb2NrKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcGFyZW50LmNoaWxkcmVuID0gY2hpbGRyZW47XG59O1xubGV0IGJsb2NrcyA9IFtdO1xubGV0IHJvb3RCbG9jayA9IHsgaWQ6IFwicm9vdFwiLCB0eXBlOiBcImNvbXBvc2l0ZVwiLCBjaGlsZHJlbjogW10sIGNvbHVtbnM6IC0xIH07XG5jb25zdCBjbGVhciA9ICgpID0+IHtcbiAgbG9nLmRlYnVnKFwiQ2xlYXIgY2FsbGVkXCIpO1xuICBjbGVhciQxKCk7XG4gIHJvb3RCbG9jayA9IHsgaWQ6IFwicm9vdFwiLCB0eXBlOiBcImNvbXBvc2l0ZVwiLCBjaGlsZHJlbjogW10sIGNvbHVtbnM6IC0xIH07XG4gIGJsb2NrRGF0YWJhc2UgPSB7IHJvb3Q6IHJvb3RCbG9jayB9O1xuICBibG9ja3MgPSBbXTtcbiAgY2xhc3NlcyA9IHt9O1xuICBlZGdlTGlzdCA9IFtdO1xuICBlZGdlQ291bnQgPSB7fTtcbn07XG5mdW5jdGlvbiB0eXBlU3RyMlR5cGUodHlwZVN0cikge1xuICBsb2cuZGVidWcoXCJ0eXBlU3RyMlR5cGVcIiwgdHlwZVN0cik7XG4gIHN3aXRjaCAodHlwZVN0cikge1xuICAgIGNhc2UgXCJbXVwiOlxuICAgICAgcmV0dXJuIFwic3F1YXJlXCI7XG4gICAgY2FzZSBcIigpXCI6XG4gICAgICBsb2cuZGVidWcoXCJ3ZSBoYXZlIGEgcm91bmRcIik7XG4gICAgICByZXR1cm4gXCJyb3VuZFwiO1xuICAgIGNhc2UgXCIoKCkpXCI6XG4gICAgICByZXR1cm4gXCJjaXJjbGVcIjtcbiAgICBjYXNlIFwiPl1cIjpcbiAgICAgIHJldHVybiBcInJlY3RfbGVmdF9pbnZfYXJyb3dcIjtcbiAgICBjYXNlIFwie31cIjpcbiAgICAgIHJldHVybiBcImRpYW1vbmRcIjtcbiAgICBjYXNlIFwie3t9fVwiOlxuICAgICAgcmV0dXJuIFwiaGV4YWdvblwiO1xuICAgIGNhc2UgXCIoW10pXCI6XG4gICAgICByZXR1cm4gXCJzdGFkaXVtXCI7XG4gICAgY2FzZSBcIltbXV1cIjpcbiAgICAgIHJldHVybiBcInN1YnJvdXRpbmVcIjtcbiAgICBjYXNlIFwiWygpXVwiOlxuICAgICAgcmV0dXJuIFwiY3lsaW5kZXJcIjtcbiAgICBjYXNlIFwiKCgoKSkpXCI6XG4gICAgICByZXR1cm4gXCJkb3VibGVjaXJjbGVcIjtcbiAgICBjYXNlIFwiWy8vXVwiOlxuICAgICAgcmV0dXJuIFwibGVhbl9yaWdodFwiO1xuICAgIGNhc2UgXCJbXFxcXFxcXFxdXCI6XG4gICAgICByZXR1cm4gXCJsZWFuX2xlZnRcIjtcbiAgICBjYXNlIFwiWy9cXFxcXVwiOlxuICAgICAgcmV0dXJuIFwidHJhcGV6b2lkXCI7XG4gICAgY2FzZSBcIltcXFxcL11cIjpcbiAgICAgIHJldHVybiBcImludl90cmFwZXpvaWRcIjtcbiAgICBjYXNlIFwiPFtdPlwiOlxuICAgICAgcmV0dXJuIFwiYmxvY2tfYXJyb3dcIjtcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIFwibmFcIjtcbiAgfVxufVxuZnVuY3Rpb24gZWRnZVR5cGVTdHIyVHlwZSh0eXBlU3RyKSB7XG4gIGxvZy5kZWJ1ZyhcInR5cGVTdHIyVHlwZVwiLCB0eXBlU3RyKTtcbiAgc3dpdGNoICh0eXBlU3RyKSB7XG4gICAgY2FzZSBcIj09XCI6XG4gICAgICByZXR1cm4gXCJ0aGlja1wiO1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gXCJub3JtYWxcIjtcbiAgfVxufVxuZnVuY3Rpb24gZWRnZVN0clRvRWRnZURhdGEodHlwZVN0cikge1xuICBzd2l0Y2ggKHR5cGVTdHIudHJpbSgpKSB7XG4gICAgY2FzZSBcIi0teFwiOlxuICAgICAgcmV0dXJuIFwiYXJyb3dfY3Jvc3NcIjtcbiAgICBjYXNlIFwiLS1vXCI6XG4gICAgICByZXR1cm4gXCJhcnJvd19jaXJjbGVcIjtcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIFwiYXJyb3dfcG9pbnRcIjtcbiAgfVxufVxubGV0IGNudCA9IDA7XG5jb25zdCBnZW5lcmF0ZUlkID0gKCkgPT4ge1xuICBjbnQrKztcbiAgcmV0dXJuIFwiaWQtXCIgKyBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHIoMiwgMTIpICsgXCItXCIgKyBjbnQ7XG59O1xuY29uc3Qgc2V0SGllcmFyY2h5ID0gKGJsb2NrKSA9PiB7XG4gIHJvb3RCbG9jay5jaGlsZHJlbiA9IGJsb2NrO1xuICBwb3B1bGF0ZUJsb2NrRGF0YWJhc2UoYmxvY2ssIHJvb3RCbG9jayk7XG4gIGJsb2NrcyA9IHJvb3RCbG9jay5jaGlsZHJlbjtcbn07XG5jb25zdCBnZXRDb2x1bW5zID0gKGJsb2NrSWQpID0+IHtcbiAgY29uc3QgYmxvY2sgPSBibG9ja0RhdGFiYXNlW2Jsb2NrSWRdO1xuICBpZiAoIWJsb2NrKSB7XG4gICAgcmV0dXJuIC0xO1xuICB9XG4gIGlmIChibG9jay5jb2x1bW5zKSB7XG4gICAgcmV0dXJuIGJsb2NrLmNvbHVtbnM7XG4gIH1cbiAgaWYgKCFibG9jay5jaGlsZHJlbikge1xuICAgIHJldHVybiAtMTtcbiAgfVxuICByZXR1cm4gYmxvY2suY2hpbGRyZW4ubGVuZ3RoO1xufTtcbmNvbnN0IGdldEJsb2Nrc0ZsYXQgPSAoKSA9PiB7XG4gIHJldHVybiBbLi4uT2JqZWN0LnZhbHVlcyhibG9ja0RhdGFiYXNlKV07XG59O1xuY29uc3QgZ2V0QmxvY2tzID0gKCkgPT4ge1xuICByZXR1cm4gYmxvY2tzIHx8IFtdO1xufTtcbmNvbnN0IGdldEVkZ2VzID0gKCkgPT4ge1xuICByZXR1cm4gZWRnZUxpc3Q7XG59O1xuY29uc3QgZ2V0QmxvY2sgPSAoaWQpID0+IHtcbiAgcmV0dXJuIGJsb2NrRGF0YWJhc2VbaWRdO1xufTtcbmNvbnN0IHNldEJsb2NrID0gKGJsb2NrKSA9PiB7XG4gIGJsb2NrRGF0YWJhc2VbYmxvY2suaWRdID0gYmxvY2s7XG59O1xuY29uc3QgZ2V0TG9nZ2VyID0gKCkgPT4gY29uc29sZTtcbmNvbnN0IGdldENsYXNzZXMkMSA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gY2xhc3Nlcztcbn07XG5jb25zdCBkYiA9IHtcbiAgZ2V0Q29uZmlnOiAoKSA9PiBnZXRDb25maWckMSgpLmJsb2NrLFxuICB0eXBlU3RyMlR5cGUsXG4gIGVkZ2VUeXBlU3RyMlR5cGUsXG4gIGVkZ2VTdHJUb0VkZ2VEYXRhLFxuICBnZXRMb2dnZXIsXG4gIGdldEJsb2Nrc0ZsYXQsXG4gIGdldEJsb2NrcyxcbiAgZ2V0RWRnZXMsXG4gIHNldEhpZXJhcmNoeSxcbiAgZ2V0QmxvY2ssXG4gIHNldEJsb2NrLFxuICBnZXRDb2x1bW5zLFxuICBnZXRDbGFzc2VzOiBnZXRDbGFzc2VzJDEsXG4gIGNsZWFyLFxuICBnZW5lcmF0ZUlkXG59O1xuY29uc3QgZGIkMSA9IGRiO1xuY29uc3QgZmFkZSA9IChjb2xvciwgb3BhY2l0eSkgPT4ge1xuICBjb25zdCBjaGFubmVsID0ga2hyb21hLmNoYW5uZWw7XG4gIGNvbnN0IHIgPSBjaGFubmVsKGNvbG9yLCBcInJcIik7XG4gIGNvbnN0IGcgPSBjaGFubmVsKGNvbG9yLCBcImdcIik7XG4gIGNvbnN0IGIgPSBjaGFubmVsKGNvbG9yLCBcImJcIik7XG4gIHJldHVybiBraHJvbWEucmdiYShyLCBnLCBiLCBvcGFjaXR5KTtcbn07XG5jb25zdCBnZXRTdHlsZXMgPSAob3B0aW9ucykgPT4gYC5sYWJlbCB7XG4gICAgZm9udC1mYW1pbHk6ICR7b3B0aW9ucy5mb250RmFtaWx5fTtcbiAgICBjb2xvcjogJHtvcHRpb25zLm5vZGVUZXh0Q29sb3IgfHwgb3B0aW9ucy50ZXh0Q29sb3J9O1xuICB9XG4gIC5jbHVzdGVyLWxhYmVsIHRleHQge1xuICAgIGZpbGw6ICR7b3B0aW9ucy50aXRsZUNvbG9yfTtcbiAgfVxuICAuY2x1c3Rlci1sYWJlbCBzcGFuLHAge1xuICAgIGNvbG9yOiAke29wdGlvbnMudGl0bGVDb2xvcn07XG4gIH1cblxuXG5cbiAgLmxhYmVsIHRleHQsc3BhbixwIHtcbiAgICBmaWxsOiAke29wdGlvbnMubm9kZVRleHRDb2xvciB8fCBvcHRpb25zLnRleHRDb2xvcn07XG4gICAgY29sb3I6ICR7b3B0aW9ucy5ub2RlVGV4dENvbG9yIHx8IG9wdGlvbnMudGV4dENvbG9yfTtcbiAgfVxuXG4gIC5ub2RlIHJlY3QsXG4gIC5ub2RlIGNpcmNsZSxcbiAgLm5vZGUgZWxsaXBzZSxcbiAgLm5vZGUgcG9seWdvbixcbiAgLm5vZGUgcGF0aCB7XG4gICAgZmlsbDogJHtvcHRpb25zLm1haW5Ca2d9O1xuICAgIHN0cm9rZTogJHtvcHRpb25zLm5vZGVCb3JkZXJ9O1xuICAgIHN0cm9rZS13aWR0aDogMXB4O1xuICB9XG4gIC5mbG93Y2hhcnQtbGFiZWwgdGV4dCB7XG4gICAgdGV4dC1hbmNob3I6IG1pZGRsZTtcbiAgfVxuICAvLyAuZmxvd2NoYXJ0LWxhYmVsIC50ZXh0LW91dGVyLXRzcGFuIHtcbiAgLy8gICB0ZXh0LWFuY2hvcjogbWlkZGxlO1xuICAvLyB9XG4gIC8vIC5mbG93Y2hhcnQtbGFiZWwgLnRleHQtaW5uZXItdHNwYW4ge1xuICAvLyAgIHRleHQtYW5jaG9yOiBzdGFydDtcbiAgLy8gfVxuXG4gIC5ub2RlIC5sYWJlbCB7XG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICB9XG4gIC5ub2RlLmNsaWNrYWJsZSB7XG4gICAgY3Vyc29yOiBwb2ludGVyO1xuICB9XG5cbiAgLmFycm93aGVhZFBhdGgge1xuICAgIGZpbGw6ICR7b3B0aW9ucy5hcnJvd2hlYWRDb2xvcn07XG4gIH1cblxuICAuZWRnZVBhdGggLnBhdGgge1xuICAgIHN0cm9rZTogJHtvcHRpb25zLmxpbmVDb2xvcn07XG4gICAgc3Ryb2tlLXdpZHRoOiAyLjBweDtcbiAgfVxuXG4gIC5mbG93Y2hhcnQtbGluayB7XG4gICAgc3Ryb2tlOiAke29wdGlvbnMubGluZUNvbG9yfTtcbiAgICBmaWxsOiBub25lO1xuICB9XG5cbiAgLmVkZ2VMYWJlbCB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogJHtvcHRpb25zLmVkZ2VMYWJlbEJhY2tncm91bmR9O1xuICAgIHJlY3Qge1xuICAgICAgb3BhY2l0eTogMC41O1xuICAgICAgYmFja2dyb3VuZC1jb2xvcjogJHtvcHRpb25zLmVkZ2VMYWJlbEJhY2tncm91bmR9O1xuICAgICAgZmlsbDogJHtvcHRpb25zLmVkZ2VMYWJlbEJhY2tncm91bmR9O1xuICAgIH1cbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gIH1cblxuICAvKiBGb3IgaHRtbCBsYWJlbHMgb25seSAqL1xuICAubGFiZWxCa2cge1xuICAgIGJhY2tncm91bmQtY29sb3I6ICR7ZmFkZShvcHRpb25zLmVkZ2VMYWJlbEJhY2tncm91bmQsIDAuNSl9O1xuICAgIC8vIGJhY2tncm91bmQtY29sb3I6XG4gIH1cblxuICAubm9kZSAuY2x1c3RlciB7XG4gICAgLy8gZmlsbDogJHtmYWRlKG9wdGlvbnMubWFpbkJrZywgMC41KX07XG4gICAgZmlsbDogJHtmYWRlKG9wdGlvbnMuY2x1c3RlckJrZywgMC41KX07XG4gICAgc3Ryb2tlOiAke2ZhZGUob3B0aW9ucy5jbHVzdGVyQm9yZGVyLCAwLjIpfTtcbiAgICBib3gtc2hhZG93OiByZ2JhKDUwLCA1MCwgOTMsIDAuMjUpIDBweCAxM3B4IDI3cHggLTVweCwgcmdiYSgwLCAwLCAwLCAwLjMpIDBweCA4cHggMTZweCAtOHB4O1xuICAgIHN0cm9rZS13aWR0aDogMXB4O1xuICB9XG5cbiAgLmNsdXN0ZXIgdGV4dCB7XG4gICAgZmlsbDogJHtvcHRpb25zLnRpdGxlQ29sb3J9O1xuICB9XG5cbiAgLmNsdXN0ZXIgc3BhbixwIHtcbiAgICBjb2xvcjogJHtvcHRpb25zLnRpdGxlQ29sb3J9O1xuICB9XG4gIC8qIC5jbHVzdGVyIGRpdiB7XG4gICAgY29sb3I6ICR7b3B0aW9ucy50aXRsZUNvbG9yfTtcbiAgfSAqL1xuXG4gIGRpdi5tZXJtYWlkVG9vbHRpcCB7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICBtYXgtd2lkdGg6IDIwMHB4O1xuICAgIHBhZGRpbmc6IDJweDtcbiAgICBmb250LWZhbWlseTogJHtvcHRpb25zLmZvbnRGYW1pbHl9O1xuICAgIGZvbnQtc2l6ZTogMTJweDtcbiAgICBiYWNrZ3JvdW5kOiAke29wdGlvbnMudGVydGlhcnlDb2xvcn07XG4gICAgYm9yZGVyOiAxcHggc29saWQgJHtvcHRpb25zLmJvcmRlcjJ9O1xuICAgIGJvcmRlci1yYWRpdXM6IDJweDtcbiAgICBwb2ludGVyLWV2ZW50czogbm9uZTtcbiAgICB6LWluZGV4OiAxMDA7XG4gIH1cblxuICAuZmxvd2NoYXJ0VGl0bGVUZXh0IHtcbiAgICB0ZXh0LWFuY2hvcjogbWlkZGxlO1xuICAgIGZvbnQtc2l6ZTogMThweDtcbiAgICBmaWxsOiAke29wdGlvbnMudGV4dENvbG9yfTtcbiAgfVxuYDtcbmNvbnN0IGZsb3dTdHlsZXMgPSBnZXRTdHlsZXM7XG5mdW5jdGlvbiBnZXROb2RlRnJvbUJsb2NrKGJsb2NrLCBkYjIsIHBvc2l0aW9uZWQgPSBmYWxzZSkge1xuICB2YXIgX2EyLCBfYjIsIF9jO1xuICBjb25zdCB2ZXJ0ZXggPSBibG9jaztcbiAgbGV0IGNsYXNzU3RyID0gXCJkZWZhdWx0XCI7XG4gIGlmICgoKChfYTIgPSB2ZXJ0ZXggPT0gbnVsbCA/IHZvaWQgMCA6IHZlcnRleC5jbGFzc2VzKSA9PSBudWxsID8gdm9pZCAwIDogX2EyLmxlbmd0aCkgfHwgMCkgPiAwKSB7XG4gICAgY2xhc3NTdHIgPSAoKHZlcnRleCA9PSBudWxsID8gdm9pZCAwIDogdmVydGV4LmNsYXNzZXMpIHx8IFtdKS5qb2luKFwiIFwiKTtcbiAgfVxuICBjbGFzc1N0ciA9IGNsYXNzU3RyICsgXCIgZmxvd2NoYXJ0LWxhYmVsXCI7XG4gIGxldCByYWRpdXMgPSAwO1xuICBsZXQgc2hhcGUgPSBcIlwiO1xuICBsZXQgcGFkZGluZzI7XG4gIHN3aXRjaCAodmVydGV4LnR5cGUpIHtcbiAgICBjYXNlIFwicm91bmRcIjpcbiAgICAgIHJhZGl1cyA9IDU7XG4gICAgICBzaGFwZSA9IFwicmVjdFwiO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBcImNvbXBvc2l0ZVwiOlxuICAgICAgcmFkaXVzID0gMDtcbiAgICAgIHNoYXBlID0gXCJjb21wb3NpdGVcIjtcbiAgICAgIHBhZGRpbmcyID0gMDtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgXCJzcXVhcmVcIjpcbiAgICAgIHNoYXBlID0gXCJyZWN0XCI7XG4gICAgICBicmVhaztcbiAgICBjYXNlIFwiZGlhbW9uZFwiOlxuICAgICAgc2hhcGUgPSBcInF1ZXN0aW9uXCI7XG4gICAgICBicmVhaztcbiAgICBjYXNlIFwiaGV4YWdvblwiOlxuICAgICAgc2hhcGUgPSBcImhleGFnb25cIjtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgXCJibG9ja19hcnJvd1wiOlxuICAgICAgc2hhcGUgPSBcImJsb2NrX2Fycm93XCI7XG4gICAgICBicmVhaztcbiAgICBjYXNlIFwib2RkXCI6XG4gICAgICBzaGFwZSA9IFwicmVjdF9sZWZ0X2ludl9hcnJvd1wiO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBcImxlYW5fcmlnaHRcIjpcbiAgICAgIHNoYXBlID0gXCJsZWFuX3JpZ2h0XCI7XG4gICAgICBicmVhaztcbiAgICBjYXNlIFwibGVhbl9sZWZ0XCI6XG4gICAgICBzaGFwZSA9IFwibGVhbl9sZWZ0XCI7XG4gICAgICBicmVhaztcbiAgICBjYXNlIFwidHJhcGV6b2lkXCI6XG4gICAgICBzaGFwZSA9IFwidHJhcGV6b2lkXCI7XG4gICAgICBicmVhaztcbiAgICBjYXNlIFwiaW52X3RyYXBlem9pZFwiOlxuICAgICAgc2hhcGUgPSBcImludl90cmFwZXpvaWRcIjtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgXCJyZWN0X2xlZnRfaW52X2Fycm93XCI6XG4gICAgICBzaGFwZSA9IFwicmVjdF9sZWZ0X2ludl9hcnJvd1wiO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBcImNpcmNsZVwiOlxuICAgICAgc2hhcGUgPSBcImNpcmNsZVwiO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBcImVsbGlwc2VcIjpcbiAgICAgIHNoYXBlID0gXCJlbGxpcHNlXCI7XG4gICAgICBicmVhaztcbiAgICBjYXNlIFwic3RhZGl1bVwiOlxuICAgICAgc2hhcGUgPSBcInN0YWRpdW1cIjtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgXCJzdWJyb3V0aW5lXCI6XG4gICAgICBzaGFwZSA9IFwic3Vicm91dGluZVwiO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBcImN5bGluZGVyXCI6XG4gICAgICBzaGFwZSA9IFwiY3lsaW5kZXJcIjtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgXCJncm91cFwiOlxuICAgICAgc2hhcGUgPSBcInJlY3RcIjtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgXCJkb3VibGVjaXJjbGVcIjpcbiAgICAgIHNoYXBlID0gXCJkb3VibGVjaXJjbGVcIjtcbiAgICAgIGJyZWFrO1xuICAgIGRlZmF1bHQ6XG4gICAgICBzaGFwZSA9IFwicmVjdFwiO1xuICB9XG4gIGNvbnN0IHN0eWxlcyA9IGdldFN0eWxlc0Zyb21BcnJheSgodmVydGV4ID09IG51bGwgPyB2b2lkIDAgOiB2ZXJ0ZXguc3R5bGVzKSB8fCBbXSk7XG4gIGNvbnN0IHZlcnRleFRleHQgPSB2ZXJ0ZXgubGFiZWw7XG4gIGNvbnN0IGJvdW5kcyA9IHZlcnRleC5zaXplIHx8IHsgd2lkdGg6IDAsIGhlaWdodDogMCwgeDogMCwgeTogMCB9O1xuICBjb25zdCBub2RlID0ge1xuICAgIGxhYmVsU3R5bGU6IHN0eWxlcy5sYWJlbFN0eWxlLFxuICAgIHNoYXBlLFxuICAgIGxhYmVsVGV4dDogdmVydGV4VGV4dCxcbiAgICByeDogcmFkaXVzLFxuICAgIHJ5OiByYWRpdXMsXG4gICAgY2xhc3M6IGNsYXNzU3RyLFxuICAgIHN0eWxlOiBzdHlsZXMuc3R5bGUsXG4gICAgaWQ6IHZlcnRleC5pZCxcbiAgICBkaXJlY3Rpb25zOiB2ZXJ0ZXguZGlyZWN0aW9ucyxcbiAgICB3aWR0aDogYm91bmRzLndpZHRoLFxuICAgIGhlaWdodDogYm91bmRzLmhlaWdodCxcbiAgICB4OiBib3VuZHMueCxcbiAgICB5OiBib3VuZHMueSxcbiAgICBwb3NpdGlvbmVkLFxuICAgIGludGVyc2VjdDogdm9pZCAwLFxuICAgIHR5cGU6IHZlcnRleC50eXBlLFxuICAgIHBhZGRpbmc6IHBhZGRpbmcyID8/ICgoKF9jID0gKF9iMiA9IGdldENvbmZpZyQxKCkpID09IG51bGwgPyB2b2lkIDAgOiBfYjIuYmxvY2spID09IG51bGwgPyB2b2lkIDAgOiBfYy5wYWRkaW5nKSB8fCAwKVxuICB9O1xuICByZXR1cm4gbm9kZTtcbn1cbmFzeW5jIGZ1bmN0aW9uIGNhbGN1bGF0ZUJsb2NrU2l6ZShlbGVtLCBibG9jaywgZGIyKSB7XG4gIGNvbnN0IG5vZGUgPSBnZXROb2RlRnJvbUJsb2NrKGJsb2NrLCBkYjIsIGZhbHNlKTtcbiAgaWYgKG5vZGUudHlwZSA9PT0gXCJncm91cFwiKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbnN0IG5vZGVFbCA9IGF3YWl0IGluc2VydE5vZGUoZWxlbSwgbm9kZSk7XG4gIGNvbnN0IGJvdW5kaW5nQm94ID0gbm9kZUVsLm5vZGUoKS5nZXRCQm94KCk7XG4gIGNvbnN0IG9iaiA9IGRiMi5nZXRCbG9jayhub2RlLmlkKTtcbiAgb2JqLnNpemUgPSB7IHdpZHRoOiBib3VuZGluZ0JveC53aWR0aCwgaGVpZ2h0OiBib3VuZGluZ0JveC5oZWlnaHQsIHg6IDAsIHk6IDAsIG5vZGU6IG5vZGVFbCB9O1xuICBkYjIuc2V0QmxvY2sob2JqKTtcbiAgbm9kZUVsLnJlbW92ZSgpO1xufVxuYXN5bmMgZnVuY3Rpb24gaW5zZXJ0QmxvY2tQb3NpdGlvbmVkKGVsZW0sIGJsb2NrLCBkYjIpIHtcbiAgY29uc3Qgbm9kZSA9IGdldE5vZGVGcm9tQmxvY2soYmxvY2ssIGRiMiwgdHJ1ZSk7XG4gIGNvbnN0IG9iaiA9IGRiMi5nZXRCbG9jayhub2RlLmlkKTtcbiAgaWYgKG9iai50eXBlICE9PSBcInNwYWNlXCIpIHtcbiAgICBhd2FpdCBpbnNlcnROb2RlKGVsZW0sIG5vZGUpO1xuICAgIGJsb2NrLmludGVyc2VjdCA9IG5vZGUgPT0gbnVsbCA/IHZvaWQgMCA6IG5vZGUuaW50ZXJzZWN0O1xuICAgIHBvc2l0aW9uTm9kZShub2RlKTtcbiAgfVxufVxuYXN5bmMgZnVuY3Rpb24gcGVyZm9ybU9wZXJhdGlvbnMoZWxlbSwgYmxvY2tzMiwgZGIyLCBvcGVyYXRpb24pIHtcbiAgZm9yIChjb25zdCBibG9jayBvZiBibG9ja3MyKSB7XG4gICAgYXdhaXQgb3BlcmF0aW9uKGVsZW0sIGJsb2NrLCBkYjIpO1xuICAgIGlmIChibG9jay5jaGlsZHJlbikge1xuICAgICAgYXdhaXQgcGVyZm9ybU9wZXJhdGlvbnMoZWxlbSwgYmxvY2suY2hpbGRyZW4sIGRiMiwgb3BlcmF0aW9uKTtcbiAgICB9XG4gIH1cbn1cbmFzeW5jIGZ1bmN0aW9uIGNhbGN1bGF0ZUJsb2NrU2l6ZXMoZWxlbSwgYmxvY2tzMiwgZGIyKSB7XG4gIGF3YWl0IHBlcmZvcm1PcGVyYXRpb25zKGVsZW0sIGJsb2NrczIsIGRiMiwgY2FsY3VsYXRlQmxvY2tTaXplKTtcbn1cbmFzeW5jIGZ1bmN0aW9uIGluc2VydEJsb2NrcyhlbGVtLCBibG9ja3MyLCBkYjIpIHtcbiAgYXdhaXQgcGVyZm9ybU9wZXJhdGlvbnMoZWxlbSwgYmxvY2tzMiwgZGIyLCBpbnNlcnRCbG9ja1Bvc2l0aW9uZWQpO1xufVxuYXN5bmMgZnVuY3Rpb24gaW5zZXJ0RWRnZXMoZWxlbSwgZWRnZXMsIGJsb2NrczIsIGRiMiwgaWQpIHtcbiAgY29uc3QgZyA9IG5ldyBncmFwaGxpYi5HcmFwaCh7XG4gICAgbXVsdGlncmFwaDogdHJ1ZSxcbiAgICBjb21wb3VuZDogdHJ1ZVxuICB9KTtcbiAgZy5zZXRHcmFwaCh7XG4gICAgcmFua2RpcjogXCJUQlwiLFxuICAgIG5vZGVzZXA6IDEwLFxuICAgIHJhbmtzZXA6IDEwLFxuICAgIG1hcmdpbng6IDgsXG4gICAgbWFyZ2lueTogOFxuICB9KTtcbiAgZm9yIChjb25zdCBibG9jayBvZiBibG9ja3MyKSB7XG4gICAgaWYgKGJsb2NrLnNpemUpIHtcbiAgICAgIGcuc2V0Tm9kZShibG9jay5pZCwge1xuICAgICAgICB3aWR0aDogYmxvY2suc2l6ZS53aWR0aCxcbiAgICAgICAgaGVpZ2h0OiBibG9jay5zaXplLmhlaWdodCxcbiAgICAgICAgaW50ZXJzZWN0OiBibG9jay5pbnRlcnNlY3RcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuICBmb3IgKGNvbnN0IGVkZ2Ugb2YgZWRnZXMpIHtcbiAgICBpZiAoZWRnZS5zdGFydCAmJiBlZGdlLmVuZCkge1xuICAgICAgY29uc3Qgc3RhcnRCbG9jayA9IGRiMi5nZXRCbG9jayhlZGdlLnN0YXJ0KTtcbiAgICAgIGNvbnN0IGVuZEJsb2NrID0gZGIyLmdldEJsb2NrKGVkZ2UuZW5kKTtcbiAgICAgIGlmICgoc3RhcnRCbG9jayA9PSBudWxsID8gdm9pZCAwIDogc3RhcnRCbG9jay5zaXplKSAmJiAoZW5kQmxvY2sgPT0gbnVsbCA/IHZvaWQgMCA6IGVuZEJsb2NrLnNpemUpKSB7XG4gICAgICAgIGNvbnN0IHN0YXJ0ID0gc3RhcnRCbG9jay5zaXplO1xuICAgICAgICBjb25zdCBlbmQgPSBlbmRCbG9jay5zaXplO1xuICAgICAgICBjb25zdCBwb2ludHMgPSBbXG4gICAgICAgICAgeyB4OiBzdGFydC54LCB5OiBzdGFydC55IH0sXG4gICAgICAgICAgeyB4OiBzdGFydC54ICsgKGVuZC54IC0gc3RhcnQueCkgLyAyLCB5OiBzdGFydC55ICsgKGVuZC55IC0gc3RhcnQueSkgLyAyIH0sXG4gICAgICAgICAgeyB4OiBlbmQueCwgeTogZW5kLnkgfVxuICAgICAgICBdO1xuICAgICAgICBhd2FpdCBpbnNlcnRFZGdlKFxuICAgICAgICAgIGVsZW0sXG4gICAgICAgICAgeyB2OiBlZGdlLnN0YXJ0LCB3OiBlZGdlLmVuZCwgbmFtZTogZWRnZS5pZCB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIC4uLmVkZ2UsXG4gICAgICAgICAgICBhcnJvd1R5cGVFbmQ6IGVkZ2UuYXJyb3dUeXBlRW5kLFxuICAgICAgICAgICAgYXJyb3dUeXBlU3RhcnQ6IGVkZ2UuYXJyb3dUeXBlU3RhcnQsXG4gICAgICAgICAgICBwb2ludHMsXG4gICAgICAgICAgICBjbGFzc2VzOiBcImVkZ2UtdGhpY2tuZXNzLW5vcm1hbCBlZGdlLXBhdHRlcm4tc29saWQgZmxvd2NoYXJ0LWxpbmsgTFMtYTEgTEUtYjFcIlxuICAgICAgICAgIH0sXG4gICAgICAgICAgdm9pZCAwLFxuICAgICAgICAgIFwiYmxvY2tcIixcbiAgICAgICAgICBnLFxuICAgICAgICAgIGlkXG4gICAgICAgICk7XG4gICAgICAgIGlmIChlZGdlLmxhYmVsKSB7XG4gICAgICAgICAgYXdhaXQgaW5zZXJ0RWRnZUxhYmVsKGVsZW0sIHtcbiAgICAgICAgICAgIC4uLmVkZ2UsXG4gICAgICAgICAgICBsYWJlbDogZWRnZS5sYWJlbCxcbiAgICAgICAgICAgIGxhYmVsU3R5bGU6IFwic3Ryb2tlOiAjMzMzOyBzdHJva2Utd2lkdGg6IDEuNXB4O2ZpbGw6bm9uZTtcIixcbiAgICAgICAgICAgIGFycm93VHlwZUVuZDogZWRnZS5hcnJvd1R5cGVFbmQsXG4gICAgICAgICAgICBhcnJvd1R5cGVTdGFydDogZWRnZS5hcnJvd1R5cGVTdGFydCxcbiAgICAgICAgICAgIHBvaW50cyxcbiAgICAgICAgICAgIGNsYXNzZXM6IFwiZWRnZS10aGlja25lc3Mtbm9ybWFsIGVkZ2UtcGF0dGVybi1zb2xpZCBmbG93Y2hhcnQtbGluayBMUy1hMSBMRS1iMVwiXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgYXdhaXQgcG9zaXRpb25FZGdlTGFiZWwoXG4gICAgICAgICAgICB7IC4uLmVkZ2UsIHg6IHBvaW50c1sxXS54LCB5OiBwb2ludHNbMV0ueSB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBvcmlnaW5hbFBhdGg6IHBvaW50c1xuICAgICAgICAgICAgfVxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbmNvbnN0IHBhZGRpbmcgPSAoKF9iID0gKF9hID0gZ2V0Q29uZmlnKCkpID09IG51bGwgPyB2b2lkIDAgOiBfYS5ibG9jaykgPT0gbnVsbCA/IHZvaWQgMCA6IF9iLnBhZGRpbmcpIHx8IDg7XG5mdW5jdGlvbiBjYWxjdWxhdGVCbG9ja1Bvc2l0aW9uKGNvbHVtbnMsIHBvc2l0aW9uKSB7XG4gIGlmIChjb2x1bW5zID09PSAwIHx8ICFOdW1iZXIuaXNJbnRlZ2VyKGNvbHVtbnMpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiQ29sdW1ucyBtdXN0IGJlIGFuIGludGVnZXIgIT09IDAuXCIpO1xuICB9XG4gIGlmIChwb3NpdGlvbiA8IDAgfHwgIU51bWJlci5pc0ludGVnZXIocG9zaXRpb24pKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiUG9zaXRpb24gbXVzdCBiZSBhIG5vbi1uZWdhdGl2ZSBpbnRlZ2VyLlwiICsgcG9zaXRpb24pO1xuICB9XG4gIGlmIChjb2x1bW5zIDwgMCkge1xuICAgIHJldHVybiB7IHB4OiBwb3NpdGlvbiwgcHk6IDAgfTtcbiAgfVxuICBpZiAoY29sdW1ucyA9PT0gMSkge1xuICAgIHJldHVybiB7IHB4OiAwLCBweTogcG9zaXRpb24gfTtcbiAgfVxuICBjb25zdCBweCA9IHBvc2l0aW9uICUgY29sdW1ucztcbiAgY29uc3QgcHkgPSBNYXRoLmZsb29yKHBvc2l0aW9uIC8gY29sdW1ucyk7XG4gIHJldHVybiB7IHB4LCBweSB9O1xufVxuY29uc3QgZ2V0TWF4Q2hpbGRTaXplID0gKGJsb2NrKSA9PiB7XG4gIGxldCBtYXhXaWR0aCA9IDA7XG4gIGxldCBtYXhIZWlnaHQgPSAwO1xuICBmb3IgKGNvbnN0IGNoaWxkIG9mIGJsb2NrLmNoaWxkcmVuKSB7XG4gICAgY29uc3QgeyB3aWR0aCwgaGVpZ2h0LCB4LCB5IH0gPSBjaGlsZC5zaXplIHx8IHsgd2lkdGg6IDAsIGhlaWdodDogMCwgeDogMCwgeTogMCB9O1xuICAgIGxvZy5kZWJ1ZyhcbiAgICAgIFwiZ2V0TWF4Q2hpbGRTaXplIGFiYzk1IGNoaWxkOlwiLFxuICAgICAgY2hpbGQuaWQsXG4gICAgICBcIndpZHRoOlwiLFxuICAgICAgd2lkdGgsXG4gICAgICBcImhlaWdodDpcIixcbiAgICAgIGhlaWdodCxcbiAgICAgIFwieDpcIixcbiAgICAgIHgsXG4gICAgICBcInk6XCIsXG4gICAgICB5LFxuICAgICAgY2hpbGQudHlwZVxuICAgICk7XG4gICAgaWYgKGNoaWxkLnR5cGUgPT09IFwic3BhY2VcIikge1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIGlmICh3aWR0aCA+IG1heFdpZHRoKSB7XG4gICAgICBtYXhXaWR0aCA9IHdpZHRoIC8gKGJsb2NrLndpZHRoSW5Db2x1bW5zIHx8IDEpO1xuICAgIH1cbiAgICBpZiAoaGVpZ2h0ID4gbWF4SGVpZ2h0KSB7XG4gICAgICBtYXhIZWlnaHQgPSBoZWlnaHQ7XG4gICAgfVxuICB9XG4gIHJldHVybiB7IHdpZHRoOiBtYXhXaWR0aCwgaGVpZ2h0OiBtYXhIZWlnaHQgfTtcbn07XG5mdW5jdGlvbiBzZXRCbG9ja1NpemVzKGJsb2NrLCBkYjIsIHNpYmxpbmdXaWR0aCA9IDAsIHNpYmxpbmdIZWlnaHQgPSAwKSB7XG4gIHZhciBfYTIsIF9iMiwgX2MsIF9kLCBfZSwgX2YsIF9nLCBfaCwgX2ksIF9qLCBfaztcbiAgbG9nLmRlYnVnKFxuICAgIFwic2V0QmxvY2tTaXplcyBhYmM5NSAoc3RhcnQpXCIsXG4gICAgYmxvY2suaWQsXG4gICAgKF9hMiA9IGJsb2NrID09IG51bGwgPyB2b2lkIDAgOiBibG9jay5zaXplKSA9PSBudWxsID8gdm9pZCAwIDogX2EyLngsXG4gICAgXCJibG9jayB3aWR0aCA9XCIsXG4gICAgYmxvY2sgPT0gbnVsbCA/IHZvaWQgMCA6IGJsb2NrLnNpemUsXG4gICAgXCJzaWVibGluZ1dpZHRoXCIsXG4gICAgc2libGluZ1dpZHRoXG4gICk7XG4gIGlmICghKChfYjIgPSBibG9jayA9PSBudWxsID8gdm9pZCAwIDogYmxvY2suc2l6ZSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9iMi53aWR0aCkpIHtcbiAgICBibG9jay5zaXplID0ge1xuICAgICAgd2lkdGg6IHNpYmxpbmdXaWR0aCxcbiAgICAgIGhlaWdodDogc2libGluZ0hlaWdodCxcbiAgICAgIHg6IDAsXG4gICAgICB5OiAwXG4gICAgfTtcbiAgfVxuICBsZXQgbWF4V2lkdGggPSAwO1xuICBsZXQgbWF4SGVpZ2h0ID0gMDtcbiAgaWYgKCgoX2MgPSBibG9jay5jaGlsZHJlbikgPT0gbnVsbCA/IHZvaWQgMCA6IF9jLmxlbmd0aCkgPiAwKSB7XG4gICAgZm9yIChjb25zdCBjaGlsZCBvZiBibG9jay5jaGlsZHJlbikge1xuICAgICAgc2V0QmxvY2tTaXplcyhjaGlsZCwgZGIyKTtcbiAgICB9XG4gICAgY29uc3QgY2hpbGRTaXplID0gZ2V0TWF4Q2hpbGRTaXplKGJsb2NrKTtcbiAgICBtYXhXaWR0aCA9IGNoaWxkU2l6ZS53aWR0aDtcbiAgICBtYXhIZWlnaHQgPSBjaGlsZFNpemUuaGVpZ2h0O1xuICAgIGxvZy5kZWJ1ZyhcInNldEJsb2NrU2l6ZXMgYWJjOTUgbWF4V2lkdGggb2ZcIiwgYmxvY2suaWQsIFwiOnMgY2hpbGRyZW4gaXMgXCIsIG1heFdpZHRoLCBtYXhIZWlnaHQpO1xuICAgIGZvciAoY29uc3QgY2hpbGQgb2YgYmxvY2suY2hpbGRyZW4pIHtcbiAgICAgIGlmIChjaGlsZC5zaXplKSB7XG4gICAgICAgIGxvZy5kZWJ1ZyhcbiAgICAgICAgICBgYWJjOTUgU2V0dGluZyBzaXplIG9mIGNoaWxkcmVuIG9mICR7YmxvY2suaWR9IGlkPSR7Y2hpbGQuaWR9ICR7bWF4V2lkdGh9ICR7bWF4SGVpZ2h0fSAke2NoaWxkLnNpemV9YFxuICAgICAgICApO1xuICAgICAgICBjaGlsZC5zaXplLndpZHRoID0gbWF4V2lkdGggKiAoY2hpbGQud2lkdGhJbkNvbHVtbnMgfHwgMSkgKyBwYWRkaW5nICogKChjaGlsZC53aWR0aEluQ29sdW1ucyB8fCAxKSAtIDEpO1xuICAgICAgICBjaGlsZC5zaXplLmhlaWdodCA9IG1heEhlaWdodDtcbiAgICAgICAgY2hpbGQuc2l6ZS54ID0gMDtcbiAgICAgICAgY2hpbGQuc2l6ZS55ID0gMDtcbiAgICAgICAgbG9nLmRlYnVnKFxuICAgICAgICAgIGBhYmM5NSB1cGRhdGluZyBzaXplIG9mICR7YmxvY2suaWR9IGNoaWxkcmVuIGNoaWxkOiR7Y2hpbGQuaWR9IG1heFdpZHRoOiR7bWF4V2lkdGh9IG1heEhlaWdodDoke21heEhlaWdodH1gXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICAgIGZvciAoY29uc3QgY2hpbGQgb2YgYmxvY2suY2hpbGRyZW4pIHtcbiAgICAgIHNldEJsb2NrU2l6ZXMoY2hpbGQsIGRiMiwgbWF4V2lkdGgsIG1heEhlaWdodCk7XG4gICAgfVxuICAgIGNvbnN0IGNvbHVtbnMgPSBibG9jay5jb2x1bW5zIHx8IC0xO1xuICAgIGxldCBudW1JdGVtcyA9IDA7XG4gICAgZm9yIChjb25zdCBjaGlsZCBvZiBibG9jay5jaGlsZHJlbikge1xuICAgICAgbnVtSXRlbXMgKz0gY2hpbGQud2lkdGhJbkNvbHVtbnMgfHwgMTtcbiAgICB9XG4gICAgbGV0IHhTaXplID0gYmxvY2suY2hpbGRyZW4ubGVuZ3RoO1xuICAgIGlmIChjb2x1bW5zID4gMCAmJiBjb2x1bW5zIDwgbnVtSXRlbXMpIHtcbiAgICAgIHhTaXplID0gY29sdW1ucztcbiAgICB9XG4gICAgYmxvY2sud2lkdGhJbkNvbHVtbnMgfHwgMTtcbiAgICBjb25zdCB5U2l6ZSA9IE1hdGguY2VpbChudW1JdGVtcyAvIHhTaXplKTtcbiAgICBsZXQgd2lkdGggPSB4U2l6ZSAqIChtYXhXaWR0aCArIHBhZGRpbmcpICsgcGFkZGluZztcbiAgICBsZXQgaGVpZ2h0ID0geVNpemUgKiAobWF4SGVpZ2h0ICsgcGFkZGluZykgKyBwYWRkaW5nO1xuICAgIGlmICh3aWR0aCA8IHNpYmxpbmdXaWR0aCkge1xuICAgICAgbG9nLmRlYnVnKFxuICAgICAgICBgRGV0ZWN0ZWQgdG8gc21hbGwgc2llYmxpbmc6IGFiYzk1ICR7YmxvY2suaWR9IHNpZWJsaW5nV2lkdGggJHtzaWJsaW5nV2lkdGh9IHNpZWJsaW5nSGVpZ2h0ICR7c2libGluZ0hlaWdodH0gd2lkdGggJHt3aWR0aH1gXG4gICAgICApO1xuICAgICAgd2lkdGggPSBzaWJsaW5nV2lkdGg7XG4gICAgICBoZWlnaHQgPSBzaWJsaW5nSGVpZ2h0O1xuICAgICAgY29uc3QgY2hpbGRXaWR0aCA9IChzaWJsaW5nV2lkdGggLSB4U2l6ZSAqIHBhZGRpbmcgLSBwYWRkaW5nKSAvIHhTaXplO1xuICAgICAgY29uc3QgY2hpbGRIZWlnaHQgPSAoc2libGluZ0hlaWdodCAtIHlTaXplICogcGFkZGluZyAtIHBhZGRpbmcpIC8geVNpemU7XG4gICAgICBsb2cuZGVidWcoXCJTaXplIGluZGF0YSBhYmM4OFwiLCBibG9jay5pZCwgXCJjaGlsZFdpZHRoXCIsIGNoaWxkV2lkdGgsIFwibWF4V2lkdGhcIiwgbWF4V2lkdGgpO1xuICAgICAgbG9nLmRlYnVnKFwiU2l6ZSBpbmRhdGEgYWJjODhcIiwgYmxvY2suaWQsIFwiY2hpbGRIZWlnaHRcIiwgY2hpbGRIZWlnaHQsIFwibWF4SGVpZ2h0XCIsIG1heEhlaWdodCk7XG4gICAgICBsb2cuZGVidWcoXCJTaXplIGluZGF0YSBhYmM4OCB4U2l6ZVwiLCB4U2l6ZSwgXCJwYWRkaW5nXCIsIHBhZGRpbmcpO1xuICAgICAgZm9yIChjb25zdCBjaGlsZCBvZiBibG9jay5jaGlsZHJlbikge1xuICAgICAgICBpZiAoY2hpbGQuc2l6ZSkge1xuICAgICAgICAgIGNoaWxkLnNpemUud2lkdGggPSBjaGlsZFdpZHRoO1xuICAgICAgICAgIGNoaWxkLnNpemUuaGVpZ2h0ID0gY2hpbGRIZWlnaHQ7XG4gICAgICAgICAgY2hpbGQuc2l6ZS54ID0gMDtcbiAgICAgICAgICBjaGlsZC5zaXplLnkgPSAwO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGxvZy5kZWJ1ZyhcbiAgICAgIGBhYmM5NSAoZmluYWxlIGNhbGMpICR7YmxvY2suaWR9IHhTaXplICR7eFNpemV9IHlTaXplICR7eVNpemV9IGNvbHVtbnMgJHtjb2x1bW5zfSR7YmxvY2suY2hpbGRyZW4ubGVuZ3RofSB3aWR0aD0ke01hdGgubWF4KHdpZHRoLCAoKF9kID0gYmxvY2suc2l6ZSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9kLndpZHRoKSB8fCAwKX1gXG4gICAgKTtcbiAgICBpZiAod2lkdGggPCAoKChfZSA9IGJsb2NrID09IG51bGwgPyB2b2lkIDAgOiBibG9jay5zaXplKSA9PSBudWxsID8gdm9pZCAwIDogX2Uud2lkdGgpIHx8IDApKSB7XG4gICAgICB3aWR0aCA9ICgoX2YgPSBibG9jayA9PSBudWxsID8gdm9pZCAwIDogYmxvY2suc2l6ZSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9mLndpZHRoKSB8fCAwO1xuICAgICAgY29uc3QgbnVtID0gY29sdW1ucyA+IDAgPyBNYXRoLm1pbihibG9jay5jaGlsZHJlbi5sZW5ndGgsIGNvbHVtbnMpIDogYmxvY2suY2hpbGRyZW4ubGVuZ3RoO1xuICAgICAgaWYgKG51bSA+IDApIHtcbiAgICAgICAgY29uc3QgY2hpbGRXaWR0aCA9ICh3aWR0aCAtIG51bSAqIHBhZGRpbmcgLSBwYWRkaW5nKSAvIG51bTtcbiAgICAgICAgbG9nLmRlYnVnKFwiYWJjOTUgKGdyb3dpbmcgdG8gZml0KSB3aWR0aFwiLCBibG9jay5pZCwgd2lkdGgsIChfZyA9IGJsb2NrLnNpemUpID09IG51bGwgPyB2b2lkIDAgOiBfZy53aWR0aCwgY2hpbGRXaWR0aCk7XG4gICAgICAgIGZvciAoY29uc3QgY2hpbGQgb2YgYmxvY2suY2hpbGRyZW4pIHtcbiAgICAgICAgICBpZiAoY2hpbGQuc2l6ZSkge1xuICAgICAgICAgICAgY2hpbGQuc2l6ZS53aWR0aCA9IGNoaWxkV2lkdGg7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGJsb2NrLnNpemUgPSB7XG4gICAgICB3aWR0aCxcbiAgICAgIGhlaWdodCxcbiAgICAgIHg6IDAsXG4gICAgICB5OiAwXG4gICAgfTtcbiAgfVxuICBsb2cuZGVidWcoXG4gICAgXCJzZXRCbG9ja1NpemVzIGFiYzk0IChkb25lKVwiLFxuICAgIGJsb2NrLmlkLFxuICAgIChfaCA9IGJsb2NrID09IG51bGwgPyB2b2lkIDAgOiBibG9jay5zaXplKSA9PSBudWxsID8gdm9pZCAwIDogX2gueCxcbiAgICAoX2kgPSBibG9jayA9PSBudWxsID8gdm9pZCAwIDogYmxvY2suc2l6ZSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9pLndpZHRoLFxuICAgIChfaiA9IGJsb2NrID09IG51bGwgPyB2b2lkIDAgOiBibG9jay5zaXplKSA9PSBudWxsID8gdm9pZCAwIDogX2oueSxcbiAgICAoX2sgPSBibG9jayA9PSBudWxsID8gdm9pZCAwIDogYmxvY2suc2l6ZSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9rLmhlaWdodFxuICApO1xufVxuZnVuY3Rpb24gbGF5b3V0QmxvY2tzKGJsb2NrLCBkYjIpIHtcbiAgdmFyIF9hMiwgX2IyLCBfYywgX2QsIF9lLCBfZiwgX2csIF9oLCBfaSwgX2osIF9rLCBfbCwgX20sIF9uLCBfbywgX3AsIF9xO1xuICBsb2cuZGVidWcoXG4gICAgYGFiYzg1IGxheW91dCBibG9ja3MgKD0+bGF5b3V0QmxvY2tzKSAke2Jsb2NrLmlkfSB4OiAkeyhfYTIgPSBibG9jayA9PSBudWxsID8gdm9pZCAwIDogYmxvY2suc2l6ZSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hMi54fSB5OiAkeyhfYjIgPSBibG9jayA9PSBudWxsID8gdm9pZCAwIDogYmxvY2suc2l6ZSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9iMi55fSB3aWR0aDogJHsoX2MgPSBibG9jayA9PSBudWxsID8gdm9pZCAwIDogYmxvY2suc2l6ZSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9jLndpZHRofWBcbiAgKTtcbiAgY29uc3QgY29sdW1ucyA9IGJsb2NrLmNvbHVtbnMgfHwgLTE7XG4gIGxvZy5kZWJ1ZyhcImxheW91dEJsb2NrcyBjb2x1bW5zIGFiYzk1XCIsIGJsb2NrLmlkLCBcIj0+XCIsIGNvbHVtbnMsIGJsb2NrKTtcbiAgaWYgKGJsb2NrLmNoaWxkcmVuICYmIC8vIGZpbmQgbWF4IHdpZHRoIG9mIGNoaWxkcmVuXG4gIGJsb2NrLmNoaWxkcmVuLmxlbmd0aCA+IDApIHtcbiAgICBjb25zdCB3aWR0aCA9ICgoX2UgPSAoX2QgPSBibG9jayA9PSBudWxsID8gdm9pZCAwIDogYmxvY2suY2hpbGRyZW5bMF0pID09IG51bGwgPyB2b2lkIDAgOiBfZC5zaXplKSA9PSBudWxsID8gdm9pZCAwIDogX2Uud2lkdGgpIHx8IDA7XG4gICAgY29uc3Qgd2lkdGhPZkNoaWxkcmVuID0gYmxvY2suY2hpbGRyZW4ubGVuZ3RoICogd2lkdGggKyAoYmxvY2suY2hpbGRyZW4ubGVuZ3RoIC0gMSkgKiBwYWRkaW5nO1xuICAgIGxvZy5kZWJ1ZyhcIndpZHRoT2ZDaGlsZHJlbiA4OFwiLCB3aWR0aE9mQ2hpbGRyZW4sIFwicG9zWFwiKTtcbiAgICBsZXQgY29sdW1uUG9zID0gMDtcbiAgICBsb2cuZGVidWcoXCJhYmM5MSBibG9jaz8uc2l6ZT8ueFwiLCBibG9jay5pZCwgKF9mID0gYmxvY2sgPT0gbnVsbCA/IHZvaWQgMCA6IGJsb2NrLnNpemUpID09IG51bGwgPyB2b2lkIDAgOiBfZi54KTtcbiAgICBsZXQgc3RhcnRpbmdQb3NYID0gKChfZyA9IGJsb2NrID09IG51bGwgPyB2b2lkIDAgOiBibG9jay5zaXplKSA9PSBudWxsID8gdm9pZCAwIDogX2cueCkgPyAoKF9oID0gYmxvY2sgPT0gbnVsbCA/IHZvaWQgMCA6IGJsb2NrLnNpemUpID09IG51bGwgPyB2b2lkIDAgOiBfaC54KSArICgtKChfaSA9IGJsb2NrID09IG51bGwgPyB2b2lkIDAgOiBibG9jay5zaXplKSA9PSBudWxsID8gdm9pZCAwIDogX2kud2lkdGgpIC8gMiB8fCAwKSA6IC1wYWRkaW5nO1xuICAgIGxldCByb3dQb3MgPSAwO1xuICAgIGZvciAoY29uc3QgY2hpbGQgb2YgYmxvY2suY2hpbGRyZW4pIHtcbiAgICAgIGNvbnN0IHBhcmVudCA9IGJsb2NrO1xuICAgICAgaWYgKCFjaGlsZC5zaXplKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgY29uc3QgeyB3aWR0aDogd2lkdGgyLCBoZWlnaHQgfSA9IGNoaWxkLnNpemU7XG4gICAgICBjb25zdCB7IHB4LCBweSB9ID0gY2FsY3VsYXRlQmxvY2tQb3NpdGlvbihjb2x1bW5zLCBjb2x1bW5Qb3MpO1xuICAgICAgaWYgKHB5ICE9IHJvd1Bvcykge1xuICAgICAgICByb3dQb3MgPSBweTtcbiAgICAgICAgc3RhcnRpbmdQb3NYID0gKChfaiA9IGJsb2NrID09IG51bGwgPyB2b2lkIDAgOiBibG9jay5zaXplKSA9PSBudWxsID8gdm9pZCAwIDogX2oueCkgPyAoKF9rID0gYmxvY2sgPT0gbnVsbCA/IHZvaWQgMCA6IGJsb2NrLnNpemUpID09IG51bGwgPyB2b2lkIDAgOiBfay54KSArICgtKChfbCA9IGJsb2NrID09IG51bGwgPyB2b2lkIDAgOiBibG9jay5zaXplKSA9PSBudWxsID8gdm9pZCAwIDogX2wud2lkdGgpIC8gMiB8fCAwKSA6IC1wYWRkaW5nO1xuICAgICAgICBsb2cuZGVidWcoXCJOZXcgcm93IGluIGxheW91dCBmb3IgYmxvY2tcIiwgYmxvY2suaWQsIFwiIGFuZCBjaGlsZCBcIiwgY2hpbGQuaWQsIHJvd1Bvcyk7XG4gICAgICB9XG4gICAgICBsb2cuZGVidWcoXG4gICAgICAgIGBhYmM4OSBsYXlvdXQgYmxvY2tzIChjaGlsZCkgaWQ6ICR7Y2hpbGQuaWR9IFBvczogJHtjb2x1bW5Qb3N9IChweCwgcHkpICR7cHh9LCR7cHl9ICgkeyhfbSA9IHBhcmVudCA9PSBudWxsID8gdm9pZCAwIDogcGFyZW50LnNpemUpID09IG51bGwgPyB2b2lkIDAgOiBfbS54fSwkeyhfbiA9IHBhcmVudCA9PSBudWxsID8gdm9pZCAwIDogcGFyZW50LnNpemUpID09IG51bGwgPyB2b2lkIDAgOiBfbi55fSkgcGFyZW50OiAke3BhcmVudC5pZH0gd2lkdGg6ICR7d2lkdGgyfSR7cGFkZGluZ31gXG4gICAgICApO1xuICAgICAgaWYgKHBhcmVudC5zaXplKSB7XG4gICAgICAgIGNvbnN0IGhhbGZXaWR0aCA9IHdpZHRoMiAvIDI7XG4gICAgICAgIGNoaWxkLnNpemUueCA9IHN0YXJ0aW5nUG9zWCArIHBhZGRpbmcgKyBoYWxmV2lkdGg7XG4gICAgICAgIGxvZy5kZWJ1ZyhcbiAgICAgICAgICBgYWJjOTEgbGF5b3V0IGJsb2NrcyAoY2FsYykgcHgsIHB5aWQ6JHtjaGlsZC5pZH0gc3RhcnRpbmdQb3M9WCR7c3RhcnRpbmdQb3NYfSBuZXcgc3RhcnRpbmdQb3NYJHtjaGlsZC5zaXplLnh9ICR7aGFsZldpZHRofSBwYWRkaW5nPSR7cGFkZGluZ30gd2lkdGg9JHt3aWR0aDJ9IGhhbGZXaWR0aD0ke2hhbGZXaWR0aH0gPT4geDoke2NoaWxkLnNpemUueH0geToke2NoaWxkLnNpemUueX0gJHtjaGlsZC53aWR0aEluQ29sdW1uc30gKHdpZHRoICogKGNoaWxkPy53IHx8IDEpKSAvIDIgJHt3aWR0aDIgKiAoKGNoaWxkID09IG51bGwgPyB2b2lkIDAgOiBjaGlsZC53aWR0aEluQ29sdW1ucykgfHwgMSkgLyAyfWBcbiAgICAgICAgKTtcbiAgICAgICAgc3RhcnRpbmdQb3NYID0gY2hpbGQuc2l6ZS54ICsgaGFsZldpZHRoO1xuICAgICAgICBjaGlsZC5zaXplLnkgPSBwYXJlbnQuc2l6ZS55IC0gcGFyZW50LnNpemUuaGVpZ2h0IC8gMiArIHB5ICogKGhlaWdodCArIHBhZGRpbmcpICsgaGVpZ2h0IC8gMiArIHBhZGRpbmc7XG4gICAgICAgIGxvZy5kZWJ1ZyhcbiAgICAgICAgICBgYWJjODggbGF5b3V0IGJsb2NrcyAoY2FsYykgcHgsIHB5aWQ6JHtjaGlsZC5pZH1zdGFydGluZ1Bvc1gke3N0YXJ0aW5nUG9zWH0ke3BhZGRpbmd9JHtoYWxmV2lkdGh9PT54OiR7Y2hpbGQuc2l6ZS54fXk6JHtjaGlsZC5zaXplLnl9JHtjaGlsZC53aWR0aEluQ29sdW1uc30od2lkdGggKiAoY2hpbGQ/LncgfHwgMSkpIC8gMiR7d2lkdGgyICogKChjaGlsZCA9PSBudWxsID8gdm9pZCAwIDogY2hpbGQud2lkdGhJbkNvbHVtbnMpIHx8IDEpIC8gMn1gXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICBpZiAoY2hpbGQuY2hpbGRyZW4pIHtcbiAgICAgICAgbGF5b3V0QmxvY2tzKGNoaWxkKTtcbiAgICAgIH1cbiAgICAgIGNvbHVtblBvcyArPSAoY2hpbGQgPT0gbnVsbCA/IHZvaWQgMCA6IGNoaWxkLndpZHRoSW5Db2x1bW5zKSB8fCAxO1xuICAgICAgbG9nLmRlYnVnKFwiYWJjODggY29sdW1uc1Bvc1wiLCBjaGlsZCwgY29sdW1uUG9zKTtcbiAgICB9XG4gIH1cbiAgbG9nLmRlYnVnKFxuICAgIGBsYXlvdXQgYmxvY2tzICg8PT1sYXlvdXRCbG9ja3MpICR7YmxvY2suaWR9IHg6ICR7KF9vID0gYmxvY2sgPT0gbnVsbCA/IHZvaWQgMCA6IGJsb2NrLnNpemUpID09IG51bGwgPyB2b2lkIDAgOiBfby54fSB5OiAkeyhfcCA9IGJsb2NrID09IG51bGwgPyB2b2lkIDAgOiBibG9jay5zaXplKSA9PSBudWxsID8gdm9pZCAwIDogX3AueX0gd2lkdGg6ICR7KF9xID0gYmxvY2sgPT0gbnVsbCA/IHZvaWQgMCA6IGJsb2NrLnNpemUpID09IG51bGwgPyB2b2lkIDAgOiBfcS53aWR0aH1gXG4gICk7XG59XG5mdW5jdGlvbiBmaW5kQm91bmRzKGJsb2NrLCB7IG1pblgsIG1pblksIG1heFgsIG1heFkgfSA9IHsgbWluWDogMCwgbWluWTogMCwgbWF4WDogMCwgbWF4WTogMCB9KSB7XG4gIGlmIChibG9jay5zaXplICYmIGJsb2NrLmlkICE9PSBcInJvb3RcIikge1xuICAgIGNvbnN0IHsgeCwgeSwgd2lkdGgsIGhlaWdodCB9ID0gYmxvY2suc2l6ZTtcbiAgICBpZiAoeCAtIHdpZHRoIC8gMiA8IG1pblgpIHtcbiAgICAgIG1pblggPSB4IC0gd2lkdGggLyAyO1xuICAgIH1cbiAgICBpZiAoeSAtIGhlaWdodCAvIDIgPCBtaW5ZKSB7XG4gICAgICBtaW5ZID0geSAtIGhlaWdodCAvIDI7XG4gICAgfVxuICAgIGlmICh4ICsgd2lkdGggLyAyID4gbWF4WCkge1xuICAgICAgbWF4WCA9IHggKyB3aWR0aCAvIDI7XG4gICAgfVxuICAgIGlmICh5ICsgaGVpZ2h0IC8gMiA+IG1heFkpIHtcbiAgICAgIG1heFkgPSB5ICsgaGVpZ2h0IC8gMjtcbiAgICB9XG4gIH1cbiAgaWYgKGJsb2NrLmNoaWxkcmVuKSB7XG4gICAgZm9yIChjb25zdCBjaGlsZCBvZiBibG9jay5jaGlsZHJlbikge1xuICAgICAgKHsgbWluWCwgbWluWSwgbWF4WCwgbWF4WSB9ID0gZmluZEJvdW5kcyhjaGlsZCwgeyBtaW5YLCBtaW5ZLCBtYXhYLCBtYXhZIH0pKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHsgbWluWCwgbWluWSwgbWF4WCwgbWF4WSB9O1xufVxuZnVuY3Rpb24gbGF5b3V0KGRiMikge1xuICBjb25zdCByb290ID0gZGIyLmdldEJsb2NrKFwicm9vdFwiKTtcbiAgaWYgKCFyb290KSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHNldEJsb2NrU2l6ZXMocm9vdCwgZGIyLCAwLCAwKTtcbiAgbGF5b3V0QmxvY2tzKHJvb3QpO1xuICBsb2cuZGVidWcoXCJnZXRCbG9ja3NcIiwgSlNPTi5zdHJpbmdpZnkocm9vdCwgbnVsbCwgMikpO1xuICBjb25zdCB7IG1pblgsIG1pblksIG1heFgsIG1heFkgfSA9IGZpbmRCb3VuZHMocm9vdCk7XG4gIGNvbnN0IGhlaWdodCA9IG1heFkgLSBtaW5ZO1xuICBjb25zdCB3aWR0aCA9IG1heFggLSBtaW5YO1xuICByZXR1cm4geyB4OiBtaW5YLCB5OiBtaW5ZLCB3aWR0aCwgaGVpZ2h0IH07XG59XG5jb25zdCBnZXRDbGFzc2VzID0gZnVuY3Rpb24odGV4dCwgZGlhZ09iaikge1xuICByZXR1cm4gZGlhZ09iai5kYi5nZXRDbGFzc2VzKCk7XG59O1xuY29uc3QgZHJhdyA9IGFzeW5jIGZ1bmN0aW9uKHRleHQsIGlkLCBfdmVyc2lvbiwgZGlhZ09iaikge1xuICBjb25zdCB7IHNlY3VyaXR5TGV2ZWwsIGJsb2NrOiBjb25mIH0gPSBnZXRDb25maWckMSgpO1xuICBjb25zdCBkYjIgPSBkaWFnT2JqLmRiO1xuICBsZXQgc2FuZGJveEVsZW1lbnQ7XG4gIGlmIChzZWN1cml0eUxldmVsID09PSBcInNhbmRib3hcIikge1xuICAgIHNhbmRib3hFbGVtZW50ID0gc2VsZWN0KFwiI2lcIiArIGlkKTtcbiAgfVxuICBjb25zdCByb290ID0gc2VjdXJpdHlMZXZlbCA9PT0gXCJzYW5kYm94XCIgPyBzZWxlY3Qoc2FuZGJveEVsZW1lbnQubm9kZXMoKVswXS5jb250ZW50RG9jdW1lbnQuYm9keSkgOiBzZWxlY3QoXCJib2R5XCIpO1xuICBjb25zdCBzdmcgPSBzZWN1cml0eUxldmVsID09PSBcInNhbmRib3hcIiA/IHJvb3Quc2VsZWN0KGBbaWQ9XCIke2lkfVwiXWApIDogc2VsZWN0KGBbaWQ9XCIke2lkfVwiXWApO1xuICBjb25zdCBtYXJrZXJzID0gW1wicG9pbnRcIiwgXCJjaXJjbGVcIiwgXCJjcm9zc1wiXTtcbiAgaW5zZXJ0TWFya2VycyhzdmcsIG1hcmtlcnMsIGRpYWdPYmoudHlwZSwgaWQpO1xuICBjb25zdCBibCA9IGRiMi5nZXRCbG9ja3MoKTtcbiAgY29uc3QgYmxBcnIgPSBkYjIuZ2V0QmxvY2tzRmxhdCgpO1xuICBjb25zdCBlZGdlcyA9IGRiMi5nZXRFZGdlcygpO1xuICBjb25zdCBub2RlcyA9IHN2Zy5pbnNlcnQoXCJnXCIpLmF0dHIoXCJjbGFzc1wiLCBcImJsb2NrXCIpO1xuICBhd2FpdCBjYWxjdWxhdGVCbG9ja1NpemVzKG5vZGVzLCBibCwgZGIyKTtcbiAgY29uc3QgYm91bmRzID0gbGF5b3V0KGRiMik7XG4gIGF3YWl0IGluc2VydEJsb2Nrcyhub2RlcywgYmwsIGRiMik7XG4gIGF3YWl0IGluc2VydEVkZ2VzKG5vZGVzLCBlZGdlcywgYmxBcnIsIGRiMiwgaWQpO1xuICBpZiAoYm91bmRzKSB7XG4gICAgY29uc3QgYm91bmRzMiA9IGJvdW5kcztcbiAgICBjb25zdCBtYWdpY0ZhY3RvciA9IE1hdGgubWF4KDEsIE1hdGgucm91bmQoMC4xMjUgKiAoYm91bmRzMi53aWR0aCAvIGJvdW5kczIuaGVpZ2h0KSkpO1xuICAgIGNvbnN0IGhlaWdodCA9IGJvdW5kczIuaGVpZ2h0ICsgbWFnaWNGYWN0b3IgKyAxMDtcbiAgICBjb25zdCB3aWR0aCA9IGJvdW5kczIud2lkdGggKyAxMDtcbiAgICBjb25zdCB7IHVzZU1heFdpZHRoIH0gPSBjb25mO1xuICAgIGNvbmZpZ3VyZVN2Z1NpemUoc3ZnLCBoZWlnaHQsIHdpZHRoLCAhIXVzZU1heFdpZHRoKTtcbiAgICBsb2cuZGVidWcoXCJIZXJlIEJvdW5kc1wiLCBib3VuZHMsIGJvdW5kczIpO1xuICAgIHN2Zy5hdHRyKFxuICAgICAgXCJ2aWV3Qm94XCIsXG4gICAgICBgJHtib3VuZHMyLnggLSA1fSAke2JvdW5kczIueSAtIDV9ICR7Ym91bmRzMi53aWR0aCArIDEwfSAke2JvdW5kczIuaGVpZ2h0ICsgMTB9YFxuICAgICk7XG4gIH1cbiAgc2NhbGVPcmRpbmFsKHNjaGVtZVRhYmxlYXUxMCk7XG59O1xuY29uc3QgcmVuZGVyZXIgPSB7XG4gIGRyYXcsXG4gIGdldENsYXNzZXNcbn07XG5jb25zdCBkaWFncmFtID0ge1xuICBwYXJzZXI6IHBhcnNlciQxLFxuICBkYjogZGIkMSxcbiAgcmVuZGVyZXIsXG4gIHN0eWxlczogZmxvd1N0eWxlc1xufTtcbmV4cG9ydCB7XG4gIGRpYWdyYW1cbn07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///4162\n')}}]);
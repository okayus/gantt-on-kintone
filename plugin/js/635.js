"use strict";(self.webpackChunkgantt_on_kintone=self.webpackChunkgantt_on_kintone||[]).push([[635],{8635:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{eval('/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   diagram: () => (/* binding */ diagram)\n/* harmony export */ });\n/* harmony import */ var _styles_b83b31c9_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(3626);\n/* harmony import */ var d3__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(8918);\n/* harmony import */ var dagre_d3_es_src_graphlib_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(697);\n/* harmony import */ var _mermaid_6dc72991_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(5950);\n/* harmony import */ var _index_01f381cb_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(2983);\n/* harmony import */ var dayjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(4353);\n/* harmony import */ var _braintree_sanitize_url__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(6750);\n/* harmony import */ var dompurify__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(2838);\n/* harmony import */ var dagre_d3_es_src_dagre_index_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(944);\n/* harmony import */ var dagre_d3_es_src_graphlib_json_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(4075);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst sanitizeText = (txt) => _mermaid_6dc72991_js__WEBPACK_IMPORTED_MODULE_7__.e.sanitizeText(txt, (0,_mermaid_6dc72991_js__WEBPACK_IMPORTED_MODULE_7__.c)());\nlet conf = {\n  dividerMargin: 10,\n  padding: 5,\n  textHeight: 10,\n  curve: void 0\n};\nconst addNamespaces = function(namespaces, g, _id, diagObj) {\n  const keys = Object.keys(namespaces);\n  _mermaid_6dc72991_js__WEBPACK_IMPORTED_MODULE_7__.l.info("keys:", keys);\n  _mermaid_6dc72991_js__WEBPACK_IMPORTED_MODULE_7__.l.info(namespaces);\n  keys.forEach(function(id) {\n    var _a, _b;\n    const vertex = namespaces[id];\n    const shape = "rect";\n    const node = {\n      shape,\n      id: vertex.id,\n      domId: vertex.domId,\n      labelText: sanitizeText(vertex.id),\n      labelStyle: "",\n      style: "fill: none; stroke: black",\n      // TODO V10: Flowchart ? Keeping flowchart for backwards compatibility. Remove in next major release\n      padding: ((_a = (0,_mermaid_6dc72991_js__WEBPACK_IMPORTED_MODULE_7__.c)().flowchart) == null ? void 0 : _a.padding) ?? ((_b = (0,_mermaid_6dc72991_js__WEBPACK_IMPORTED_MODULE_7__.c)().class) == null ? void 0 : _b.padding)\n    };\n    g.setNode(vertex.id, node);\n    addClasses(vertex.classes, g, _id, diagObj, vertex.id);\n    _mermaid_6dc72991_js__WEBPACK_IMPORTED_MODULE_7__.l.info("setNode", node);\n  });\n};\nconst addClasses = function(classes, g, _id, diagObj, parent) {\n  const keys = Object.keys(classes);\n  _mermaid_6dc72991_js__WEBPACK_IMPORTED_MODULE_7__.l.info("keys:", keys);\n  _mermaid_6dc72991_js__WEBPACK_IMPORTED_MODULE_7__.l.info(classes);\n  keys.filter((id) => classes[id].parent == parent).forEach(function(id) {\n    var _a, _b;\n    const vertex = classes[id];\n    const cssClassStr = vertex.cssClasses.join(" ");\n    const styles2 = (0,_mermaid_6dc72991_js__WEBPACK_IMPORTED_MODULE_7__.k)(vertex.styles);\n    const vertexText = vertex.label ?? vertex.id;\n    const radius = 0;\n    const shape = "class_box";\n    const node = {\n      labelStyle: styles2.labelStyle,\n      shape,\n      labelText: sanitizeText(vertexText),\n      classData: vertex,\n      rx: radius,\n      ry: radius,\n      class: cssClassStr,\n      style: styles2.style,\n      id: vertex.id,\n      domId: vertex.domId,\n      tooltip: diagObj.db.getTooltip(vertex.id, parent) || "",\n      haveCallback: vertex.haveCallback,\n      link: vertex.link,\n      width: vertex.type === "group" ? 500 : void 0,\n      type: vertex.type,\n      // TODO V10: Flowchart ? Keeping flowchart for backwards compatibility. Remove in next major release\n      padding: ((_a = (0,_mermaid_6dc72991_js__WEBPACK_IMPORTED_MODULE_7__.c)().flowchart) == null ? void 0 : _a.padding) ?? ((_b = (0,_mermaid_6dc72991_js__WEBPACK_IMPORTED_MODULE_7__.c)().class) == null ? void 0 : _b.padding)\n    };\n    g.setNode(vertex.id, node);\n    if (parent) {\n      g.setParent(vertex.id, parent);\n    }\n    _mermaid_6dc72991_js__WEBPACK_IMPORTED_MODULE_7__.l.info("setNode", node);\n  });\n};\nconst addNotes = function(notes, g, startEdgeId, classes) {\n  _mermaid_6dc72991_js__WEBPACK_IMPORTED_MODULE_7__.l.info(notes);\n  notes.forEach(function(note, i) {\n    var _a, _b;\n    const vertex = note;\n    const cssNoteStr = "";\n    const styles2 = { labelStyle: "", style: "" };\n    const vertexText = vertex.text;\n    const radius = 0;\n    const shape = "note";\n    const node = {\n      labelStyle: styles2.labelStyle,\n      shape,\n      labelText: sanitizeText(vertexText),\n      noteData: vertex,\n      rx: radius,\n      ry: radius,\n      class: cssNoteStr,\n      style: styles2.style,\n      id: vertex.id,\n      domId: vertex.id,\n      tooltip: "",\n      type: "note",\n      // TODO V10: Flowchart ? Keeping flowchart for backwards compatibility. Remove in next major release\n      padding: ((_a = (0,_mermaid_6dc72991_js__WEBPACK_IMPORTED_MODULE_7__.c)().flowchart) == null ? void 0 : _a.padding) ?? ((_b = (0,_mermaid_6dc72991_js__WEBPACK_IMPORTED_MODULE_7__.c)().class) == null ? void 0 : _b.padding)\n    };\n    g.setNode(vertex.id, node);\n    _mermaid_6dc72991_js__WEBPACK_IMPORTED_MODULE_7__.l.info("setNode", node);\n    if (!vertex.class || !(vertex.class in classes)) {\n      return;\n    }\n    const edgeId = startEdgeId + i;\n    const edgeData = {\n      id: `edgeNote${edgeId}`,\n      //Set relationship style and line type\n      classes: "relation",\n      pattern: "dotted",\n      // Set link type for rendering\n      arrowhead: "none",\n      //Set edge extra labels\n      startLabelRight: "",\n      endLabelLeft: "",\n      //Set relation arrow types\n      arrowTypeStart: "none",\n      arrowTypeEnd: "none",\n      style: "fill:none",\n      labelStyle: "",\n      curve: (0,_mermaid_6dc72991_js__WEBPACK_IMPORTED_MODULE_7__.n)(conf.curve, d3__WEBPACK_IMPORTED_MODULE_0__/* .curveLinear */ .lUB)\n    };\n    g.setEdge(vertex.id, vertex.class, edgeData, edgeId);\n  });\n};\nconst addRelations = function(relations, g) {\n  const conf2 = (0,_mermaid_6dc72991_js__WEBPACK_IMPORTED_MODULE_7__.c)().flowchart;\n  let cnt = 0;\n  relations.forEach(function(edge) {\n    var _a;\n    cnt++;\n    const edgeData = {\n      //Set relationship style and line type\n      classes: "relation",\n      pattern: edge.relation.lineType == 1 ? "dashed" : "solid",\n      id: `id_${edge.id1}_${edge.id2}_${cnt}`,\n      // Set link type for rendering\n      arrowhead: edge.type === "arrow_open" ? "none" : "normal",\n      //Set edge extra labels\n      startLabelRight: edge.relationTitle1 === "none" ? "" : edge.relationTitle1,\n      endLabelLeft: edge.relationTitle2 === "none" ? "" : edge.relationTitle2,\n      //Set relation arrow types\n      arrowTypeStart: getArrowMarker(edge.relation.type1),\n      arrowTypeEnd: getArrowMarker(edge.relation.type2),\n      style: "fill:none",\n      labelStyle: "",\n      curve: (0,_mermaid_6dc72991_js__WEBPACK_IMPORTED_MODULE_7__.n)(conf2 == null ? void 0 : conf2.curve, d3__WEBPACK_IMPORTED_MODULE_0__/* .curveLinear */ .lUB)\n    };\n    _mermaid_6dc72991_js__WEBPACK_IMPORTED_MODULE_7__.l.info(edgeData, edge);\n    if (edge.style !== void 0) {\n      const styles2 = (0,_mermaid_6dc72991_js__WEBPACK_IMPORTED_MODULE_7__.k)(edge.style);\n      edgeData.style = styles2.style;\n      edgeData.labelStyle = styles2.labelStyle;\n    }\n    edge.text = edge.title;\n    if (edge.text === void 0) {\n      if (edge.style !== void 0) {\n        edgeData.arrowheadStyle = "fill: #333";\n      }\n    } else {\n      edgeData.arrowheadStyle = "fill: #333";\n      edgeData.labelpos = "c";\n      if (((_a = (0,_mermaid_6dc72991_js__WEBPACK_IMPORTED_MODULE_7__.c)().flowchart) == null ? void 0 : _a.htmlLabels) ?? (0,_mermaid_6dc72991_js__WEBPACK_IMPORTED_MODULE_7__.c)().htmlLabels) {\n        edgeData.labelType = "html";\n        edgeData.label = \'<span class="edgeLabel">\' + edge.text + "</span>";\n      } else {\n        edgeData.labelType = "text";\n        edgeData.label = edge.text.replace(_mermaid_6dc72991_js__WEBPACK_IMPORTED_MODULE_7__.e.lineBreakRegex, "\\n");\n        if (edge.style === void 0) {\n          edgeData.style = edgeData.style || "stroke: #333; stroke-width: 1.5px;fill:none";\n        }\n        edgeData.labelStyle = edgeData.labelStyle.replace("color:", "fill:");\n      }\n    }\n    g.setEdge(edge.id1, edge.id2, edgeData, cnt);\n  });\n};\nconst setConf = function(cnf) {\n  conf = {\n    ...conf,\n    ...cnf\n  };\n};\nconst draw = async function(text, id, _version, diagObj) {\n  _mermaid_6dc72991_js__WEBPACK_IMPORTED_MODULE_7__.l.info("Drawing class - ", id);\n  const conf2 = (0,_mermaid_6dc72991_js__WEBPACK_IMPORTED_MODULE_7__.c)().flowchart ?? (0,_mermaid_6dc72991_js__WEBPACK_IMPORTED_MODULE_7__.c)().class;\n  const securityLevel = (0,_mermaid_6dc72991_js__WEBPACK_IMPORTED_MODULE_7__.c)().securityLevel;\n  _mermaid_6dc72991_js__WEBPACK_IMPORTED_MODULE_7__.l.info("config:", conf2);\n  const nodeSpacing = (conf2 == null ? void 0 : conf2.nodeSpacing) ?? 50;\n  const rankSpacing = (conf2 == null ? void 0 : conf2.rankSpacing) ?? 50;\n  const g = new dagre_d3_es_src_graphlib_index_js__WEBPACK_IMPORTED_MODULE_1__/* .Graph */ .T({\n    multigraph: true,\n    compound: true\n  }).setGraph({\n    rankdir: diagObj.db.getDirection(),\n    nodesep: nodeSpacing,\n    ranksep: rankSpacing,\n    marginx: 8,\n    marginy: 8\n  }).setDefaultEdgeLabel(function() {\n    return {};\n  });\n  const namespaces = diagObj.db.getNamespaces();\n  const classes = diagObj.db.getClasses();\n  const relations = diagObj.db.getRelations();\n  const notes = diagObj.db.getNotes();\n  _mermaid_6dc72991_js__WEBPACK_IMPORTED_MODULE_7__.l.info(relations);\n  addNamespaces(namespaces, g, id, diagObj);\n  addClasses(classes, g, id, diagObj);\n  addRelations(relations, g);\n  addNotes(notes, g, relations.length + 1, classes);\n  let sandboxElement;\n  if (securityLevel === "sandbox") {\n    sandboxElement = (0,d3__WEBPACK_IMPORTED_MODULE_0__/* .select */ .Ltv)("#i" + id);\n  }\n  const root = securityLevel === "sandbox" ? (0,d3__WEBPACK_IMPORTED_MODULE_0__/* .select */ .Ltv)(sandboxElement.nodes()[0].contentDocument.body) : (0,d3__WEBPACK_IMPORTED_MODULE_0__/* .select */ .Ltv)("body");\n  const svg = root.select(`[id="${id}"]`);\n  const element = root.select("#" + id + " g");\n  await (0,_index_01f381cb_js__WEBPACK_IMPORTED_MODULE_8__.r)(\n    element,\n    g,\n    ["aggregation", "extension", "composition", "dependency", "lollipop"],\n    "classDiagram",\n    id\n  );\n  _mermaid_6dc72991_js__WEBPACK_IMPORTED_MODULE_7__.u.insertTitle(svg, "classTitleText", (conf2 == null ? void 0 : conf2.titleTopMargin) ?? 5, diagObj.db.getDiagramTitle());\n  (0,_mermaid_6dc72991_js__WEBPACK_IMPORTED_MODULE_7__.o)(g, svg, conf2 == null ? void 0 : conf2.diagramPadding, conf2 == null ? void 0 : conf2.useMaxWidth);\n  if (!(conf2 == null ? void 0 : conf2.htmlLabels)) {\n    const doc = securityLevel === "sandbox" ? sandboxElement.nodes()[0].contentDocument : document;\n    const labels = doc.querySelectorAll(\'[id="\' + id + \'"] .edgeLabel .label\');\n    for (const label of labels) {\n      const dim = label.getBBox();\n      const rect = doc.createElementNS("http://www.w3.org/2000/svg", "rect");\n      rect.setAttribute("rx", 0);\n      rect.setAttribute("ry", 0);\n      rect.setAttribute("width", dim.width);\n      rect.setAttribute("height", dim.height);\n      label.insertBefore(rect, label.firstChild);\n    }\n  }\n};\nfunction getArrowMarker(type) {\n  let marker;\n  switch (type) {\n    case 0:\n      marker = "aggregation";\n      break;\n    case 1:\n      marker = "extension";\n      break;\n    case 2:\n      marker = "composition";\n      break;\n    case 3:\n      marker = "dependency";\n      break;\n    case 4:\n      marker = "lollipop";\n      break;\n    default:\n      marker = "none";\n  }\n  return marker;\n}\nconst renderer = {\n  setConf,\n  draw\n};\nconst diagram = {\n  parser: _styles_b83b31c9_js__WEBPACK_IMPORTED_MODULE_9__.p,\n  db: _styles_b83b31c9_js__WEBPACK_IMPORTED_MODULE_9__.d,\n  renderer,\n  styles: _styles_b83b31c9_js__WEBPACK_IMPORTED_MODULE_9__.s,\n  init: (cnf) => {\n    if (!cnf.class) {\n      cnf.class = {};\n    }\n    cnf.class.arrowMarkerAbsolute = cnf.arrowMarkerAbsolute;\n    _styles_b83b31c9_js__WEBPACK_IMPORTED_MODULE_9__.d.clear();\n  }\n};\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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REFBTTtBQUM1RyxrQ0FBa0MsR0FBRztBQUNyQztBQUNBLFFBQVEscURBQU07QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFLG1EQUFLO0FBQ1AsRUFBRSx1REFBaUI7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSLElBQUk7QUFDSjtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSxrREFBRTtBQUNOO0FBQ0E7QUFHRSIsInNvdXJjZXMiOlsid2VicGFjazovL2dhbnR0LW9uLWtpbnRvbmUvLi9ub2RlX21vZHVsZXMvbWVybWFpZC9kaXN0L2NsYXNzRGlhZ3JhbS12Mi1hMmI3MzhhZC5qcz9lNGE0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHAgYXMgcGFyc2VyLCBkIGFzIGRiLCBzIGFzIHN0eWxlcyB9IGZyb20gXCIuL3N0eWxlcy1iODNiMzFjOS5qc1wiO1xuaW1wb3J0IHsgc2VsZWN0LCBjdXJ2ZUxpbmVhciB9IGZyb20gXCJkM1wiO1xuaW1wb3J0ICogYXMgZ3JhcGhsaWIgZnJvbSBcImRhZ3JlLWQzLWVzL3NyYy9ncmFwaGxpYi9pbmRleC5qc1wiO1xuaW1wb3J0IHsgbCBhcyBsb2csIGMgYXMgZ2V0Q29uZmlnLCB1IGFzIHV0aWxzLCBvIGFzIHNldHVwR3JhcGhWaWV3Ym94LCBrIGFzIGdldFN0eWxlc0Zyb21BcnJheSwgbiBhcyBpbnRlcnBvbGF0ZVRvQ3VydmUsIGUgYXMgY29tbW9uIH0gZnJvbSBcIi4vbWVybWFpZC02ZGM3Mjk5MS5qc1wiO1xuaW1wb3J0IHsgciBhcyByZW5kZXIgfSBmcm9tIFwiLi9pbmRleC0wMWYzODFjYi5qc1wiO1xuaW1wb3J0IFwidHMtZGVkZW50XCI7XG5pbXBvcnQgXCJkYXlqc1wiO1xuaW1wb3J0IFwiQGJyYWludHJlZS9zYW5pdGl6ZS11cmxcIjtcbmltcG9ydCBcImRvbXB1cmlmeVwiO1xuaW1wb3J0IFwia2hyb21hXCI7XG5pbXBvcnQgXCJsb2Rhc2gtZXMvbWVtb2l6ZS5qc1wiO1xuaW1wb3J0IFwibG9kYXNoLWVzL21lcmdlLmpzXCI7XG5pbXBvcnQgXCJzdHlsaXNcIjtcbmltcG9ydCBcImxvZGFzaC1lcy9pc0VtcHR5LmpzXCI7XG5pbXBvcnQgXCJkYWdyZS1kMy1lcy9zcmMvZGFncmUvaW5kZXguanNcIjtcbmltcG9ydCBcImRhZ3JlLWQzLWVzL3NyYy9ncmFwaGxpYi9qc29uLmpzXCI7XG5pbXBvcnQgXCIuL2VkZ2VzLTA2NmE1NTYxLmpzXCI7XG5pbXBvcnQgXCIuL2NyZWF0ZVRleHQtY2EwYzUyMTYuanNcIjtcbmltcG9ydCBcIm1kYXN0LXV0aWwtZnJvbS1tYXJrZG93blwiO1xuY29uc3Qgc2FuaXRpemVUZXh0ID0gKHR4dCkgPT4gY29tbW9uLnNhbml0aXplVGV4dCh0eHQsIGdldENvbmZpZygpKTtcbmxldCBjb25mID0ge1xuICBkaXZpZGVyTWFyZ2luOiAxMCxcbiAgcGFkZGluZzogNSxcbiAgdGV4dEhlaWdodDogMTAsXG4gIGN1cnZlOiB2b2lkIDBcbn07XG5jb25zdCBhZGROYW1lc3BhY2VzID0gZnVuY3Rpb24obmFtZXNwYWNlcywgZywgX2lkLCBkaWFnT2JqKSB7XG4gIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhuYW1lc3BhY2VzKTtcbiAgbG9nLmluZm8oXCJrZXlzOlwiLCBrZXlzKTtcbiAgbG9nLmluZm8obmFtZXNwYWNlcyk7XG4gIGtleXMuZm9yRWFjaChmdW5jdGlvbihpZCkge1xuICAgIHZhciBfYSwgX2I7XG4gICAgY29uc3QgdmVydGV4ID0gbmFtZXNwYWNlc1tpZF07XG4gICAgY29uc3Qgc2hhcGUgPSBcInJlY3RcIjtcbiAgICBjb25zdCBub2RlID0ge1xuICAgICAgc2hhcGUsXG4gICAgICBpZDogdmVydGV4LmlkLFxuICAgICAgZG9tSWQ6IHZlcnRleC5kb21JZCxcbiAgICAgIGxhYmVsVGV4dDogc2FuaXRpemVUZXh0KHZlcnRleC5pZCksXG4gICAgICBsYWJlbFN0eWxlOiBcIlwiLFxuICAgICAgc3R5bGU6IFwiZmlsbDogbm9uZTsgc3Ryb2tlOiBibGFja1wiLFxuICAgICAgLy8gVE9ETyBWMTA6IEZsb3djaGFydCA/IEtlZXBpbmcgZmxvd2NoYXJ0IGZvciBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eS4gUmVtb3ZlIGluIG5leHQgbWFqb3IgcmVsZWFzZVxuICAgICAgcGFkZGluZzogKChfYSA9IGdldENvbmZpZygpLmZsb3djaGFydCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLnBhZGRpbmcpID8/ICgoX2IgPSBnZXRDb25maWcoKS5jbGFzcykgPT0gbnVsbCA/IHZvaWQgMCA6IF9iLnBhZGRpbmcpXG4gICAgfTtcbiAgICBnLnNldE5vZGUodmVydGV4LmlkLCBub2RlKTtcbiAgICBhZGRDbGFzc2VzKHZlcnRleC5jbGFzc2VzLCBnLCBfaWQsIGRpYWdPYmosIHZlcnRleC5pZCk7XG4gICAgbG9nLmluZm8oXCJzZXROb2RlXCIsIG5vZGUpO1xuICB9KTtcbn07XG5jb25zdCBhZGRDbGFzc2VzID0gZnVuY3Rpb24oY2xhc3NlcywgZywgX2lkLCBkaWFnT2JqLCBwYXJlbnQpIHtcbiAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKGNsYXNzZXMpO1xuICBsb2cuaW5mbyhcImtleXM6XCIsIGtleXMpO1xuICBsb2cuaW5mbyhjbGFzc2VzKTtcbiAga2V5cy5maWx0ZXIoKGlkKSA9PiBjbGFzc2VzW2lkXS5wYXJlbnQgPT0gcGFyZW50KS5mb3JFYWNoKGZ1bmN0aW9uKGlkKSB7XG4gICAgdmFyIF9hLCBfYjtcbiAgICBjb25zdCB2ZXJ0ZXggPSBjbGFzc2VzW2lkXTtcbiAgICBjb25zdCBjc3NDbGFzc1N0ciA9IHZlcnRleC5jc3NDbGFzc2VzLmpvaW4oXCIgXCIpO1xuICAgIGNvbnN0IHN0eWxlczIgPSBnZXRTdHlsZXNGcm9tQXJyYXkodmVydGV4LnN0eWxlcyk7XG4gICAgY29uc3QgdmVydGV4VGV4dCA9IHZlcnRleC5sYWJlbCA/PyB2ZXJ0ZXguaWQ7XG4gICAgY29uc3QgcmFkaXVzID0gMDtcbiAgICBjb25zdCBzaGFwZSA9IFwiY2xhc3NfYm94XCI7XG4gICAgY29uc3Qgbm9kZSA9IHtcbiAgICAgIGxhYmVsU3R5bGU6IHN0eWxlczIubGFiZWxTdHlsZSxcbiAgICAgIHNoYXBlLFxuICAgICAgbGFiZWxUZXh0OiBzYW5pdGl6ZVRleHQodmVydGV4VGV4dCksXG4gICAgICBjbGFzc0RhdGE6IHZlcnRleCxcbiAgICAgIHJ4OiByYWRpdXMsXG4gICAgICByeTogcmFkaXVzLFxuICAgICAgY2xhc3M6IGNzc0NsYXNzU3RyLFxuICAgICAgc3R5bGU6IHN0eWxlczIuc3R5bGUsXG4gICAgICBpZDogdmVydGV4LmlkLFxuICAgICAgZG9tSWQ6IHZlcnRleC5kb21JZCxcbiAgICAgIHRvb2x0aXA6IGRpYWdPYmouZGIuZ2V0VG9vbHRpcCh2ZXJ0ZXguaWQsIHBhcmVudCkgfHwgXCJcIixcbiAgICAgIGhhdmVDYWxsYmFjazogdmVydGV4LmhhdmVDYWxsYmFjayxcbiAgICAgIGxpbms6IHZlcnRleC5saW5rLFxuICAgICAgd2lkdGg6IHZlcnRleC50eXBlID09PSBcImdyb3VwXCIgPyA1MDAgOiB2b2lkIDAsXG4gICAgICB0eXBlOiB2ZXJ0ZXgudHlwZSxcbiAgICAgIC8vIFRPRE8gVjEwOiBGbG93Y2hhcnQgPyBLZWVwaW5nIGZsb3djaGFydCBmb3IgYmFja3dhcmRzIGNvbXBhdGliaWxpdHkuIFJlbW92ZSBpbiBuZXh0IG1ham9yIHJlbGVhc2VcbiAgICAgIHBhZGRpbmc6ICgoX2EgPSBnZXRDb25maWcoKS5mbG93Y2hhcnQpID09IG51bGwgPyB2b2lkIDAgOiBfYS5wYWRkaW5nKSA/PyAoKF9iID0gZ2V0Q29uZmlnKCkuY2xhc3MpID09IG51bGwgPyB2b2lkIDAgOiBfYi5wYWRkaW5nKVxuICAgIH07XG4gICAgZy5zZXROb2RlKHZlcnRleC5pZCwgbm9kZSk7XG4gICAgaWYgKHBhcmVudCkge1xuICAgICAgZy5zZXRQYXJlbnQodmVydGV4LmlkLCBwYXJlbnQpO1xuICAgIH1cbiAgICBsb2cuaW5mbyhcInNldE5vZGVcIiwgbm9kZSk7XG4gIH0pO1xufTtcbmNvbnN0IGFkZE5vdGVzID0gZnVuY3Rpb24obm90ZXMsIGcsIHN0YXJ0RWRnZUlkLCBjbGFzc2VzKSB7XG4gIGxvZy5pbmZvKG5vdGVzKTtcbiAgbm90ZXMuZm9yRWFjaChmdW5jdGlvbihub3RlLCBpKSB7XG4gICAgdmFyIF9hLCBfYjtcbiAgICBjb25zdCB2ZXJ0ZXggPSBub3RlO1xuICAgIGNvbnN0IGNzc05vdGVTdHIgPSBcIlwiO1xuICAgIGNvbnN0IHN0eWxlczIgPSB7IGxhYmVsU3R5bGU6IFwiXCIsIHN0eWxlOiBcIlwiIH07XG4gICAgY29uc3QgdmVydGV4VGV4dCA9IHZlcnRleC50ZXh0O1xuICAgIGNvbnN0IHJhZGl1cyA9IDA7XG4gICAgY29uc3Qgc2hhcGUgPSBcIm5vdGVcIjtcbiAgICBjb25zdCBub2RlID0ge1xuICAgICAgbGFiZWxTdHlsZTogc3R5bGVzMi5sYWJlbFN0eWxlLFxuICAgICAgc2hhcGUsXG4gICAgICBsYWJlbFRleHQ6IHNhbml0aXplVGV4dCh2ZXJ0ZXhUZXh0KSxcbiAgICAgIG5vdGVEYXRhOiB2ZXJ0ZXgsXG4gICAgICByeDogcmFkaXVzLFxuICAgICAgcnk6IHJhZGl1cyxcbiAgICAgIGNsYXNzOiBjc3NOb3RlU3RyLFxuICAgICAgc3R5bGU6IHN0eWxlczIuc3R5bGUsXG4gICAgICBpZDogdmVydGV4LmlkLFxuICAgICAgZG9tSWQ6IHZlcnRleC5pZCxcbiAgICAgIHRvb2x0aXA6IFwiXCIsXG4gICAgICB0eXBlOiBcIm5vdGVcIixcbiAgICAgIC8vIFRPRE8gVjEwOiBGbG93Y2hhcnQgPyBLZWVwaW5nIGZsb3djaGFydCBmb3IgYmFja3dhcmRzIGNvbXBhdGliaWxpdHkuIFJlbW92ZSBpbiBuZXh0IG1ham9yIHJlbGVhc2VcbiAgICAgIHBhZGRpbmc6ICgoX2EgPSBnZXRDb25maWcoKS5mbG93Y2hhcnQpID09IG51bGwgPyB2b2lkIDAgOiBfYS5wYWRkaW5nKSA/PyAoKF9iID0gZ2V0Q29uZmlnKCkuY2xhc3MpID09IG51bGwgPyB2b2lkIDAgOiBfYi5wYWRkaW5nKVxuICAgIH07XG4gICAgZy5zZXROb2RlKHZlcnRleC5pZCwgbm9kZSk7XG4gICAgbG9nLmluZm8oXCJzZXROb2RlXCIsIG5vZGUpO1xuICAgIGlmICghdmVydGV4LmNsYXNzIHx8ICEodmVydGV4LmNsYXNzIGluIGNsYXNzZXMpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGVkZ2VJZCA9IHN0YXJ0RWRnZUlkICsgaTtcbiAgICBjb25zdCBlZGdlRGF0YSA9IHtcbiAgICAgIGlkOiBgZWRnZU5vdGUke2VkZ2VJZH1gLFxuICAgICAgLy9TZXQgcmVsYXRpb25zaGlwIHN0eWxlIGFuZCBsaW5lIHR5cGVcbiAgICAgIGNsYXNzZXM6IFwicmVsYXRpb25cIixcbiAgICAgIHBhdHRlcm46IFwiZG90dGVkXCIsXG4gICAgICAvLyBTZXQgbGluayB0eXBlIGZvciByZW5kZXJpbmdcbiAgICAgIGFycm93aGVhZDogXCJub25lXCIsXG4gICAgICAvL1NldCBlZGdlIGV4dHJhIGxhYmVsc1xuICAgICAgc3RhcnRMYWJlbFJpZ2h0OiBcIlwiLFxuICAgICAgZW5kTGFiZWxMZWZ0OiBcIlwiLFxuICAgICAgLy9TZXQgcmVsYXRpb24gYXJyb3cgdHlwZXNcbiAgICAgIGFycm93VHlwZVN0YXJ0OiBcIm5vbmVcIixcbiAgICAgIGFycm93VHlwZUVuZDogXCJub25lXCIsXG4gICAgICBzdHlsZTogXCJmaWxsOm5vbmVcIixcbiAgICAgIGxhYmVsU3R5bGU6IFwiXCIsXG4gICAgICBjdXJ2ZTogaW50ZXJwb2xhdGVUb0N1cnZlKGNvbmYuY3VydmUsIGN1cnZlTGluZWFyKVxuICAgIH07XG4gICAgZy5zZXRFZGdlKHZlcnRleC5pZCwgdmVydGV4LmNsYXNzLCBlZGdlRGF0YSwgZWRnZUlkKTtcbiAgfSk7XG59O1xuY29uc3QgYWRkUmVsYXRpb25zID0gZnVuY3Rpb24ocmVsYXRpb25zLCBnKSB7XG4gIGNvbnN0IGNvbmYyID0gZ2V0Q29uZmlnKCkuZmxvd2NoYXJ0O1xuICBsZXQgY250ID0gMDtcbiAgcmVsYXRpb25zLmZvckVhY2goZnVuY3Rpb24oZWRnZSkge1xuICAgIHZhciBfYTtcbiAgICBjbnQrKztcbiAgICBjb25zdCBlZGdlRGF0YSA9IHtcbiAgICAgIC8vU2V0IHJlbGF0aW9uc2hpcCBzdHlsZSBhbmQgbGluZSB0eXBlXG4gICAgICBjbGFzc2VzOiBcInJlbGF0aW9uXCIsXG4gICAgICBwYXR0ZXJuOiBlZGdlLnJlbGF0aW9uLmxpbmVUeXBlID09IDEgPyBcImRhc2hlZFwiIDogXCJzb2xpZFwiLFxuICAgICAgaWQ6IGBpZF8ke2VkZ2UuaWQxfV8ke2VkZ2UuaWQyfV8ke2NudH1gLFxuICAgICAgLy8gU2V0IGxpbmsgdHlwZSBmb3IgcmVuZGVyaW5nXG4gICAgICBhcnJvd2hlYWQ6IGVkZ2UudHlwZSA9PT0gXCJhcnJvd19vcGVuXCIgPyBcIm5vbmVcIiA6IFwibm9ybWFsXCIsXG4gICAgICAvL1NldCBlZGdlIGV4dHJhIGxhYmVsc1xuICAgICAgc3RhcnRMYWJlbFJpZ2h0OiBlZGdlLnJlbGF0aW9uVGl0bGUxID09PSBcIm5vbmVcIiA/IFwiXCIgOiBlZGdlLnJlbGF0aW9uVGl0bGUxLFxuICAgICAgZW5kTGFiZWxMZWZ0OiBlZGdlLnJlbGF0aW9uVGl0bGUyID09PSBcIm5vbmVcIiA/IFwiXCIgOiBlZGdlLnJlbGF0aW9uVGl0bGUyLFxuICAgICAgLy9TZXQgcmVsYXRpb24gYXJyb3cgdHlwZXNcbiAgICAgIGFycm93VHlwZVN0YXJ0OiBnZXRBcnJvd01hcmtlcihlZGdlLnJlbGF0aW9uLnR5cGUxKSxcbiAgICAgIGFycm93VHlwZUVuZDogZ2V0QXJyb3dNYXJrZXIoZWRnZS5yZWxhdGlvbi50eXBlMiksXG4gICAgICBzdHlsZTogXCJmaWxsOm5vbmVcIixcbiAgICAgIGxhYmVsU3R5bGU6IFwiXCIsXG4gICAgICBjdXJ2ZTogaW50ZXJwb2xhdGVUb0N1cnZlKGNvbmYyID09IG51bGwgPyB2b2lkIDAgOiBjb25mMi5jdXJ2ZSwgY3VydmVMaW5lYXIpXG4gICAgfTtcbiAgICBsb2cuaW5mbyhlZGdlRGF0YSwgZWRnZSk7XG4gICAgaWYgKGVkZ2Uuc3R5bGUgIT09IHZvaWQgMCkge1xuICAgICAgY29uc3Qgc3R5bGVzMiA9IGdldFN0eWxlc0Zyb21BcnJheShlZGdlLnN0eWxlKTtcbiAgICAgIGVkZ2VEYXRhLnN0eWxlID0gc3R5bGVzMi5zdHlsZTtcbiAgICAgIGVkZ2VEYXRhLmxhYmVsU3R5bGUgPSBzdHlsZXMyLmxhYmVsU3R5bGU7XG4gICAgfVxuICAgIGVkZ2UudGV4dCA9IGVkZ2UudGl0bGU7XG4gICAgaWYgKGVkZ2UudGV4dCA9PT0gdm9pZCAwKSB7XG4gICAgICBpZiAoZWRnZS5zdHlsZSAhPT0gdm9pZCAwKSB7XG4gICAgICAgIGVkZ2VEYXRhLmFycm93aGVhZFN0eWxlID0gXCJmaWxsOiAjMzMzXCI7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGVkZ2VEYXRhLmFycm93aGVhZFN0eWxlID0gXCJmaWxsOiAjMzMzXCI7XG4gICAgICBlZGdlRGF0YS5sYWJlbHBvcyA9IFwiY1wiO1xuICAgICAgaWYgKCgoX2EgPSBnZXRDb25maWcoKS5mbG93Y2hhcnQpID09IG51bGwgPyB2b2lkIDAgOiBfYS5odG1sTGFiZWxzKSA/PyBnZXRDb25maWcoKS5odG1sTGFiZWxzKSB7XG4gICAgICAgIGVkZ2VEYXRhLmxhYmVsVHlwZSA9IFwiaHRtbFwiO1xuICAgICAgICBlZGdlRGF0YS5sYWJlbCA9ICc8c3BhbiBjbGFzcz1cImVkZ2VMYWJlbFwiPicgKyBlZGdlLnRleHQgKyBcIjwvc3Bhbj5cIjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGVkZ2VEYXRhLmxhYmVsVHlwZSA9IFwidGV4dFwiO1xuICAgICAgICBlZGdlRGF0YS5sYWJlbCA9IGVkZ2UudGV4dC5yZXBsYWNlKGNvbW1vbi5saW5lQnJlYWtSZWdleCwgXCJcXG5cIik7XG4gICAgICAgIGlmIChlZGdlLnN0eWxlID09PSB2b2lkIDApIHtcbiAgICAgICAgICBlZGdlRGF0YS5zdHlsZSA9IGVkZ2VEYXRhLnN0eWxlIHx8IFwic3Ryb2tlOiAjMzMzOyBzdHJva2Utd2lkdGg6IDEuNXB4O2ZpbGw6bm9uZVwiO1xuICAgICAgICB9XG4gICAgICAgIGVkZ2VEYXRhLmxhYmVsU3R5bGUgPSBlZGdlRGF0YS5sYWJlbFN0eWxlLnJlcGxhY2UoXCJjb2xvcjpcIiwgXCJmaWxsOlwiKTtcbiAgICAgIH1cbiAgICB9XG4gICAgZy5zZXRFZGdlKGVkZ2UuaWQxLCBlZGdlLmlkMiwgZWRnZURhdGEsIGNudCk7XG4gIH0pO1xufTtcbmNvbnN0IHNldENvbmYgPSBmdW5jdGlvbihjbmYpIHtcbiAgY29uZiA9IHtcbiAgICAuLi5jb25mLFxuICAgIC4uLmNuZlxuICB9O1xufTtcbmNvbnN0IGRyYXcgPSBhc3luYyBmdW5jdGlvbih0ZXh0LCBpZCwgX3ZlcnNpb24sIGRpYWdPYmopIHtcbiAgbG9nLmluZm8oXCJEcmF3aW5nIGNsYXNzIC0gXCIsIGlkKTtcbiAgY29uc3QgY29uZjIgPSBnZXRDb25maWcoKS5mbG93Y2hhcnQgPz8gZ2V0Q29uZmlnKCkuY2xhc3M7XG4gIGNvbnN0IHNlY3VyaXR5TGV2ZWwgPSBnZXRDb25maWcoKS5zZWN1cml0eUxldmVsO1xuICBsb2cuaW5mbyhcImNvbmZpZzpcIiwgY29uZjIpO1xuICBjb25zdCBub2RlU3BhY2luZyA9IChjb25mMiA9PSBudWxsID8gdm9pZCAwIDogY29uZjIubm9kZVNwYWNpbmcpID8/IDUwO1xuICBjb25zdCByYW5rU3BhY2luZyA9IChjb25mMiA9PSBudWxsID8gdm9pZCAwIDogY29uZjIucmFua1NwYWNpbmcpID8/IDUwO1xuICBjb25zdCBnID0gbmV3IGdyYXBobGliLkdyYXBoKHtcbiAgICBtdWx0aWdyYXBoOiB0cnVlLFxuICAgIGNvbXBvdW5kOiB0cnVlXG4gIH0pLnNldEdyYXBoKHtcbiAgICByYW5rZGlyOiBkaWFnT2JqLmRiLmdldERpcmVjdGlvbigpLFxuICAgIG5vZGVzZXA6IG5vZGVTcGFjaW5nLFxuICAgIHJhbmtzZXA6IHJhbmtTcGFjaW5nLFxuICAgIG1hcmdpbng6IDgsXG4gICAgbWFyZ2lueTogOFxuICB9KS5zZXREZWZhdWx0RWRnZUxhYmVsKGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB7fTtcbiAgfSk7XG4gIGNvbnN0IG5hbWVzcGFjZXMgPSBkaWFnT2JqLmRiLmdldE5hbWVzcGFjZXMoKTtcbiAgY29uc3QgY2xhc3NlcyA9IGRpYWdPYmouZGIuZ2V0Q2xhc3NlcygpO1xuICBjb25zdCByZWxhdGlvbnMgPSBkaWFnT2JqLmRiLmdldFJlbGF0aW9ucygpO1xuICBjb25zdCBub3RlcyA9IGRpYWdPYmouZGIuZ2V0Tm90ZXMoKTtcbiAgbG9nLmluZm8ocmVsYXRpb25zKTtcbiAgYWRkTmFtZXNwYWNlcyhuYW1lc3BhY2VzLCBnLCBpZCwgZGlhZ09iaik7XG4gIGFkZENsYXNzZXMoY2xhc3NlcywgZywgaWQsIGRpYWdPYmopO1xuICBhZGRSZWxhdGlvbnMocmVsYXRpb25zLCBnKTtcbiAgYWRkTm90ZXMobm90ZXMsIGcsIHJlbGF0aW9ucy5sZW5ndGggKyAxLCBjbGFzc2VzKTtcbiAgbGV0IHNhbmRib3hFbGVtZW50O1xuICBpZiAoc2VjdXJpdHlMZXZlbCA9PT0gXCJzYW5kYm94XCIpIHtcbiAgICBzYW5kYm94RWxlbWVudCA9IHNlbGVjdChcIiNpXCIgKyBpZCk7XG4gIH1cbiAgY29uc3Qgcm9vdCA9IHNlY3VyaXR5TGV2ZWwgPT09IFwic2FuZGJveFwiID8gc2VsZWN0KHNhbmRib3hFbGVtZW50Lm5vZGVzKClbMF0uY29udGVudERvY3VtZW50LmJvZHkpIDogc2VsZWN0KFwiYm9keVwiKTtcbiAgY29uc3Qgc3ZnID0gcm9vdC5zZWxlY3QoYFtpZD1cIiR7aWR9XCJdYCk7XG4gIGNvbnN0IGVsZW1lbnQgPSByb290LnNlbGVjdChcIiNcIiArIGlkICsgXCIgZ1wiKTtcbiAgYXdhaXQgcmVuZGVyKFxuICAgIGVsZW1lbnQsXG4gICAgZyxcbiAgICBbXCJhZ2dyZWdhdGlvblwiLCBcImV4dGVuc2lvblwiLCBcImNvbXBvc2l0aW9uXCIsIFwiZGVwZW5kZW5jeVwiLCBcImxvbGxpcG9wXCJdLFxuICAgIFwiY2xhc3NEaWFncmFtXCIsXG4gICAgaWRcbiAgKTtcbiAgdXRpbHMuaW5zZXJ0VGl0bGUoc3ZnLCBcImNsYXNzVGl0bGVUZXh0XCIsIChjb25mMiA9PSBudWxsID8gdm9pZCAwIDogY29uZjIudGl0bGVUb3BNYXJnaW4pID8/IDUsIGRpYWdPYmouZGIuZ2V0RGlhZ3JhbVRpdGxlKCkpO1xuICBzZXR1cEdyYXBoVmlld2JveChnLCBzdmcsIGNvbmYyID09IG51bGwgPyB2b2lkIDAgOiBjb25mMi5kaWFncmFtUGFkZGluZywgY29uZjIgPT0gbnVsbCA/IHZvaWQgMCA6IGNvbmYyLnVzZU1heFdpZHRoKTtcbiAgaWYgKCEoY29uZjIgPT0gbnVsbCA/IHZvaWQgMCA6IGNvbmYyLmh0bWxMYWJlbHMpKSB7XG4gICAgY29uc3QgZG9jID0gc2VjdXJpdHlMZXZlbCA9PT0gXCJzYW5kYm94XCIgPyBzYW5kYm94RWxlbWVudC5ub2RlcygpWzBdLmNvbnRlbnREb2N1bWVudCA6IGRvY3VtZW50O1xuICAgIGNvbnN0IGxhYmVscyA9IGRvYy5xdWVyeVNlbGVjdG9yQWxsKCdbaWQ9XCInICsgaWQgKyAnXCJdIC5lZGdlTGFiZWwgLmxhYmVsJyk7XG4gICAgZm9yIChjb25zdCBsYWJlbCBvZiBsYWJlbHMpIHtcbiAgICAgIGNvbnN0IGRpbSA9IGxhYmVsLmdldEJCb3goKTtcbiAgICAgIGNvbnN0IHJlY3QgPSBkb2MuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiwgXCJyZWN0XCIpO1xuICAgICAgcmVjdC5zZXRBdHRyaWJ1dGUoXCJyeFwiLCAwKTtcbiAgICAgIHJlY3Quc2V0QXR0cmlidXRlKFwicnlcIiwgMCk7XG4gICAgICByZWN0LnNldEF0dHJpYnV0ZShcIndpZHRoXCIsIGRpbS53aWR0aCk7XG4gICAgICByZWN0LnNldEF0dHJpYnV0ZShcImhlaWdodFwiLCBkaW0uaGVpZ2h0KTtcbiAgICAgIGxhYmVsLmluc2VydEJlZm9yZShyZWN0LCBsYWJlbC5maXJzdENoaWxkKTtcbiAgICB9XG4gIH1cbn07XG5mdW5jdGlvbiBnZXRBcnJvd01hcmtlcih0eXBlKSB7XG4gIGxldCBtYXJrZXI7XG4gIHN3aXRjaCAodHlwZSkge1xuICAgIGNhc2UgMDpcbiAgICAgIG1hcmtlciA9IFwiYWdncmVnYXRpb25cIjtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgMTpcbiAgICAgIG1hcmtlciA9IFwiZXh0ZW5zaW9uXCI7XG4gICAgICBicmVhaztcbiAgICBjYXNlIDI6XG4gICAgICBtYXJrZXIgPSBcImNvbXBvc2l0aW9uXCI7XG4gICAgICBicmVhaztcbiAgICBjYXNlIDM6XG4gICAgICBtYXJrZXIgPSBcImRlcGVuZGVuY3lcIjtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgNDpcbiAgICAgIG1hcmtlciA9IFwibG9sbGlwb3BcIjtcbiAgICAgIGJyZWFrO1xuICAgIGRlZmF1bHQ6XG4gICAgICBtYXJrZXIgPSBcIm5vbmVcIjtcbiAgfVxuICByZXR1cm4gbWFya2VyO1xufVxuY29uc3QgcmVuZGVyZXIgPSB7XG4gIHNldENvbmYsXG4gIGRyYXdcbn07XG5jb25zdCBkaWFncmFtID0ge1xuICBwYXJzZXIsXG4gIGRiLFxuICByZW5kZXJlcixcbiAgc3R5bGVzLFxuICBpbml0OiAoY25mKSA9PiB7XG4gICAgaWYgKCFjbmYuY2xhc3MpIHtcbiAgICAgIGNuZi5jbGFzcyA9IHt9O1xuICAgIH1cbiAgICBjbmYuY2xhc3MuYXJyb3dNYXJrZXJBYnNvbHV0ZSA9IGNuZi5hcnJvd01hcmtlckFic29sdXRlO1xuICAgIGRiLmNsZWFyKCk7XG4gIH1cbn07XG5leHBvcnQge1xuICBkaWFncmFtXG59O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///8635\n')}}]);